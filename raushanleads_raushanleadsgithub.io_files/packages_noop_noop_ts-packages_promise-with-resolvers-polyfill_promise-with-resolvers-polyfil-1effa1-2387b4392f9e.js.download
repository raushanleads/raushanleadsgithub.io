"use strict";(globalThis.webpackChunk_github_ui_github_ui=globalThis.webpackChunk_github_ui_github_ui||[]).push([["lazy-react-partial-actions-custom-images-retention-policy","lazy-react-partial-actions-policies","lazy-react-partial-actions-secrets-variables-list","lazy-react-partial-actions-survey","lazy-react-partial-browser-geo-location","lazy-react-partial-codespaces-survey","lazy-react-partial-configure-mcp-server-partial","lazy-react-partial-consent-experience","lazy-react-partial-copilot-assisted-review-upsell","lazy-react-partial-copilot-code-review-feedback","lazy-react-partial-copilot-code-review-upsell","lazy-react-partial-copilot-content-exclusion","lazy-react-partial-copilot-model-settings","lazy-react-partial-copilot-survey","lazy-react-partial-custom-signup-content-manager","lazy-react-partial-date-picker-partial","lazy-react-partial-delete-configuration-dialog","lazy-react-partial-education-schools-auto-complete","lazy-react-partial-email-subscription-form","lazy-react-partial-external-group-team-mismatch-widget","lazy-react-partial-growth-banner-partial","lazy-react-partial-network-configurations-select-panel","lazy-react-partial-new-agent-task-button","lazy-react-partial-react-partial-anchor-example","lazy-react-partial-react-sandbox-sidenav","lazy-react-partial-search-results","lazy-react-partial-security-center-pagination","lazy-react-partial-single-sign-on-dropdown-partial","lazy-react-partial-sponsors-dashboard-your-sponsors","lazy-react-partial-sponsors-newsletters","lazy-react-partial-trade-screening-status-banner","packages_noop_noop_ts-packages_promise-with-resolvers-polyfill_promise-with-resolvers-polyfil-1effa1"],{6224:(e,t,n)=>{n.d(t,{A:()=>a});let a={container:"UserMessage-module__container--qQMdD",mention:"UserMessage-module__mention--iKJnY",command:"UserMessage-module__command--gs71n"}},7730:(e,t,n)=>{n.d(t,{g:()=>i});var a=n(21728),r=n(96540);function i(e){let t,n=(0,a.c)(2),[i,s]=(0,r.useState)(!1);return n[0]!==e?(t=()=>{let t=e.current,n=t?.lastElementChild;if(!n)return;let a=new IntersectionObserver(e=>{let[t]=e;return s(t?.isIntersecting??!0)},{root:t,threshold:1});return a.observe(n),()=>a.disconnect()},n[0]=e,n[1]=t):t=n[1],(0,r.useEffect)(t),i}},13171:(e,t,n)=>{n.d(t,{r:()=>eq});var a,r=n(74848),i=n(21728),s=n(25407),o=n(71315),l=n(38621),c=n(19579),d=n(69726),u=n(21373),m=n(77430),p=n(81960),h=n(46251),g=n(26607);let f={"contacts-container":"Contact-module__contacts-container--ggMhC","contact-list":"Contact-module__contact-list--NoW0r","contact-container":"Contact-module__contact-container--DsJZr","contact-info-container":"Contact-module__contact-info-container--sz7D3"},y={monogram:"Monogram-module__monogram--MgMG7"},x=e=>{let t,n=(0,i.c)(2),{initials:a}=e;return n[0]!==a?(t=(0,r.jsx)("div",{className:y.monogram,children:a}),n[0]=a,n[1]=t):t=n[1],t};try{x.displayName||(x.displayName="Monogram")}catch{}let v=e=>{let t,n,a,s,o,l=(0,i.c)(14),{size:c,information:d}=e,u=void 0===c?48:c;return l[0]!==d.avatar_url||l[1]!==d.username||l[2]!==u?(t=d.avatar_url?(0,r.jsx)(m.r,{square:!0,size:u,src:d.avatar_url,alt:d.username||"User avatar"}):(0,r.jsx)(x,{initials:d.username.charAt(0)}),l[0]=d.avatar_url,l[1]=d.username,l[2]=u,l[3]=t):t=l[3],l[4]!==d.username?(n=(0,r.jsx)(p.A,{as:"h2",variant:"small",children:d.username}),l[4]=d.username,l[5]=n):n=l[5],l[6]!==d.rank?(a=(0,r.jsx)(h.B,{direction:"horizontal",wrap:"wrap",children:(0,r.jsx)(g.A,{children:d.rank},d.rank)}),l[6]=d.rank,l[7]=a):a=l[7],l[8]!==n||l[9]!==a?(s=(0,r.jsxs)("div",{className:f["contact-info-container"],children:[n,a]}),l[8]=n,l[9]=a,l[10]=s):s=l[10],l[11]!==t||l[12]!==s?(o=(0,r.jsxs)("div",{className:f["contact-container"],children:[t,s]}),l[11]=t,l[12]=s,l[13]=o):o=l[13],o},_=e=>{let t,n,a,s=(0,i.c)(5),{contacts:o}=e;return s[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,r.jsx)(p.A,{as:"h1",variant:"medium",children:"Who to talk to"}),s[0]=t):t=s[0],s[1]!==o?(n=o?.map(C),s[1]=o,s[2]=n):n=s[2],s[3]!==n?(a=(0,r.jsxs)("div",{className:f["contacts-container"],children:[t,(0,r.jsx)("div",{className:f["contact-list"],children:n})]}),s[3]=n,s[4]=a):a=s[4],a};try{v.displayName||(v.displayName="Contact")}catch{}try{_.displayName||(_.displayName="ContactList")}catch{}function C(e){return(0,r.jsx)(v,{information:e},e.id)}let S={"spinner-container":"CopilotMetadata-module__spinner-container--EidxZ","tab-container":"CopilotMetadata-module__tab-container--qijcK",muted:"CopilotMetadata-module__muted--B9Loh","metadata-container":"CopilotMetadata-module__metadata-container--C3sG4","referrer-button":"CopilotMetadata-module__referrer-button--DOYxm"};var j=n(65411),b=n(96379),w=n(96540);let N=e=>{let t,n,a,m,p,h,g,f,y,x,v,C,N,I,E,T=(0,i.c)(44),{currentTab:A,setCurrentTab:R,loading:k,setLoading:L,makeCAPIRequest:P,fileContext:M}=e,O=void 0===k||k,F=M?.repoOwner,D=M?.repoName;T[0]===Symbol.for("react.memo_cache_sentinel")?(t=new URLSearchParams(o.cg?.location.search).get("issue")||"",T[0]=t):t=T[0];let B=t;T[1]!==F||T[2]!==D?(n=F&&D&&B?(0,s.dRG)({owner:F,repo:D,issueNumber:Number(B)}):void 0,T[1]=F,T[2]=D,T[3]=n):n=T[3];let $=n;T[4]!==M||T[5]!==P||T[6]!==L?(a={fileContext:M,setLoading:L,issueNumber:B,makeCAPIRequest:P},T[4]=M,T[5]=P,T[6]=L,T[7]=a):a=T[7];let{collaborators:z}=(({setLoading:e,issueNumber:t,makeCAPIRequest:n,fileContext:a})=>{let[r,i]=(0,w.useState)([]),{repoOwner:s,repoName:o,ref:l,path:c}=a??{},d=(0,w.useCallback)(async()=>{try{if(!a)return"";let e=await (0,b.lS)(`/${s}/${o}/collaborator_prompt/${c}?ref=${l}${t?`&issue=${t}`:""}`);if(!e.ok)throw Error("Something went wrong");let r=await e.text(),i={messages:[{role:"user",content:r}],model:"gpt-4o-mini",stream:!1,response_format:{type:"json_schema",json_schema:{name:"Collaborators",description:"List of metadata objects for the top collaborators",strict:!0,schema:{type:"object",additionalProperties:!1,properties:{collaborators:{type:"array",items:{type:"object",additionalProperties:!1,properties:{id:{type:"integer",description:"The collaborator's GitHub user ID."},username:{type:"string",description:"The collaborator's GitHub handle."},avatar_url:{type:"string",description:"The URL of the collaborator's GitHub user avatar."},rank:{type:"string",description:"The rank assignment of the collaborator."},explanation:{type:"string",description:"A brief 1-2 sentence description of the rank assignment."}},required:["id","username","avatar_url","rank","explanation"]}}},required:["collaborators"]}},temperature:0}},d=new j.J([]),u=await d.getAuthToken(),m=await n({basePath:"https://api.githubcopilot.com",body:i,path:"/chat/completions",method:"POST",streamingResponse:!1,authToken:u,integrationId:"copilot-directory"});if(!m.ok)throw Error("Something went wrong");let p=await m.json();return p.choices[0]?.message?.content}catch{throw Error("Something went wrong")}},[]);return(0,w.useEffect)(()=>{r?.length||d().then(t=>{e(!1),i(JSON.parse(t)?.collaborators)},()=>{e(!1)})},[]),{collaborators:r,getCollaborators:d}})(a);T[8]!==$?(m=()=>{$&&(window.location.href=$)},T[8]=$,T[9]=m):m=T[9];let U=m,V="chat"===A?"page":void 0;T[10]!==R?(p=()=>R("chat"),T[10]=R,T[11]=p):p=T[11],T[12]!==V||T[13]!==p?(h=(0,r.jsx)(c.O.Item,{"aria-current":V,onSelect:p,children:"Chat"}),T[12]=V,T[13]=p,T[14]=h):h=T[14];let W="directory"===A?"page":void 0;T[15]!==z?.length||T[16]!==O||T[17]!==R?(g=()=>{!O&&z?.length&&R("directory")},T[15]=z?.length,T[16]=O,T[17]=R,T[18]=g):g=T[18],T[19]!==z?.length?(f=z?.length?{}:{className:S.muted},T[19]=z?.length,T[20]=f):f=T[20];let H=z?.length||O?"Directory":"Directory unavailable";return T[21]!==f||T[22]!==H?(y=(0,r.jsx)("span",{...f,children:H}),T[21]=f,T[22]=H,T[23]=y):y=T[23],T[24]!==O?(x=O&&(0,r.jsx)("div",{className:S["spinner-container"],children:(0,r.jsx)(d.A,{size:"small"})}),T[24]=O,T[25]=x):x=T[25],T[26]!==y||T[27]!==x?(v=(0,r.jsxs)("div",{className:S["tab-container"],children:[y,x]}),T[26]=y,T[27]=x,T[28]=v):v=T[28],T[29]!==g||T[30]!==v||T[31]!==W?(C=(0,r.jsx)(c.O.Item,{"aria-current":W,onSelect:g,children:v}),T[29]=g,T[30]=v,T[31]=W,T[32]=C):C=T[32],T[33]!==C||T[34]!==h?(N=(0,r.jsxs)(c.O,{"aria-label":"Repository",children:[h,C]}),T[33]=C,T[34]=h,T[35]=N):N=T[35],T[36]!==z||T[37]!==A||T[38]!==$||T[39]!==U?(I="directory"===A&&(0,r.jsxs)("div",{className:S["metadata-container"],children:[(0,r.jsx)("div",{children:(0,r.jsx)(_,{contacts:z})}),$&&(0,r.jsx)("div",{className:S["referrer-button"],children:(0,r.jsx)(u.Q,{variant:"link",leadingVisual:l.ArrowLeftIcon,onClick:U,children:`Return to Issue${B?` ${B}`:""}`})})]}),T[36]=z,T[37]=A,T[38]=$,T[39]=U,T[40]=I):I=T[40],T[41]!==N||T[42]!==I?(E=(0,r.jsxs)("div",{children:[N,I]}),T[41]=N,T[42]=I,T[43]=E):E=T[43],E};try{N.displayName||(N.displayName="CopilotMetadata")}catch{}var I=n(69599),E=n(53627),T=n(53419),A=n(88431),R=n(10095),k=n(87448),L=n(34164),P=n(87419),M=n(88392),O=n(25641),F=n(73952),D=n(51213),B=n(35247),$=n(2635),z=n(33592),U=n(72303),V=n(46062),W=n(68637),H=n(97315);let q={legalText:"Chat-module__legalText--nFibb",ChatMainContainer:"Chat-module__ChatMainContainer--r_Lbb",messagesContainer:"Chat-module__messagesContainer--pUaGC",loadingStateContainer:"Chat-module__loadingStateContainer--jXyyu",loadingText:"Chat-module__loadingText--XRJo1",errorContainer:"Chat-module__errorContainer--Ci2Ci",suggestedPromptsGrid:"Chat-module__suggestedPromptsGrid--DPria",chatInputContainer:"Chat-module__chatInputContainer--yKT4X",suggestedPromptButton:"Chat-module__suggestedPromptButton--VrQUl",promptHeading:"Chat-module__promptHeading--CccY2",promptDescription:"Chat-module__promptDescription--gkjS8"};var K=n(70257),G=n(30558),Q=n(63262),J=n(7104),Y=n(32744),Z=n(5524);let X={suggestionListHeading:"CopilotSuggestions-module__suggestionListHeading--W7rpU",suggestionItem:"CopilotSuggestions-module__suggestionItem--hVOB9",suggestionsList:"CopilotSuggestions-module__suggestionsList--vzbN1"},ee=e=>{let t,n,a,s=(0,i.c)(10),{suggestionKind:o}=e,c=(0,$.Pk)(),d=(0,z.b)();s[0]!==d||s[1]!==c?(t=e=>{d.sendChatMessage({thread:(0,U.W)(c),content:e.prompt??e.question,intent:e.intent,modeOverride:e.mode,references:c.currentReferences,topic:c.currentTopic,context:c.context}),(0,T.BI)("copilot_generated_suggestion_click",{intent:e.intent,mode:e.mode,contextType:c.context?.[0]?.type,content:e.question})},s[0]=d,s[1]=c,s[2]=t):t=s[2];let u=t;s[3]!==u?(n=(0,w.memo)(function(e){let{suggestion:t}=e;return(0,r.jsxs)(Z.l.Item,{onSelect:()=>u(t),className:X.suggestionItem,children:[(0,r.jsx)(Z.l.LeadingVisual,{children:(0,r.jsx)(R.A,{icon:l.PaperAirplaneIcon})}),(0,r.jsxs)("span",{children:[" ",t.question]})]})}),s[3]=u,s[4]=n):n=s[4];let m=n,p="loading"===c.messagesLoading.state||!!c.streamingMessage,{suggestions:h}=c,g=c.currentReferences[0],f=1===c.currentReferences.length&&g?.type==="repository"&&g.id===c.currentRepository?.id,y=!!(!p&&f);return s[5]!==m||s[6]!==y||s[7]!==o||s[8]!==h?(a=y&&h&&h.suggestions?(0,r.jsxs)(Z.l,{className:(0,L.$)("copilot-suggestions",X.suggestionsList),children:["initial"===o&&(0,r.jsx)(Z.l.Heading,{as:"h2",className:X.suggestionListHeading,children:function(e){return e?`Ask about the ${e.replace(/-/g," ")}:`:"Ask anything:"}(h.referenceType)}),h?.suggestions.map(e=>(0,r.jsx)(m,{suggestion:e},e.question))]}):null,s[5]=m,s[6]=y,s[7]=o,s[8]=h,s[9]=a):a=s[9],a},et=(0,w.memo)(ee);try{ee.displayName||(ee.displayName="CopilotSuggestions")}catch{}try{(a=CopilotSuggestion).displayName||(a.displayName="CopilotSuggestion")}catch{}var en=n(93412),ea=n(35673),er=n(79184),ei=n(74753),es=n(73077),eo=n(26108);let el={container:"CustomBanner-module__container--QLdBn",expanded:"CustomBanner-module__expanded--NUbF0",actions:"CustomBanner-module__actions--zeIqy",iconButton:"CustomBanner-module__iconButton--BUeu0",content:"CustomBanner-module__content--szVMr",icon:"CustomBanner-module__icon--_7NPB"};function ec(e){let t,n,a,s,o,c,d,u=(0,i.c)(16),{icon:m,content:p,actions:h,onDismiss:g}=e,f=(0,w.useRef)(null),[y,x]=(0,w.useState)(!1);u[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>{let e=f.current;if(!e)return;let t=new ResizeObserver(t=>{for(let n of t)n.target===e&&(n.contentRect.height>40?x(!0):x(!1))});return t.observe(e),()=>{t.disconnect()}},n=[],u[0]=t,u[1]=n):(t=u[0],n=u[1]),(0,w.useEffect)(t,n);let v=`${el.container} ${y?el.expanded:""}`;return u[2]!==m?(a=(0,r.jsx)("div",{className:el.icon,children:m}),u[2]=m,u[3]=a):a=u[3],u[4]!==p?(s=(0,r.jsx)("div",{className:el.content,children:p}),u[4]=p,u[5]=s):s=u[5],u[6]!==g?(o=g&&(0,r.jsx)(eo.K,{className:el.iconButton,variant:"invisible",icon:l.XIcon,size:"medium","aria-label":"Close",onClick:g}),u[6]=g,u[7]=o):o=u[7],u[8]!==h||u[9]!==o?(c=(0,r.jsxs)("div",{className:el.actions,children:[h,o]}),u[8]=h,u[9]=o,u[10]=c):c=u[10],u[11]!==v||u[12]!==a||u[13]!==s||u[14]!==c?(d=(0,r.jsxs)("div",{ref:f,className:v,children:[a,s,c]}),u[11]=v,u[12]=a,u[13]=s,u[14]=c,u[15]=d):d=u[15],d}try{ec.displayName||(ec.displayName="CustomBanner")}catch{}function ed(){let e,t,n,a,s,o=(0,i.c)(7),{resetDate:c}=(0,er.xR)();o[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)(l.InfoIcon,{}),o[0]=e):e=o[0];let d=e;o[1]===Symbol.for("react.memo_cache_sentinel")?(t=(0,r.jsx)(ei.s,{children:(0,r.jsx)("h2",{children:"Usage limit reached"})}),o[1]=t):t=o[1],o[2]!==c?(n=(0,r.jsxs)(r.Fragment,{children:[t,"You have reached your free plan limit. It will reset on ",c]}),o[2]=c,o[3]=n):n=o[3];let u=n;o[4]===Symbol.for("react.memo_cache_sentinel")?(a=(0,r.jsx)(es.z,{as:"a",href:"https://github.com/features/copilot#pricing",onClick:eu,children:"Upgrade"}),o[4]=a):a=o[4];let m=a;return o[5]!==u?(s=(0,r.jsx)(ec,{icon:d,content:u,actions:m}),o[5]=u,o[6]=s):s=o[6],s}function eu(){(0,T.BI)("dotcom_chat.activate",{target:"QUOTA_EXCEEDED_BANNER_LINK_UPGRADE",mode:"assistive"})}try{ed.displayName||(ed.displayName="QuotaExceededBanner")}catch{}var em=n(74807),ep=n(57352);let eh={container:"QuotaExceededEmptyState-module__container--UBt9E",main:"QuotaExceededEmptyState-module__main--rwRZl",copy:"QuotaExceededEmptyState-module__copy--Ul81N",heading:"QuotaExceededEmptyState-module__heading--jMYRX",description:"QuotaExceededEmptyState-module__description--SvMpU",footer:"QuotaExceededEmptyState-module__footer--lM9PT"};function eg(){let e,t,n,a,s,o,l,c,d,u,m,p,h=(0,i.c)(19),{resetDate:g}=(0,er.xR)(),[f,y]=(0,w.useState)(!1),[x,v]=(0,w.useState)(!1);h[0]===Symbol.for("react.memo_cache_sentinel")?(e=()=>{y(!0),v(!0)},h[0]=e):e=h[0];let _=e;h[1]===Symbol.for("react.memo_cache_sentinel")?(t=()=>{y(!1)},h[1]=t):t=h[1];let C=t;h[2]===Symbol.for("react.memo_cache_sentinel")?(n=()=>{v(!1)},h[2]=n):n=h[2];let S=n,j=f||x;return h[3]!==f||h[4]!==j?(a=j?(0,r.jsx)(em.N,{animationType:"jumpWiggle",loopAnimation:f,size:80,onAnimationEnd:S}):(0,r.jsx)(em.N,{animationType:"static",loopAnimation:!1,size:80}),h[3]=f,h[4]=j,h[5]=a):a=h[5],h[6]===Symbol.for("react.memo_cache_sentinel")?(s=(0,r.jsx)("h2",{className:eh.heading,children:"You\u2019ve reached your free plan limit"}),h[6]=s):s=h[6],h[7]!==g?(o=(0,r.jsxs)("p",{className:eh.description,children:["Your limits will reset on ",g,"."]}),h[7]=g,h[8]=o):o=h[8],h[9]===Symbol.for("react.memo_cache_sentinel")?(l=(0,r.jsx)(es.z,{as:"a",variant:"primary",href:"https://github.com/github-copilot/pro",onMouseEnter:_,onMouseLeave:C,onClick:ef,children:"Upgrade"}),h[9]=l):l=h[9],h[10]!==o?(c=(0,r.jsxs)("div",{className:eh.copy,children:[s,o,l]}),h[10]=o,h[11]=c):c=h[11],h[12]!==a||h[13]!==c?(d=(0,r.jsxs)("div",{className:eh.main,children:[a,c]}),h[12]=a,h[13]=c,h[14]=d):d=h[14],h[15]===Symbol.for("react.memo_cache_sentinel")?(u=(0,r.jsx)("strong",{children:"Part of an organization?"}),h[15]=u):u=h[15],h[16]===Symbol.for("react.memo_cache_sentinel")?(m=(0,r.jsxs)("div",{className:eh.footer,children:[u,(0,r.jsxs)("span",{children:["Upgrade to"," ",(0,r.jsx)(ep.A,{href:"https://github.com/github-copilot/business_signup/choose_business_type?cft=copilot_li.features_copilot.cfb",inline:!0,children:"Copilot Business"})," ","to enable across teams."]})]}),h[16]=m):m=h[16],h[17]!==d?(p=(0,r.jsxs)("div",{className:eh.container,children:[d,m]}),h[17]=d,h[18]=p):p=h[18],p}function ef(){(0,T.BI)("dotcom_chat.activate",{target:"QUOTA_EXCEEDED_EMPTY_STATE_LINK_UPGRADE",mode:"assistive"})}try{eg.displayName||(eg.displayName="QuotaExceededEmptyState")}catch{}var ey=n(79064);let ex={container:"QuotaMeterBanner-module__container--BWRlc"};function ev(){let e,t,n,a,s,o,c,d=(0,i.c)(9),{isLicensedLimited:u,chatQuotaRemaining:m}=(0,er.xR)(),[p,h]=(0,w.useState)(eC);d[0]!==m||d[1]!==u?(e=()=>{if(u&&void 0!==m){let e=ey.Jt.getMeterBannerFlag();m>0&&m<=10?null===e?(ey.Jt.setMeterBannerFlag(!0),h(!0)):h(e):(ey.Jt.removeMeterBannerFlag(),h(!1))}},t=[u,m],d[0]=m,d[1]=u,d[2]=e,d[3]=t):(e=d[2],t=d[3]),(0,w.useEffect)(e,t),d[4]===Symbol.for("react.memo_cache_sentinel")?(n=()=>{ey.Jt.setMeterBannerFlag(!1),h(!1)},d[4]=n):n=d[4];let g=n;if(!p||void 0===m)return null;d[5]===Symbol.for("react.memo_cache_sentinel")?(a=(0,r.jsx)(l.InfoIcon,{}),d[5]=a):a=d[5];let f=a;d[6]===Symbol.for("react.memo_cache_sentinel")?(s=(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(ei.s,{children:(0,r.jsx)("h2",{children:"Usage limit approaching"})}),"You only have a few free responses remaining."]}),d[6]=s):s=d[6];let y=s;d[7]===Symbol.for("react.memo_cache_sentinel")?(o=(0,r.jsx)(es.z,{as:"a",href:"https://github.com/features/copilot#pricing",onClick:e_,children:"Upgrade"}),d[7]=o):o=d[7];let x=o;return d[8]===Symbol.for("react.memo_cache_sentinel")?(c=(0,r.jsx)("div",{className:ex.container,children:(0,r.jsx)(ec,{icon:f,content:y,actions:x,onDismiss:g})}),d[8]=c):c=d[8],c}function e_(){(0,T.BI)("dotcom_chat.activate",{target:"QUOTA_METER_BANNER_LINK_UPGRADE",mode:"assistive"})}function eC(){return ey.Jt.getMeterBannerFlag()??!1}try{ev.displayName||(ev.displayName="QuotaMeterBanner")}catch{}var eS=n(33544);let ej={iconContainer:"ChatWithCopilotHeader-module__iconContainer--XyD0H",headerTitle:"ChatWithCopilotHeader-module__headerTitle--ovUdi",descriptionText:"ChatWithCopilotHeader-module__descriptionText--bb_1f"};var eb=n(78328);function ew(e){let t,n,a,s=(0,i.c)(4),{mode:o}=e;s[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,r.jsx)("div",{className:ej.iconContainer,children:(0,r.jsx)(eb.A,{})}),n=(0,r.jsx)(p.A,{as:"h1",className:ej.headerTitle,children:"Ask Copilot"}),s[0]=t,s[1]=n):(t=s[0],n=s[1]);let l="immersive"===o?5:3;return s[2]!==l?(a=(0,r.jsxs)(r.Fragment,{children:[t,n,(0,r.jsx)(k.EY,{as:"p",sx:{mb:l},className:ej.descriptionText,children:"Select a repository to get started. Ask questions about your codebase to get answers fast and learn your way around."})]}),s[2]=l,s[3]=a):a=s[3],a}try{ew.displayName||(ew.displayName="ChatWithCopilotHeader")}catch{}function eN(e){let t,n=(0,i.c)(4),{docset:a,size:s}=e,o="organization"===a.ownerType;return n[0]!==a.avatarUrl||n[1]!==s||n[2]!==o?(t=(0,r.jsx)(m.r,{src:a.avatarUrl,square:o,size:s}),n[0]=a.avatarUrl,n[1]=s,n[2]=o,n[3]=t):t=n[3],t}try{eN.displayName||(eN.displayName="KnowledgeBaseAvatar")}catch{}var eI=n(70170),eE=n(99511),eT=n(26408),eA=n(26239),eR=n(27844);let ek={TopicListContainer:"TopicList-module__TopicListContainer--q95Ja",searchInputContainer:"TopicList-module__searchInputContainer--MpQGB",TextInput:"TopicList-module__TextInput--tm_7r",loadingContainer:"TopicList-module__loadingContainer--gQUvo",mutedLeadingVisual:"TopicList-module__mutedLeadingVisual--zyTv5",ActionList_Divider:"TopicList-module__ActionList_Divider--tKVd_",generalPurposeItem:"TopicList-module__generalPurposeItem--UKLE6"};function eL(){let e,t,n,a,s,o,c,u,m,p,h,g=(0,i.c)(23),f=(0,z.b)(),{mode:y,selectedThreadID:x}=(0,$.Pk)(),[v,_]=(0,w.useState)("");g[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,eI.s)(e=>_(e),400,{start:!1}),g[0]=e):e=g[0];let C=e,{repositories:S,loading:j,resetTopRepoResults:b}=(0,eT.U)(v,!0,4);g[1]!==f||g[2]!==y||g[3]!==b||g[4]!==x?(t=async e=>{if(b(),void 0===e){f.showTopicPicker(!1),f.clearCurrentTopic(),f.clearCurrentReferences(),"immersive"===y&&(0,E.kd)("/copilot"),x&&ey.Jt.setSelectedTopic(x,null);return}await f.fetchCurrentRepo(Number(e)),f.showTopicPicker(!1)},g[1]=f,g[2]=y,g[3]=b,g[4]=x,g[5]=t):t=g[5];let N=t;e:{if(j){n="Loading repositories";break e}if(0===S.length){n="No repositories found";break e}if(1===S.length){n="1 repository found";break e}n=`${S.length} repositories found`}let I=n;return g[6]===Symbol.for("react.memo_cache_sentinel")?(a=(0,r.jsx)("div",{className:ek.searchInputContainer,children:(0,r.jsx)(eE.A,{id:eA.uN,leadingVisual:l.SearchIcon,name:"topic-search","aria-label":"Search repositories to chat about",placeholder:"Search repositories to chat about",onChange:e=>C(e.target.value),className:ek.TextInput})}),g[6]=a):a=g[6],g[7]!==I?(s=(0,r.jsx)("div",{role:"status",className:"sr-only",children:I}),g[7]=I,g[8]=s):s=g[8],g[9]!==N||g[10]!==j||g[11]!==S?(o=j?(0,r.jsx)("li",{className:ek.loadingContainer,children:(0,r.jsx)(d.A,{})}):0===S.length?(0,r.jsxs)(Z.l.Item,{disabled:!0,children:[(0,r.jsx)(Z.l.LeadingVisual,{className:ek.mutedLeadingVisual,children:(0,r.jsx)(l.CircleSlashIcon,{})}),(0,r.jsx)("span",{className:ek.mutedLeadingVisual,children:"No results found"})]}):(0,r.jsx)(r.Fragment,{children:S.length>0&&(0,r.jsxs)(Z.l.Group,{children:[(0,r.jsx)(Z.l.GroupHeading,{as:"h3",children:"Recent repositories"}),S.map(e=>(0,r.jsx)(eR.W,{repo:e,onSelect:N,trailingVisualComponent:(0,r.jsx)(l.ArrowRightIcon,{})},e.nwo))]})}),g[9]=N,g[10]=j,g[11]=S,g[12]=o):o=g[12],g[13]===Symbol.for("react.memo_cache_sentinel")?(c=(0,r.jsx)(Z.l.Divider,{className:ek.ActionList_Divider}),g[13]=c):c=g[13],g[14]!==N?(u=()=>N(void 0),g[14]=N,g[15]=u):u=g[15],g[16]===Symbol.for("react.memo_cache_sentinel")?(m=(0,r.jsx)(Z.l.TrailingVisual,{children:(0,r.jsx)(l.ArrowRightIcon,{})}),g[16]=m):m=g[16],g[17]!==u?(p=(0,r.jsxs)(Z.l.Item,{id:"chat-with-no-context",onSelect:u,className:ek.generalPurposeItem,children:["General purpose chat",m]},"chat-with-no-context"),g[17]=u,g[18]=p):p=g[18],g[19]!==s||g[20]!==o||g[21]!==p?(h=(0,r.jsxs)("div",{className:ek.TopicListContainer,children:[a,(0,r.jsxs)(Z.l,{children:[s,o,c,p]})]}),g[19]=s,g[20]=o,g[21]=p,g[22]=h):h=g[22],h}try{eL.displayName||(eL.displayName="TopicList")}catch{}let eP={TopicPickerContainer:"TopicPicker-module__TopicPickerContainer--jqRrB",mainContentContainer:"TopicPicker-module__mainContentContainer--EAEDK",topicListContainer:"TopicPicker-module__topicListContainer--q3K2a",SingleSignOnBanner:"TopicPicker-module__SingleSignOnBanner--WOn5V",topicDescriptionContainer:"TopicPicker-module__topicDescriptionContainer--CGD3V",docsetDescriptionCard:"TopicPicker-module__docsetDescriptionCard--IYOzX",docsetHeaderContainer:"TopicPicker-module__docsetHeaderContainer--E0Vtq",Heading:"TopicPicker-module__Heading--m61pA",statusText:"TopicPicker-module__statusText--EdXY0",repositoriesSubheading:"TopicPicker-module__repositoriesSubheading--ihIfq",repositoriesContainer:"TopicPicker-module__repositoriesContainer--x7mXz",repositoryItem:"TopicPicker-module__repositoryItem--hnv1a"},eM=()=>{let e,t,n,a,s,o,l=(0,i.c)(14),c=(0,$.Pk)();e:{let t;if(!c.ssoOrganizations){let t;l[0]===Symbol.for("react.memo_cache_sentinel")?(t=[],l[0]=t):t=l[0],e=t;break e}l[1]!==c.ssoOrganizations?(t=c.ssoOrganizations.map(eB),l[1]=c.ssoOrganizations,l[2]=t):t=l[2],e=t}let d=e;return l[3]!==c.mode?(t=(0,r.jsx)(ew,{mode:c.mode}),l[3]=c.mode,l[4]=t):t=l[4],l[5]===Symbol.for("react.memo_cache_sentinel")?(n=(0,r.jsx)("div",{className:eP.topicListContainer,children:(0,r.jsx)(eL,{})}),l[5]=n):n=l[5],l[6]!==d?(a=!(0,I.G7)("global_sso_banner")&&(0,r.jsx)(eS.x,{portalContainerName:ea.E5,protectedOrgs:d,redirectURI:e$,className:eP.SingleSignOnBanner}),l[6]=d,l[7]=a):a=l[7],l[8]!==c.currentTopic?(s=(0,r.jsx)(eO,{currentTopic:c.currentTopic}),l[8]=c.currentTopic,l[9]=s):s=l[9],l[10]!==t||l[11]!==a||l[12]!==s?(o=(0,r.jsx)("div",{className:eP.TopicPickerContainer,children:(0,r.jsxs)("div",{className:eP.mainContentContainer,children:[t,n,a,s]})}),l[10]=t,l[11]=a,l[12]=s,l[13]=o):o=l[13],o};function eO(e){let t,n=(0,i.c)(2),{currentTopic:a}=e;return(0,O.P)(a)?(n[0]!==a?(t=(0,r.jsx)("div",{className:eP.topicDescriptionContainer,children:(0,r.jsx)(eF,{docset:a})}),n[0]=a,n[1]=t):t=n[1],t):null}function eF(e){let t,n,a,s,o,l,c,d,u=(0,i.c)(16),{docset:m}=e;return u[0]!==m?(t=(0,r.jsx)(eN,{docset:m,size:24}),u[0]=m,u[1]=t):t=u[1],u[2]!==m.name?(n=(0,r.jsx)(p.A,{as:"h3",className:eP.Heading,children:m.name}),u[2]=m.name,u[3]=n):n=u[3],u[4]===Symbol.for("react.memo_cache_sentinel")?(a=(0,r.jsx)("span",{className:eP.statusText,children:"Knowledge base added to conversation"}),u[4]=a):a=u[4],u[5]!==t||u[6]!==n?(s=(0,r.jsxs)("div",{className:eP.docsetHeaderContainer,children:[t,n," ",a]}),u[5]=t,u[6]=n,u[7]=s):s=u[7],u[8]===Symbol.for("react.memo_cache_sentinel")?(o=(0,r.jsx)(p.A,{as:"h4",className:eP.repositoriesSubheading,children:"Repositories in this knowledge base"}),u[8]=o):o=u[8],u[9]!==m.repos?(l=m.repos.map(eD),u[9]=m.repos,u[10]=l):l=u[10],u[11]!==l?(c=(0,r.jsx)("div",{className:eP.repositoriesContainer,children:l}),u[11]=l,u[12]=c):c=u[12],u[13]!==s||u[14]!==c?(d=(0,r.jsxs)("div",{className:eP.docsetDescriptionCard,children:[s,o,c]}),u[13]=s,u[14]=c,u[15]=d):d=u[15],d}function eD(e){return(0,r.jsxs)("div",{className:eP.repositoryItem,children:[(0,r.jsx)(l.RepoIcon,{}),` ${e}`]},e)}try{eM.displayName||(eM.displayName="TopicPicker")}catch{}try{eO.displayName||(eO.displayName="TopicDescription")}catch{}try{eF.displayName||(eF.displayName="DocsetDescription")}catch{}function eB(e){return e.login}function e$(){return`/search/refresh_blackbird_caches?return_to=${location.href}`}let ez=({disableTopicPicker:e,inputRef:t,showQuotaExceededEmptyState:n})=>{let a=(0,$.Pk)(),{isWaitingOnCopilot:i,showTopicPicker:s,streamingMessage:o}=a,{scrollToBottom:l}=(0,J.b)(),{messages:c,groupedMessages:d}=(0,M.a)(a);return(0,A.N)(()=>l("instant"),[l]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("h2",{className:"sr-only",children:"Copilot Chat"}),n?(0,r.jsx)(eg,{}):s&&!e?(0,r.jsx)(eM,{}):(0,r.jsx)("div",{className:q.ChatMainContainer,children:(0,r.jsxs)("div",{className:(0,L.$)("copilot-messages-container",q.messagesContainer),children:[0===c.length&&(0,r.jsx)("p",{className:q.legalText,children:(0,r.jsx)(en.h,{})}),d.map((e,n)=>(0,r.jsx)(Q.i,{isLastGroup:n===d.length-1,children:e.map((s,l)=>{let u=n===d.length-1&&l===e.length-1;return(s===o||s.id===D.Wp||!eU(s)||!B.W.dotcomChatClientSideSkills||s.error||eV(s,u,a))&&(0,r.jsx)(G.c,{isLatestMessage:u,isFirstReply:1===c.length,isStreaming:s.id===o?.id||u&&i,message:s,inputRef:t},l)})},n)),a.clientSkillConfirmation&&B.W.dotcomChatClientSideSkills&&(0,r.jsx)("div",{className:"m-3",children:(0,r.jsx)(Y.m,{confirmation:a.clientSkillConfirmation,handleConfirmation:e=>a.clientSkillConfirmation?.onSubmit?.("accepted"===e.state),isLatestMessage:!0})})]})})]})},eU=e=>!e.content&&(!e.confirmations||0===e.confirmations.length)&&(!e.clientConfirmations||0===e.clientConfirmations.length),eV=(e,t,n)=>(e=>e.clientSkillsRequests&&e.clientSkillsRequests.length>0||e.clientToolResults&&e.clientToolResults.length>0)(e)&&t&&!n.streamingMessage&&!n.clientSkillConfirmation,eW=()=>(0,r.jsxs)("div",{className:q.loadingStateContainer,children:[(0,r.jsx)(d.A,{size:"large"}),(0,r.jsx)("div",{className:q.loadingText,children:"Loading conversation\u2026"})]}),eH=()=>{let{mode:e,reviewLab:t}=(0,$.Pk)();return(0,r.jsxs)(k.az,{sx:{pl:"immersive"===e?3:2},className:q.errorContainer,children:[(0,r.jsx)(R.A,{icon:l.AlertIcon}),"Failed to load previous messages.",t&&(0,r.jsx)(r.Fragment,{children:"\xa0You are in a review lab. Please check that you are connected to the Developer VPN."})]})},eq=({inputRef:e})=>{let t=(0,$.Pk)(),n=(0,z.b)(),{currentReferences:a,messagesLoading:i,messagesRestored:s,threadsLoading:o,currentTopic:c,messages:d,mode:u,selectedThreadID:m,showTopicPicker:p,context:h}=t,g=(0,U.W)(t),f=(0,w.useMemo)(()=>(0,O.k4)(Object.keys(W.Pe)).slice(0,4).map(e=>({heading:e,content:(0,O.k4)(W.Pe[e])[0]})),[]),{textAreaRef:y}=(0,P.Y)(e),{chatQuotaExceeded:x,isLicensedLimited:v,reloadQuota:_}=(0,er.xR)(),{ambientError:C}=(0,$.Pk)(),[S,j]=(0,w.useState)(!0),[b,A]=(0,w.useState)("chat"),R=(0,I.G7)("copilot_metadata_poc"),k=!!h&&h[0]&&("file"===h[0].type||"file-v2"===h[0].type),M=(0,V.GF)(t.availableModels);(0,w.useEffect)(()=>{if(!m||"assistive"===u)return;let e=`${O.Jz}/c/${m}`;window.location.pathname!==e&&0!==d.length&&(0,E.kd)(e)},[m,u,d.length]);let D=(0,w.useCallback)(async e=>{""!==e.trim()&&(_("user_submit"),await n.sendChatMessage({thread:g,content:e,references:a,topic:c,context:h,customInstructions:t.customInstructions,skillOptions:t.skillOptions,model:M}))},[_,n,g,a,c,h,t.customInstructions,t.skillOptions,M]),B=s&&d.length>0,G="loading"===i.state&&t.selectedThreadID&&!p&&!B,Q="error"===i.state||"error"===o.state,Y="loaded"===i.state||B,Z=x&&(p||!g),[X]=(0,w.useState)(t.renderAttachKnowledgeBaseHerePopover),ee=(0,F.B)(d),en=!!(!G&&!t.currentTopic&&!p&&0===ee.length&&!X&&0===a.length);return(0,r.jsxs)(r.Fragment,{children:[R&&k&&(0,r.jsx)(N,{fileContext:h[0],loading:S,setLoading:j,currentTab:b,setCurrentTab:A,makeCAPIRequest:O.p}),(!R||!!R&&"chat"===b)&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(J.$,{className:"copilot-chat-messages",style:{flex:"1 1 auto"},children:[G&&(0,r.jsx)(eW,{}),Q&&(0,r.jsx)(eH,{}),Y&&!G&&(0,r.jsx)(ez,{inputRef:y,showQuotaExceededEmptyState:Z}),(0,r.jsx)(ea.Cb,{})]}),en&&(0,r.jsx)("div",{className:(0,L.$)("copilot-chat-messages",q.suggestedPromptsGrid),children:f.map((e,a)=>(0,r.jsx)(eK,{heading:e.heading,content:e.content,onSubmit:()=>{n.sendChatMessage({thread:(0,U.W)(t),content:e.content,references:t.currentReferences,topic:t.currentTopic,context:t.context}),(0,T.BI)("copilot_chat_suggestion_click",{topic:t.currentTopic?.name})}},a))}),!G&&!p&&!Z&&(0,r.jsx)("div",{className:(0,L.$)("copilot-chat-input copilot-chat-input-outer",q.chatInputContainer),children:x?(0,r.jsx)(ed,{}):(0,r.jsxs)(r.Fragment,{children:[!en&&0===ee.length&&!t.showTopicPicker&&(0,r.jsx)(et,{suggestionKind:"initial"}),(0,r.jsxs)("div",{children:[v&&(0,r.jsx)(ev,{}),C&&(0,r.jsx)(H.P,{ambientError:C}),(0,r.jsx)(K.V,{modes:[{name:"Chat",supportsMCP:!0,supportsAttachments:!0,supportsModelSwitching:!0,supportsSpaces:!0,supportsAutocompletion:!0,icon:(0,r.jsx)(l.CommentIcon,{})}],textAreaRef:y,onSubmit:D,isStreaming:!!t.streamingMessage,size:"small"},m)]})]})})]}),(0,r.jsx)(ea.zc,{})]})};function eK({heading:e,content:t,onSubmit:n}){return(0,r.jsxs)(u.Q,{onClick:n,className:q.suggestedPromptButton,children:[(0,r.jsx)(p.A,{as:"h3",className:q.promptHeading,children:e}),(0,r.jsx)("p",{className:q.promptDescription,children:t})]})}try{ez.displayName||(ez.displayName="Messages")}catch{}try{eW.displayName||(eW.displayName="Loading")}catch{}try{eH.displayName||(eH.displayName="Error")}catch{}try{eq.displayName||(eq.displayName="Chat")}catch{}try{eK.displayName||(eK.displayName="SuggestedPrompt")}catch{}},14521:(e,t,n)=>{n.d(t,{G:()=>c});var a=n(21728),r=n(79802),i=n(96540),s=n(2635),o=n(23657),l=n(72303);function c(){let e,t=(0,a.c)(1),n=(0,i.useRef)(null);t[0]===Symbol.for("react.memo_cache_sentinel")?(e=e=>{let t=(0,l.W)(e),a=(0,r.O)(t);return(0,o.Ym)(n.current,a)?n.current:(n.current=a,a)},t[0]=e):e=t[0];let c=(0,s.pn)(e);return(0,o.iI)()||c}},15033:(e,t,n)=>{n.d(t,{D:()=>N});var a=n(74848),r=n(23657),i=n(84646),s=n(96459),o=n(24990),l=n(15220),c=n(46251),d=n(86877),u=n(99511),m=n(96540),p=n(51563),h=n(77430),g=n(96379),f=n(26607),y=n(27042),x=n(5524);let v={ownerDropdownOverlay:"SpacesOwnerDropdown-module__ownerDropdownOverlay--bEFXy",ownerListGroup:"SpacesOwnerDropdown-module__ownerListGroup--U2Z7L",errorListItem:"SpacesOwnerDropdown-module__errorListItem--eq64y"};var _=n(29731);function C({onSelect:e}){let[t,n]=(0,m.useState)([]),[r,i]=(0,m.useState)(!1),[s,o]=(0,m.useState)(void 0),l=(0,m.useCallback)(t=>{o(t),e(t)},[e]),c=(0,m.useCallback)(()=>{n([]),i(!0)},[]);return(0,m.useEffect)(()=>{(async()=>{try{let e=await (0,g.lS)("/github-copilot/chat/custom_copilots_owners"),t=await e.json(),a=t?.owners;if(!e.ok||!a)return void c();n(a),a[0]&&l(a[0])}catch{c()}})()},[c,l]),(0,a.jsx)("div",{children:(0,a.jsxs)(d.A,{children:[(0,a.jsx)(d.A.Label,{required:!0,children:"Owner"}),(0,a.jsxs)(y.W,{children:[(()=>{let e=s?.name||"Choose an owner",t=s?(0,a.jsx)(h.r,{src:s.avatarUrl},s.avatarUrl):void 0;return(0,a.jsx)(y.W.Button,{"data-testid":"owner-dropdown-anchor",alignContent:"start","aria-label":e,leadingVisual:t,children:e})})(),(0,a.jsx)(y.W.Overlay,{responsiveVariant:"fullscreen",width:"large",maxHeight:"large",className:v.ownerDropdownOverlay,children:(0,a.jsx)(x.l,{children:(0,a.jsx)(x.l.Group,{className:v.ownerListGroup,children:(0,a.jsxs)(x.l,{selectionVariant:"single",children:[t&&t.map(e=>{let{name:t,avatarUrl:n,displayName:r}=e;return(0,a.jsxs)(x.l.Item,{selected:t===s?.name,onSelect:()=>l(e),children:[(0,a.jsx)(x.l.LeadingVisual,{children:(0,a.jsx)(h.r,{src:n})}),t,(0,a.jsx)(x.l.Description,{children:r})]},t)}),!t.length&&!r&&(0,a.jsx)(x.l.Item,{disabled:!0,children:"Fetching owners\u2026"},"fetching-owners"),r&&(0,a.jsx)(x.l.Item,{disabled:!0,className:v.errorListItem,children:"An error occurred while loading owners. Please reopen the dialog to try again."},"error-fetching-owners")]})})})})]}),(0,a.jsx)(d.A.Caption,{children:(()=>{let e=(0,a.jsx)("span",{children:(0,a.jsx)(f.A,{className:"mr-1 mt-1",children:"Private"})});return s?"User"===s.type?(0,a.jsxs)("div",{className:"d-flex flex-column",children:[(0,a.jsx)("span",{...(0,_.G)("owner-user-caption"),children:"Only you will be able to see this space."}),(0,a.jsx)("span",{children:e})]}):(0,a.jsxs)("div",{className:"d-flex flex-column flex-shrink",children:[(0,a.jsx)("span",{...(0,_.G)("owner-org-caption"),children:"Only you and org admins can see this space. You can share it with others later."}),(0,a.jsx)("span",{children:e})]}):"Where we will store your space."})()})]})})}try{C.displayName||(C.displayName="SpacesOwnerDropdown")}catch{}let S={createSpaceDialog:"CreateSpaceDialog-module__createSpaceDialog--YECfV"};var j=n(44956),b=n(53419),w=n(20263);function N({dialogTitle:e="New Space",closeDialog:t,initialSpace:n}){let h=(0,s.Z)(),g=(0,m.useRef)(null),f=(0,i.AV)(),[y,x]=(0,m.useState)(n?.name??f),[v,_]=(0,m.useState)(null),[N,I]=(0,m.useState)({}),{upsertCopilotSpace:E,isPending:T}=(0,p.$)(),A=(0,o.S)(),R=(0,m.useCallback)(e=>{let t={...N};for(let n of e)t[n]&&delete t[n];I(t)},[N]),k=(0,m.useCallback)(e=>_(e),[]);(0,m.useEffect)(()=>{(0,b.BI)("copilot_spaces.create_space_v3_dialog_opened",{})},[]),(0,m.useEffect)(()=>{n?g.current?.focus():g.current?.select()},[n]);let L=async()=>{if(T)return;let e=n?.resources?[...n.resources]:[],i=[];if(n&&v){let t=function(e,t,n){let a=[],r=[];if(!n)return{resourcesToSave:e,resourcesThatWillNotTransfer:[]};for(let n of e)"ownerId"in n&&"private"in n&&n.private&&n.ownerId!==t?r.push(n):a.push(n);return{resourcesToSave:a,resourcesThatWillNotTransfer:r}}(n.resources||[],v.id,"Organization"===v.type);e=t.resourcesToSave,i=t.resourcesThatWillNotTransfer}let s=!0;if(i.length>0){let e=new Intl.ListFormat().format(Array.from(new Set(i.map(e=>e.ownerLogin).filter(e=>void 0!==e)))),t=`Private resources owned by <strong>${e}</strong> will not be duplicated to the new space.`;s=await A({title:"Some resources will not be duplicated",content:(0,a.jsx)(w.BC,{html:t}),cancelButtonContent:"Never mind",confirmButtonContent:"Continue",confirmButtonType:"primary"})}if(s)try{let a=await E({name:y,ownerId:v?.id,ownerType:v?.type,resources:e,generalInstructions:n?.generalInstructions});I({}),t();let i=(0,r.Cb)(a);return h(i)}catch(e){I(e??{})}},P=()=>{t()};return(0,a.jsx)(l.l,{position:{narrow:"fullscreen"},title:e,onClose:t,width:"large","aria-label":e,className:S.createSpaceDialog,renderFooter:()=>(0,a.jsx)(j.m,{onCancel:P,onSave:L,isLoading:T,disabled:!v,saveButtonText:"Create Space"}),children:(0,a.jsx)("form",{onSubmit:async e=>{e.preventDefault(),e.stopPropagation(),await L()},children:(0,a.jsxs)(c.B,{children:[(0,a.jsxs)(d.A,{children:[(0,a.jsx)(d.A.Label,{required:!0,children:"Space name"}),(0,a.jsx)(u.A,{ref:g,autoFocus:!0,block:!0,"data-testid":"copilot-space-name-input",name:"copilot-space-name",value:y,onChange:e=>{x(e.target.value),R(["name","slug"])}}),(0,a.jsx)(d.A.Caption,{children:"Choose a name that describes your project or use case"}),N.name?(0,a.jsx)(d.A.Validation,{variant:"error",children:(0,a.jsxs)("span",{children:["Name ",N.name]})}):N.slug?(0,a.jsx)(d.A.Validation,{variant:"error",children:(0,a.jsx)("span",{children:r.j0})}):null]}),(0,a.jsx)(C,{onSelect:k})]})})})}try{N.displayName||(N.displayName="CreateSpaceDialog")}catch{}},15838:(e,t,n)=>{n.d(t,{Cd:()=>l,E5:()=>o,Im:()=>c,nW:()=>s});var a=n(11083),r=n(94416);let i="stats:soft-nav-duration",s={turbo:"TURBO",react:"REACT","turbo.frame":"FRAME",ui:"UI",hard:"HARD"};function o(){window.performance.clearResourceTimings(),window.performance.mark(i)}function l(e){(0,a.i)({turboFailureReason:e,turboStartUrl:(0,r.dR)(),turboEndUrl:window.location.href})}function c(){let e=function(){if(0===performance.getEntriesByName(i).length)return null;performance.measure(i,i);let e=performance.getEntriesByName(i).pop();return e?e.duration:null}();if(!e)return;let t=s[(0,r.di)()],n=Math.round(e);t===s.react&&document.dispatchEvent(new CustomEvent("staffbar-update",{detail:{duration:n}})),(0,a.i)({requestUrl:window.location.href,softNavigationTiming:{mechanism:t,destination:(0,r.fX)()||"rails",duration:n,initiator:(0,r.Pv)()||"rails"}})}},16378:(e,t,n)=>{n.d(t,{O:()=>i,_:()=>s});var a=n(47970),r=n(99054);function i(e){let t=new Set;return(0,a.YR)(e,e=>{"reference-mention"===e.type&&void 0!==e.data.mentionedReferenceId&&t.add(e.data.mentionedReferenceId)}),t}function s(e){return r.qj.test(e.split(/\s/)[0]??"")}},17485:(e,t,n)=>{n.d(t,{C:()=>s});var a=n(25536),r=n(14521),i=n(96540);function s(){let e=(0,r.G)(),{selectedCopilotSpaceId:t,setSelectedCopilotSpaceId:n,selectedThreadId:s}=(0,a.O)(),o=!!s||!!e;(0,i.useEffect)(()=>{n(e||void 0)},[e,n]);let l=t||e,c=(0,i.useCallback)(e=>{o||n({id:e.id,owner:e.owner})},[n,o]),d=(0,i.useCallback)(()=>{o||n(void 0)},[n,o]);return{activeCopilotSpaceId:l,readOnly:o,handleSpaceSelect:c,clearSpaceSelection:d}}},17925:(e,t,n)=>{n.d(t,{V:()=>i});var a=n(35247),r=n(67475);function i(e,t){if(!a.W.chatInputCommands)return null;let n=(0,r.o)(t);if(0===n.length)return null;let i=RegExp(`^\\/(${n.join("|")})(?:\\s|$)`,"i"),s=e.match(i);return s&&s[1]?s[1].toLowerCase():null}},20263:(e,t,n)=>{n.d(t,{BC:()=>l,JU:()=>d,Pk:()=>o});var a=n(74848),r=n(87448),i=n(99418),s=n(96540);let o=u(r.az),l=u(r.EY),c=(0,s.forwardRef)((e,t)=>(0,a.jsx)("div",{ref:t,...e}));c.displayName="Div";let d=u(c);function u(e){let t=(0,s.forwardRef)((t,n)=>{let{sanitizedHTML:r,props:s}=function(e){let{html:t,domPurifyConfig:n,...a}=e,r={...n,RETURN_DOM:!1,RETURN_DOM_FRAGMENT:!1};return{sanitizedHTML:i.default.sanitize(t,r),props:a}}(t);return(0,a.jsx)(e,{ref:n,...s,dangerouslySetInnerHTML:{__html:r}})});return t.displayName=`UnsafeHTML${e.displayName||e.name}`,t}try{d.displayName||(d.displayName="UnsafeHTMLDiv")}catch{}},20330:(e,t,n)=>{n.d(t,{U:()=>l});var a=n(99054),r=n(17925),i=n(25641),s=n(35247),o=n(79216);let l=function({references:e,agents:t,plugins:n}){this.parser=function(l){let c=l.split(/(\s+)/),d=[];for(let[l,u]of c.entries()){if(s.W.chatInputCommands&&0===l){let e=(0,r.V)(u,n);if(e){d.push({type:"command",value:u,data:{command:e}});continue}}let c=0===l&&a.qj.exec(u)?.groups?.slug,m=c&&t.find(e=>e.slug===c);if(m){d.push({type:"agent-mention",value:u,data:{mentionedAgent:m}});continue}let p=o.Q.parse(u),h=p&&e?.find(e=>o.Q.refersTo(p,e));if(p){d.push({type:"reference-mention",value:u,data:{mentionedReferenceId:h&&(0,i.Vb)(h),referenceMention:p}});continue}let g=d.at(-1);g?.type==="text"?g.value+=u:d.push({type:"text",value:u})}return{type:"root",children:d}}}},26408:(e,t,n)=>{n.d(t,{U:()=>d});var a=n(16654),r=n(82490),i=n(96540),s=n(18312),o=n(2635),l=n(33592),c=n(23657);function d(e,t,n,m,p=!1){let[h,g]=(0,i.useState)(),f=(0,i.useCallback)(()=>g(void 0),[]),{topRepositoriesCache:y,currentRepository:x}=(0,o.Pk)(),v=(0,l.b)(),[_,C]=(0,i.useState)([]),[S,j]=(0,i.useState)(!y&&"initial"),b=(0,i.useRef)(void 0),w=(0,s.useRelayEnvironment)(),N=m&&""!==m.trim();if(h&&!y&&!e&&!N){let e=u(h||[]),{ownerLogin:t,name:n}=x??{};x&&!e.find(e=>`${e.ownerLogin}/${e.name}`==`${t}/${n}`)&&e.splice(0,0,{databaseId:x.id,isInOrganization:"Organization"===x.ownerType,name:x.name,nwo:`${x.ownerLogin}/${x.name}`,ownerLogin:x.ownerLogin,ownerAvatarUrl:`/${x.ownerLogin}.png?s=40`}),setTimeout(()=>v.setTopRepositoryTopics(e),10),j(!1),g(void 0)}let I=(0,i.useCallback)(async()=>{try{let e=await (0,a.St)(w,{first:n,owner:N?m:void 0});g(e)}catch{}finally{j(!1)}},[N,m,w,g,n]);return((0,i.useEffect)(()=>{t&&!N&&I()},[I,N,t,m]),(0,i.useEffect)(()=>{let t=async e=>{j(!0);let{repositories:t}=await (0,a.vO)(w,{query:N?(0,c.rl)(m,e,p):(0,r.J)(e,{includeForks:p}),onStart:e=>{b.current?.unsubscribe(),b.current=e}});C(t.length?u(t):[]),j(!1)};e||N?t(e):y&&C(y)},[e,N,m,w,y,p]),(0,i.useEffect)(()=>{v.setTopRepositoryTopics(void 0)},[v,m]),!y||e||N)?{repositories:_,loading:S,resetTopRepoResults:f}:{repositories:y,loading:!1,resetTopRepoResults:f}}function u(e){return e.map(({owner:{login:e,avatarUrl:t},isInOrganization:n,name:a,databaseId:r})=>({databaseId:r??0,isInOrganization:n,name:a,nwo:`${e}/${a}`,ownerLogin:e,ownerAvatarUrl:t}))}},27844:(e,t,n)=>{n.d(t,{W:()=>o});var a=n(74848),r=n(21728),i=n(77430),s=n(5524);function o(e){let t,n,o,l,c=(0,r.c)(14),{onSelect:d,repo:u,selected:m,trailingVisualComponent:p}=e,{databaseId:h,isInOrganization:g,nwo:f,ownerAvatarUrl:y}=u;return c[0]!==h||c[1]!==d?(t=()=>d(h),c[0]=h,c[1]=d,c[2]=t):t=c[2],c[3]!==g||c[4]!==y?(n=(0,a.jsx)(s.l.LeadingVisual,{children:(0,a.jsx)(i.r,{src:y,square:g,size:16})}),c[3]=g,c[4]=y,c[5]=n):n=c[5],c[6]!==p?(o=p&&(0,a.jsx)(s.l.TrailingVisual,{children:p}),c[6]=p,c[7]=o):o=c[7],c[8]!==f||c[9]!==m||c[10]!==t||c[11]!==n||c[12]!==o?(l=(0,a.jsxs)(s.l.Item,{onSelect:t,selected:m,children:[n,f,o]},f),c[8]=f,c[9]=m,c[10]=t,c[11]=n,c[12]=o,c[13]=l):l=c[13],l}try{o.displayName||(o.displayName="RepositoryListItem")}catch{}},28600:(e,t,n)=>{n.d(t,{A:()=>o});let{getItem:a,setItem:r,removeItem:i}=(0,n(82075).A)("localStorage"),s="REACT_PROFILING_ENABLED",o={enable:()=>r(s,"true"),disable:()=>i(s),isEnabled:()=>!!a(s)}},30459:(e,t,n)=>{n.d(t,{S:()=>l,s:()=>o});var a=n(21728),r=n(96540),i=n(53419),s=n(49936);function o(){let e,t,n=(0,a.c)(6),o=(0,r.useContext)(s.I);if(!o)throw Error("useAnalytics must be used within an AnalyticsContext");let{appName:l,category:c,metadata:d}=o;n[0]!==l||n[1]!==c||n[2]!==d?(e=(e,t,n)=>{let a={react:!0,app_name:l,category:c,...d};(0,i.BI)(e,{...a,...void 0===n?{}:n,target:t})},n[0]=l,n[1]=c,n[2]=d,n[3]=e):e=n[3];let u=e;return n[4]!==u?(t={sendAnalyticsEvent:u},n[4]=u,n[5]=t):t=n[5],t}function l(){let e,t,n=(0,a.c)(4),{sendAnalyticsEvent:r}=o();n[0]!==r?(e=e=>{r("analytics.click",void 0,void 0===e?{}:e)},n[0]=r,n[1]=e):e=n[1];let i=e;return n[2]!==i?(t={sendClickAnalyticsEvent:i},n[2]=i,n[3]=t):t=n[3],t}},30558:(e,t,n)=>{n.d(t,{c:()=>k});var a=n(74848),r=n(4817),i=n(98755),s=n(77430),o=n(53419),l=n(29731),c=n(38621),d=n(87448),u=n(34164),m=n(96540),p=n(52940),h=n(25641),g=n(2635),f=n(33592),y=n(55009),x=n(77939),v=n(46665),_=n(59524),C=n(88752),S=n(32744),j=n(82178),b=n(94517),w=n(34363),N=n(11633),I=n(31958),E=n(42983),T=n(82151),A=n(45244);let R=({isLatestMessage:e,isFirstReply:t,isStreaming:n,onClickReference:R,...k})=>{let{message:L}=(0,v.V)(),P=(0,g.Pk)(),M=(0,f.b)(),{author:O,handleConfirmationAction:F,handleRetryErrorMessage:D,hasClientConfirmations:B,isAI:$,isCopilot:z,isError:U,isAgentError:V,isInterrupted:W,isUser:H,myRef:q,rendererConfig:K,renderFeedback:G,shouldShowMessageActions:Q,skillExecutionToUseForRespondingText:J,showRetryButton:Y}=(0,p.p)({excludeFeedback:k.excludeFeedback,inputRef:k.inputRef,isLatestMessage:e,isStreaming:n,excludeReferencesFromFocusZone:!0}),Z=L.clientToolResults&&L.clientToolResults.length>0,X=L.clientSkillsRequests&&L.clientSkillsRequests.length>0,ee=H&&!Z,et=n||Z||X,en=et&&e,ea=z||Z,er=(0,m.useMemo)(()=>(0,h.rT)(L.references??[]),[L.references]),ei=(0,m.useMemo)(()=>(0,h.H2)(L.references??[]),[L.references]),es=(0,m.useMemo)(()=>M.maxMessagesReached(),[M]),eo=er.filter(e=>"image"!==e.type&&"org-instructions"!==e.type),el=(0,m.useMemo)(()=>L.mediaContent?.filter(e=>e.mediaType.startsWith("image/")),[L.mediaContent]),ec=(0,m.useMemo)(()=>void 0!==el&&el.length>0,[el]),ed=(0,m.useCallback)(e=>{let t=e.target.href,n=er.find(e=>e.url===t);n&&"immersive"===P.mode&&(M.selectReference(n),e.preventDefault())},[M,er,P.mode]),eu=(0,m.useCallback)(e=>{M.setWrapCodeLines(e)},[M]);return(0,a.jsxs)("div",{className:(0,u.$)("message-container",x.A.messageContainer,ee&&x.A.user,$&&x.A.ai),ref:q,...(0,l.G)(`message-${U?"error":n?"streaming":L.id}`),children:[ee&&ec&&(0,a.jsx)("div",{children:el?.map(e=>(0,a.jsx)(y.o,{src:e?.url||"",alt:"Uploaded image",mode:P.mode},e?.url||""))}),ea||Z?(0,a.jsx)(j.W,{isLoading:et&&e,isError:U&&L.error?.type!=="agentUnauthorized",mode:P.mode,isFirstMessage:t,isLoadingSkills:(L.skillExecutions??[]).length>0&&et&&""===L.content&&e,message:L.content||"",createdAt:L.createdAt}):$?(0,a.jsx)("div",{className:x.A.avatar,children:(0,a.jsx)(s.r,{src:O.avatarURL,size:24,"aria-label":`${O.name} avatar`,alt:`${O.name} avatar`,"data-testid":"chat-message-author-avatar"})}):null,ee&&(0,a.jsx)(C.t,{size:"small",className:"mb-2",references:eo,message:L,onClickReference:R}),(0,a.jsxs)("div",{className:(0,u.$)(x.A.message,ee&&x.A.user),children:[B&&L.clientConfirmations?.length?(0,a.jsx)(d.az,{className:(0,u.$)("my-1",x.A.clientConfirmationContainer),sx:{justifyContent:ee?"flex-end":""},"data-testid":"chat-message-client-confirmations",children:(0,a.jsxs)("span",{className:x.A.confirmationStatusText,children:[(0,a.jsx)(c.CheckIcon,{})," ",L.clientConfirmations?.[0]?.userLogin||"User"," ",L.clientConfirmations?.[0]?.state," the action"]})}):null,z&&en&&!L.content&&(0,a.jsx)(A.b,{className:(0,u.$)(x.A.skillExecutionText,"mb-2 mt-1 ml-2"),children:`${(0,N.WA)(J)}...`}),(0,a.jsx)("div",{className:(0,u.$)(x.A.messageContent,!!B&&x.A.hasClientConfirmations),children:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:(0,u.$)("js-snippet-clipboard-copy-unpositioned",x.A.messageContentWrapper),children:["assistant"===L.role&&L.content&&(er?.length?(0,a.jsx)(C.s,{className:"mb-2",references:er}):null),"assistant"===L.role&&(ei.length?(0,a.jsx)(_.Q,{mcpToolResults:ei}):null),!B&&(ee?(0,a.jsx)(T.R,{}):L.content&&(0,a.jsx)(r.To,{markdown:L.content,onLinkClick:ed,chatMode:"assistive",wrapCodeLines:P.wrapCodeLines,onWrapCodeLinesChange:eu,...K})),U?(0,a.jsx)(b.K,{manager:M}):null,V&&L.agentErrors?.length?(0,a.jsx)(b.h,{errors:L.agentErrors}):null,W?(0,a.jsx)(I.h,{messageHasContent:!!L.content||!!L.skillExecutions?.length}):null,(z||(0,h.yh)(O))&&(0,h.Ye)(L.confirmations).map((t,n)=>"indexrepo"===t.confirmation.name?null:(0,a.jsx)(S.m,{confirmation:t,handleConfirmation:F,isLatestMessage:e},n))]}),!Q&&Y&&(0,a.jsx)(E.$,{handleRetryMessage:D,disabled:es}),Q&&(0,a.jsxs)(d.az,{className:(0,u.$)("message-actions",x.A.messageActionsContainer),"data-testid":"message-action-bar",sx:{position:e?void 0:"absolute",bottom:e?void 0:"-2.25rem",borderRadius:e?void 0:2,boxShadow:e?void 0:"var(--shadow-floating-small)",opacity:e?void 0:0,pointerEvents:e?void 0:"none","&::before":{content:e?void 0:'""',position:"absolute"}},children:[G&&(0,a.jsx)(w.G,{iconSize:"small"}),z&&!!L.content&&!n&&(0,a.jsx)(i.T,{textToCopy:L.content??"",ariaLabel:"Copy to clipboard",size:"small",className:"d-flex flex-items-center",onCopy:()=>{(0,o.BI)("copilot_chat.activate",{target:"CHAT_MESSAGE_COPY",mode:P.mode})}}),Y&&(0,a.jsx)(E.$,{handleRetryMessage:D,disabled:es})]})]})})]})]})},k=({message:e,...t})=>(0,a.jsx)(v.$,{message:e,children:(0,a.jsx)(R,{...t})});try{R.displayName||(R.displayName="InnerChatMessage")}catch{}try{k.displayName||(k.displayName="ChatMessage")}catch{}},31971:(e,t,n)=>{n.d(t,{M:()=>a});function a(e){switch(e.type){case"repository":return{repository_id:e.repositoryId};case"github_file":return{repository_id:e.repositoryId,file_path:e.filePath,sha:e.sha};case"free_text":return{text:e.text,name:e.name};case"github_issue":case"github_pull_request":return{repository_id:e.repositoryId,number:e.number};case"uploaded_text_file":return{name:e.name};case"media_content":return{media_type:e.mediaType,name:e.name,url:e.url,height:e.height,width:e.width};default:throw Error("Unsupported resource")}}},33544:(e,t,n)=>{n.d(t,{x:()=>g});var a=n(74848),r=n(38621),i=n(5524),s=n(57352),o=n(27042),l=n(87448),c=n(88934),d=n(96540),u=n(11083),m=n(62227),p=n(34164),h=n(69599);function g({className:e,portalContainerName:t,protectedOrgs:n,maxVisibleOrgNames:i=3,redirectURI:o,useFullWidthStyle:g,forceWrap:x,sx:v}){let _=(0,c.zy)(),C=(0,d.useRef)(!1);if((0,d.useEffect)(()=>{(0,h.G7)("record_sso_banner_metrics")&&!C.current&&n&&n.length>0&&((0,u.i)({incrementKey:(0,h.G7)("global_sso_banner")?"LEGACY_SSO_BANNER_DISPLAYED_WITH_GLOBAL_BANNER_ENABLED":"LEGACY_SSO_BANNER_DISPLAYED",requestUrl:window.location.href}),C.current=!0)},[n]),!n||0===n.length)return null;let S=Math.max(0,n.length-i),j=1===n.length||S>0?(0,a.jsx)("b",{children:n.slice(0,i).join(", ")}):(0,a.jsxs)("span",{children:[(0,a.jsx)("b",{children:n.slice(0,n.length-1).join(", ")}),n.length>2&&","," and ",(0,a.jsx)("b",{children:n[n.length-1]})]});return(0,a.jsx)(l.az,{sx:v,className:e,"data-testid":"sso-banner",children:(0,a.jsx)("div",{className:m.A.Box,children:(0,a.jsx)("section",{"aria-label":"Single sign-on information",children:(0,a.jsx)(l.Hx,{sx:{borderRadius:2*!g,borderWidth:g?"1px 0":1},className:m.A.Flash,children:1===n.length?(0,a.jsxs)("div",{children:[(0,a.jsx)(r.ShieldLockIcon,{className:m.A.ShieldLockIcon}),(0,a.jsx)(s.A,{inline:!0,href:`/orgs/${n[0]}/sso?return_to=${y({location:_,redirectURI:o})}`,children:"Single sign-on"})," ","to see results in the ",(0,a.jsx)("b",{children:n[0]})," organization."]}):(0,a.jsxs)("div",{className:m.A.Box_1,children:[(0,a.jsx)(r.ShieldLockIcon,{className:m.A.Octicon}),(0,a.jsxs)("div",{className:(0,p.$)(m.A.Box_2,x&&m.A.ForceWrap),children:[(0,a.jsxs)("p",{className:m.A.ProtectedOrgs_FullList,children:["Single sign-on to see results in ",0===S&&"the ",i>0&&(0,a.jsxs)(a.Fragment,{children:[j," "]}),S>0&&(0,a.jsxs)(a.Fragment,{children:[i>0&&"and ",S," other"," "]}),n.length>1&&1!==S?"organizations":"organization","."]}),(0,a.jsx)("p",{className:m.A.ProtectedOrgs_Shortened,children:"Single sign-on to see results in your organizations"}),(0,a.jsx)("div",{style:{flexShrink:0},children:(0,a.jsx)(f,{portalContainerName:t,protectedOrgs:n,redirectURI:o})})]})]})})})})})}function f({portalContainerName:e,protectedOrgs:t,redirectURI:n}){let r=(0,c.zy)();return(0,a.jsxs)(o.W,{children:[(0,a.jsx)(o.W.Button,{size:"small",children:"Select an organization"}),(0,a.jsx)(o.W.Overlay,{portalContainerName:e,children:(0,a.jsx)(i.l,{children:t.map(e=>(0,a.jsx)(i.l.Item,{onSelect:()=>{window.location.href=`/orgs/${encodeURIComponent(e)}/sso?return_to=${y({location:r,redirectURI:n})}`},children:e},`org-${e}`))})})]})}function y({location:e,redirectURI:t}){return encodeURIComponent(t?t(e):e.pathname+e.search+e.hash)}try{g.displayName||(g.displayName="SingleSignOnBanner")}catch{}try{f.displayName||(f.displayName="SingleSignOnButton")}catch{}},35673:(e,t,n)=>{n.d(t,{UJ:()=>y,E5:()=>c,Dq:()=>d,Gj:()=>u,f1:()=>m,cB:()=>p,zc:()=>h,Cb:()=>g,hl:()=>f});var a=n(74848),r=n(21728),i=n(56149),s=n(27042),o=n(96540);let l={chatPortalContainer:"PortalContainerUtils-module__chatPortalContainer--Otmle",menuPortalContainer:"PortalContainerUtils-module__menuPortalContainer--D7AeL"},c="copilotChatMenuPortalRoot",d="copilotChatMessagesMenuPortalRoot",u="copilotChatPortalRoot",m="copilotChatTopicPickerPortalRoot",p=()=>{let e,t,n,s=(0,r.c)(3),c=(0,o.useRef)(null);return s[0]===Symbol.for("react.memo_cache_sentinel")?(e=()=>{(0,i.cw)(c.current,u)},t=[],s[0]=e,s[1]=t):(e=s[0],t=s[1]),(0,o.useEffect)(e,t),s[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,a.jsx)("div",{ref:c,className:l.chatPortalContainer}),s[2]=n):n=s[2],n},h=()=>{let e,t,n,s=(0,r.c)(3),d=(0,o.useRef)(null);return s[0]===Symbol.for("react.memo_cache_sentinel")?(e=()=>{(0,i.cw)(d.current,c)},t=[],s[0]=e,s[1]=t):(e=s[0],t=s[1]),(0,o.useEffect)(e,t),s[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,a.jsx)("div",{ref:d,className:l.menuPortalContainer}),s[2]=n):n=s[2],n},g=()=>{let e,t,n,s=(0,r.c)(3),l=(0,o.useRef)(null);return s[0]===Symbol.for("react.memo_cache_sentinel")?(e=()=>{(0,i.cw)(l.current,d)},t=[],s[0]=e,s[1]=t):(e=s[0],t=s[1]),(0,o.useEffect)(e,t),s[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,a.jsx)("div",{ref:l}),s[2]=n):n=s[2],n},f=()=>{let e,t,n,s=(0,r.c)(3),l=(0,o.useRef)(null);return s[0]===Symbol.for("react.memo_cache_sentinel")?(e=()=>{(0,i.cw)(l.current,m)},t=[],s[0]=e,s[1]=t):(e=s[0],t=s[1]),(0,o.useEffect)(e,t),s[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,a.jsx)("div",{ref:l}),s[2]=n):n=s[2],n},y=e=>{let t,n,i,l,d,u,m=(0,r.c)(10);m[0]!==e?({children:t,portalContainerName:i,...n}=e,m[0]=e,m[1]=t,m[2]=n,m[3]=i):(t=m[1],n=m[2],i=m[3]);let[p,h]=(0,o.useState)(x);if(m[4]===Symbol.for("react.memo_cache_sentinel")?(l=()=>h(!0),d=[],m[4]=l,m[5]=d):(l=m[4],d=m[5]),(0,o.useEffect)(l,d),!p)return null;let g=i||c;return m[6]!==t||m[7]!==n||m[8]!==g?(u=(0,a.jsx)(s.W.Overlay,{...n,portalContainerName:g,children:t}),m[6]=t,m[7]=n,m[8]=g,m[9]=u):u=m[9],u};try{p.displayName||(p.displayName="ChatPortalContainer")}catch{}try{h.displayName||(h.displayName="MenuPortalContainer")}catch{}try{g.displayName||(g.displayName="MessagesPortalContainer")}catch{}try{f.displayName||(f.displayName="TopicPickerPortalContainer")}catch{}try{y.displayName||(y.displayName="ActionMenuOverlay")}catch{}function x(){return"undefined"!=typeof document}},39176:(e,t,n)=>{n.d(t,{k:()=>a});function a(e){return function e(t,n){let a=t[n];return a?a.items.map(n=>({data:n,items:"directory"===n.contentType?e(t,n.path):[]})).sort((e,t)=>"directory"===e.data.contentType&&"directory"!==t.data.contentType?-1:"directory"!==e.data.contentType&&"directory"===t.data.contentType?1:e.data.name.localeCompare(t.data.name)):[]}(function(e){let{paths:t,directories:n}=e,a={},r=new Set(n);for(let e of(a[""]={items:[],totalCount:0},[...n].sort())){let t=e.substring(0,e.lastIndexOf("/"))||"",n={name:e.substring(e.lastIndexOf("/")+1),path:e,contentType:"directory"};a[t]||(a[t]={items:[],totalCount:0}),a[t].items.push(n),a[e]||(a[e]={items:[],totalCount:0})}for(let e of t.filter(e=>!r.has(e)).sort()){let t=e.substring(0,e.lastIndexOf("/"))||"",n={name:e.substring(e.lastIndexOf("/")+1),path:e,contentType:"file"};a[t]||(a[t]={items:[],totalCount:0}),a[t].items.push(n)}for(let e in a){let t=a[e];t&&t.items.sort((e,t)=>"directory"===e.contentType&&"directory"!==t.contentType?-1:"directory"!==e.contentType&&"directory"===t.contentType?1:e.name.localeCompare(t.name))}let i=e=>{let t=a[e];return t?t.items.reduce((e,t)=>"directory"===t.contentType?e+1+i(t.path):e+1,0):0};for(let e in a){let t=a[e];t&&(t.totalCount=i(e))}return a}(e),"")}},40064:(e,t,n)=>{n.d(t,{V:()=>m});var a=n(74848),r=n(96540),i=n(43258),s=n(38621),o=n(52870),l=n(56149);let c={info:"",success:"Toast--success",error:"Toast--error"},d={info:(0,a.jsx)(s.InfoIcon,{}),success:(0,a.jsx)(s.CheckIcon,{}),error:(0,a.jsx)(s.StopIcon,{})},u=({message:e,timeToLive:t,icon:n,type:i="info",role:s="log"})=>{let[u,m]=r.useState(!0),{safeSetTimeout:p}=(0,o.A)();return(0,r.useEffect)(()=>{t&&p(()=>m(!1),t-300)},[p,t]),(0,a.jsx)(l.ZL,{children:(0,a.jsx)("div",{className:"p-1 position-fixed bottom-0 left-0 mb-3 ml-3",children:(0,a.jsxs)("div",{className:`Toast ${c[i]} ${u?"Toast--animateIn":"Toast--animateOut"}`,id:"ui-app-toast","data-testid":`ui-app-toast-${i}`,role:s,children:[(0,a.jsx)("span",{className:"Toast-icon",children:n||d[i]}),(0,a.jsx)("span",{className:"Toast-content",children:e})]})})})};try{u.displayName||(u.displayName="Toast")}catch{}function m(){let{toasts:e,persistedToast:t}=(0,r.useContext)(i.T8);return(0,a.jsxs)(a.Fragment,{children:[e.map((e,t)=>(0,a.jsx)(u,{message:e.message,icon:e.icon,timeToLive:i.Qn,type:e.type,role:e.role},t)),t&&(0,a.jsx)(u,{message:t.message,icon:t.icon,type:t.type,role:t.role})]})}try{m.displayName||(m.displayName="Toasts")}catch{}},44956:(e,t,n)=>{n.d(t,{m:()=>s});var a=n(74848),r=n(21373);let i={footerContainer:"SpaceDialogFooter-module__footerContainer--J2LGP"};function s({onSave:e,onCancel:t,saveButtonText:n,isLoading:s=!1,loadingAnnouncement:o="",disabled:l=!1}){return(0,a.jsxs)("div",{className:i.footerContainer,children:[(0,a.jsx)(r.Q,{variant:"default",onClick:t,children:"Cancel"}),(0,a.jsx)(r.Q,{variant:"primary",loading:s,loadingAnnouncement:o,onClick:e,disabled:l,children:n})]})}try{s.displayName||(s.displayName="SpaceDialogFooter")}catch{}},46642:(e,t,n)=>{n.d(t,{P:()=>d});var a=n(74848),r=n(96540),i=n(38621),s=n(69497),o=n(21373),l=n(70170),c=n(86391);function d({currentSelection:e,repositoryLoader:t,onSelect:n,selectionVariant:d,selectAllOption:u,additionalButtonProps:m,buttonText:p="",width:h,truncateMaxWidth:g,height:f,fullscreenOnNarrow:y,defaultOwner:x,onLoad:v}){let[_,C]=(0,r.useState)(""),[S,j]=(0,r.useState)([]),[b,w]=(0,r.useState)(!0),N=(0,r.useCallback)((0,l.s)(async e=>{try{let n=await t(e,x);j(n),v?.(n)}catch{}w(!1)},200),[t,x]);(0,r.useEffect)(()=>{w(!0),N(_)},[_,N,w]);let I=(0,r.useCallback)(e=>{"single"===d?!e[0]||e[0]._all?n(void 0):n(e[0]):n(e)},[d,n]),E=(0,r.useMemo)(()=>"multiple"===d?e||[]:e?[e]:[],[d,e]),T=(0,r.useCallback)(e=>{let t,n="medium"===h?35:"large"===h?60:24;return(e.name.length>n&&(t=`${e.name.substring(0,n)}...`),e._all)?{id:e.name,text:"All repositories",source:e,groupId:"all"}:{id:e.name,text:t||e.name,source:e,groupId:"select",disabled:!1===e.enabled,leadingVisual:()=>e.private?(0,a.jsx)(i.RepoLockedIcon,{size:16}):(0,a.jsx)(i.RepoIcon,{size:16})}},[h]),A=(0,r.useCallback)(e=>e.name,[]),R=(0,r.useMemo)(()=>{let e=[];return e.push(...E.filter(e=>S.every(t=>t.name!==e.name))||[]),e.push(...S),u&&e.push({name:"$all$",_all:!0}),e},[S,u,E]),k=p,L=i.RepoIcon;return k||("multiple"===d?k=E.length>0?`${E.length} repositor${E.length>1?"ies":"y"}`:"Select repositories":E.length>0&&E[0]?(k=E[0].name,L=E[0].private?i.RepoLockedIcon:i.RepoIcon):k=u?"All repositories":"Select a repository"),(0,a.jsx)(c.O,{renderAnchor:({"aria-labelledby":e,...t})=>(0,a.jsx)(o.Q,{leadingVisual:L,trailingAction:i.TriangleDownIcon,"aria-labelledby":e,...t,...m,children:(0,a.jsx)(s.A,{title:k,maxWidth:g??195,children:k})}),placeholderText:"Search",items:R,loading:b,groups:u?[{groupId:"all"},{groupId:"select"}]:[],selectionVariant:d,initialSelectedItems:E,onSelectionChange:I,filterItems:C,getItemKey:A,convertToItemProps:T,title:"Select a repository",width:h,height:f,responsiveOnNarrow:y})}try{d.displayName||(d.displayName="ReposSelector")}catch{}},49936:(e,t,n)=>{n.d(t,{I:()=>a});let a=(0,n(96540).createContext)(null)},51407:(e,t,n)=>{n.d(t,{Y:()=>a});function a(){let e={};return e.promise=new Promise((t,n)=>{e.resolve=t,e.reject=n}),e}},51563:(e,t,n)=>{n.d(t,{$:()=>d});var a=n(33592),r=n(23657),i=n(72011),s=n(97665),o=n(94747),l=n(96379),c=n(31971);let d=e=>{let t=(0,a.b)(),n=(0,s.jE)(),{mutateAsync:d,...u}=(0,o.n)({onSuccess:async()=>{n.invalidateQueries({queryKey:i.O6}),e&&await n.invalidateQueries({queryKey:(0,i.dp)(e)})},mutationFn:async n=>{let a=e?(0,r.fn)(e):"/custom_copilots",i={custom_copilot:{owner_id:n.ownerId,owner_type:n.ownerType,name:n.name,icon_type:n.iconType,icon_color:n.iconColor,description:n.description,general_instructions:n.generalInstructions,resources_attributes:n.resources?.map(e=>({id:e.databaseId,copilot_chat_attachment_id:e.copilotChatAttachmentId,resource_type:e.type,_destroy:e.markedForDestroy,metadata:(0,c.M)(e)})),visibility:n.visibility,base_role:n.baseRole}},s=await (0,l.lS)(a,{method:e?"PUT":"POST",body:i}),o=await s.json();if(!s.ok)throw o.errorMessages;return t?.dispatch({type:"SET_CUSTOM_COPILOT",customCopilot:o}),o}});return{upsertCopilotSpace:d,...u}}},53627:(e,t,n)=>{n.d(t,{C3:()=>o,JV:()=>r,K3:()=>u,MM:()=>l,OE:()=>m,Zu:()=>d,bj:()=>i,jc:()=>c,kd:()=>s});var a=n(71315);function r(){return a.Kn?.state||{}}function i(e){p(r(),"",e)}function s(e){a.Kn?.pushState({appId:r().appId},"",e),h()}function o(e){p({...r(),...e},"",location.href)}function l(e){i(`?${e.toString()}${a.fV.hash}`)}function c(){i(a.fV.pathname+a.fV.hash)}function d(e){i(e.startsWith("#")?e:`#${e}`)}function u(){i(a.fV.pathname+a.fV.search)}function m(){a.Kn?.back()}function p(e,t,n){a.Kn?.replaceState(e,t,n),h()}function h(){a.cg?.dispatchEvent(new CustomEvent("statechange",{bubbles:!1,cancelable:!1}))}},54114:(e,t,n)=>{n.d(t,{Rw:()=>T});var a=n(74848),r=n(6665),i=n(19189),s=n(25556),o=n(34535),l=n(96459),c=n(38621),d=n(40480),u=n(88432),m=n(69726),p=n(87448),h=n(10095),g=n(96540),f=n(96379),y=n(52870);function x(e,t,n){let a=[];for(let r of t)if(r.startsWith(e)){let t=r.slice(e.length+1),i=t.indexOf("/"),s=i>0?t.slice(0,i):t,o=`${e}/${s}`;if(n&&n.some(e=>e.path===o))continue;let l={items:[],data:{contentType:o===r?"file":"directory",name:s,path:o,isClientOnly:!0}};a.push(l)}return a}let v={checkbox:"FileTreePicker-module__checkbox--uY6AK",itemContainer:"FileTreePicker-module__itemContainer--ShYuv",Box:"FileTreePicker-module__Box--RKQKr",Box_1:"FileTreePicker-module__Box_1--usRNW",Octicon:"FileTreePicker-module__Octicon--rINlU",Box_2:"FileTreePicker-module__Box_2--yFodr"};var _=n(53419);function C(e,t){let n=new Set(e);switch(t.type){case"SINGLE_SELECT_FILE":n.clear(),n.add(t.path),(0,_.BI)("copilot-spaces.click",{target:"FILE_PICKER",action:"SINGLE_SELECT_FILE",newFileCount:n.size});break;case"SELECT_FILE":n.add(t.path),(0,_.BI)("copilot-spaces.click",{target:"FILE_PICKER",action:"SELECT_FILE",newFileCount:n.size});break;case"DESELECT_FILE":n.delete(t.path),(0,_.BI)("copilot-spaces.click",{target:"FILE_PICKER",action:"DESELECT_FILE",newFileCount:n.size});break;case"SELECT_DIRECTORY":for(let e of t.paths)n.add(e);(0,_.BI)("copilot-spaces.click",{target:"FILE_PICKER",action:"SELECT_DIRECTORY",newFileCount:n.size,directoryCount:t.paths.length});break;case"DESELECT_DIRECTORY":for(let e of t.paths)n.delete(e);(0,_.BI)("copilot-spaces.click",{target:"FILE_PICKER",action:"DESELECT_DIRECTORY",newFileCount:n.size,directoryCount:t.paths.length})}return n}function S({isActive:e,file:t,onItemSelected:n,getItemUrl:i,selectedItemRef:l,navigate:m,onRenderRow:p,getFileTrailingVisual:h,getFileIcon:f,navigateOnClick:y,isSelected:x,singleSelect:_}){let{sendRepoClickEvent:C}=(0,r.T)(),S=g.useRef(null),j=(0,o.Z)({focusRowRef:S,mouseRowRef:S}),b="submodule"===t.data.contentType,w=h?.(t.data);(0,g.useEffect)(()=>{e&&S.current&&requestAnimationFrame(()=>{S.current?.scrollIntoView({block:"center"})})},[e]);let N=g.useCallback(e=>{b?(e.preventDefault(),t.data.submoduleUrl&&(window.location.href=t.data.submoduleUrl)):e.metaKey||e.ctrlKey||1===e.button?(window.open(i?.(t.data),"_blank"),e.preventDefault()):(n?.(t.data,t),C("FILES_TREE.ITEM",{item_path:t.data.path}),y&&m(i?.(t.data)||""),e.stopPropagation())},[t,i,b,m,y,n,C]);return p?.(),(0,a.jsxs)(d.G.Item,{ref:S,onSelect:N,current:e,id:`${t.data.path}-item`,containIntrinsicSize:e?void 0:"auto 2rem",children:[(0,a.jsx)(d.G.LeadingVisual,{children:f?f(t.data):b?(0,a.jsx)(c.FileSubmoduleIcon,{}):(0,a.jsx)(c.FileIcon,{})}),(0,a.jsxs)("div",{className:v.itemContainer,children:[!_&&(0,a.jsx)(u.A,{className:v.checkbox,checked:x||!1,readOnly:!0,"aria-label":`Select ${t.data.name}`}),(0,a.jsx)("span",{ref:l,style:{color:b?"var(--fgColor-accent, var(--color-accent-fg))":void 0},children:(0,a.jsx)("span",{"data-testid":`${t.data.path}-file-item`,children:t.data.name})})]}),j&&(0,a.jsx)(s.m,{"data-testid":`${t.data.name}-item-tooltip`,id:`${t.data.name}-item-tooltip`,contentRef:S,"aria-label":t.data.name,open:!0,direction:"ne"}),!!w?.screenReaderText&&(0,a.jsx)("span",{className:"sr-only",children:w.screenReaderText}),!!w?.trailingVisual&&(0,a.jsx)(d.G.TrailingVisual,{children:w.trailingVisual})]})}let j=g.memo(S),b=g.memo(u.A);function w({clientOnlyFilePaths:e,directory:t,isActive:n,isAncestorOfActive:i,leadingPath:l,onItemSelected:c,getItemUrl:u,getFetchUrl:m,selectedItemRef:p,navigate:h,onRenderRow:_,getFileTrailingVisual:C,getFileIcon:S,navigateOnClick:j,selectedChildren:w,expandedPath:N,singleSelect:I}){let[T,R]=(0,g.useState)(i),{sendRepoClickEvent:k}=(0,r.T)(),L=g.useRef(null),P=g.useRef(null),M=(0,o.Z)({focusRowRef:P,mouseRowRef:L}),O=g.useMemo(()=>w?.filter(e=>e.startsWith(`${t.data.path}/`)),[w,t.data.path]),F=g.useMemo(()=>w?.includes(t.data.path)??!1,[w,t.data.path]),D=t.items.length>1e3,B=g.useMemo(()=>(function(e,t,n){if(n?.selectedSelf&&n?.isLarge)return"all";if(!t||0===t.length)return"none";let a=`${e.data.path}/`,r=e.items.length,i=t.filter(e=>e.startsWith(a)&&!e.slice(a.length).includes("/")).length;return 0===i?"none":i>=r?"all":"partial"})(t,O,{selectedSelf:F,isLarge:D}),[t,O,F,D]),[$,z,U,V,W,H,q]=function(e,t,n){let[a,r]=g.useState(e.items),[i,s]=g.useState(e.data.totalCount||0),[o,l]=g.useState(!1),[c,d]=g.useState(!1),{safeSetTimeout:u}=(0,y.A)();g.useEffect(()=>{r(e.items)},[e.items]),g.useEffect(()=>{void 0!==e.data.totalCount&&s(e.data.totalCount)},[e.data.totalCount]);let m=g.useCallback(()=>{d(!1)},[]),p=g.useCallback((e,t)=>{let n=e||[...a];r(n.slice(0,100)),u(()=>{r(n),void 0!==t&&s(t)},1)},[a,u]);return[g.useCallback(async a=>{let i=new Map;if(e.data.isClientOnly){if(a){let n=x(e.data.path,a);for(let e of n)i.set(e.data.path,e);t({type:"add",folders:i,processingTime:0}),n.length>100?p(n,n.length):(r(n),s(n.length))}}else{let o=n(e.data);d(!1),l(!0);let c=Date.now(),u=await (0,f.lS)(`${o}?noancestors=1`);try{if(u.ok){let n=await u.json(),o=n.payload.tree.items.map(e=>{let t={items:[],data:{...e},autoExpand:"directory"===e.contentType&&1===n.payload.tree.items.length};return(i.set(e.path,t),e.hasSimplifiedPath)?function e(t,n,a){t.data.name=t.data.name.slice(t.data.name.lastIndexOf("/")+1,t.data.name.length);let r=n.name.slice(0,n.name.lastIndexOf("/")),i=r.indexOf("/")>-1,s={path:n.path.slice(0,n.path.lastIndexOf("/")),contentType:n.contentType,name:r,hasSimplifiedPath:i},o={items:[t],data:s};return(a.set(s.path,o),i)?e(o,{...s},a):o}(t,e,i):t});if(a){let t=e.data.path,r=x(t,a,n.payload.tree.items);for(let e of(o.push(...r),r))i.set(e.data.path,e)}t({type:"add",folders:i,processingTime:Date.now()-c}),e.items=o,e.data.totalCount=n.payload.tree.totalCount,o.length>100?p(o,n.payload.tree.totalCount):(r(o),s(n.payload.tree.totalCount))}else d(!0)}catch{d(!0)}}l(!1)},[n,e,t,p]),p,a,o,c,m,i]}(t,()=>{},m),K=l?`${l}/`:"",G=q-U.length;(0,g.useEffect)(()=>{n&&L.current&&requestAnimationFrame(()=>{L.current?.scrollIntoView({block:"center"})})},[n]);let Q=g.useCallback(e=>{!e||T||V||W||!(t.items.length>100)||z(),e!==T&&R(e)},[T,V,W,t.items.length,z]),J=g.useCallback(e=>{e.metaKey||e.ctrlKey||1===e.button&&j?(window.open(u?.(t.data),"_blank"),e.preventDefault()):(I?Q(!T):(c?.(t.data,t),k("FILES_TREE.ITEM",{item_path:t.data.path}),j&&h(u?.(t.data)||"")),e.stopPropagation())},[t,u,T,h,j,c,Q,k,I]);g.useEffect(()=>{i&&!T&&Q?.(!0)},[i]),g.useEffect(()=>{0===t.items.length&&T?Q?.(!1):!T&&t.autoExpand&&Q?.(!0)},[t.items.length]);let Y=g.useCallback(e=>{p&&n&&p(e),L.current=e},[p,n]);if(1===t.items.length){let r=t.items[0];if(r&&"directory"===r.data.contentType)return(0,a.jsx)(E,{clientOnlyFilePaths:e,directoryItems:t.items,leadingPath:K+t.data.name,inheritsActive:n,onItemSelected:c,selectedItemRef:p,getItemUrl:u,directoryNavigateOnClick:j,navigateOnClick:j,getFileTrailingVisual:C,getFileIcon:S,selectedChildren:O,expandedPath:N,singleSelect:I})}return _?.(),(0,a.jsxs)(d.G.Item,{ref:P,expanded:T,onExpandedChange:Q,current:n,onSelect:J,id:`${t.data.path}-item`,containIntrinsicSize:n?void 0:"auto 2rem",children:[(0,a.jsx)(d.G.LeadingVisual,{children:(0,a.jsx)(d.G.DirectoryIcon,{})}),(0,a.jsxs)("div",{className:v.itemContainer,children:[!I&&(0,a.jsx)(b,{className:v.checkbox,checked:"all"===B,indeterminate:"partial"===B,readOnly:!0,"aria-label":`Select ${t.data.name}`,"data-indeterminate":"partial"===B?"true":void 0}),(0,a.jsxs)("span",{ref:Y,children:[K&&(0,a.jsx)("span",{children:K}),(0,a.jsx)("span",{"data-testid":`${t.data.path}-directory-item`,children:t.data.name})]})]}),M&&(0,a.jsx)(s.m,{"data-testid":`${t.data.name}-directory-item-tooltip`,id:`${t.data.name}-directory-item-tooltip`,contentRef:P,"aria-label":`${K}${t.data.name}`,open:!0,direction:"ne"}),(0,a.jsx)(d.G.SubTree,{state:V?"loading":W?"error":"done",children:W?(0,a.jsx)(d.G.ErrorDialog,{onRetry:$,onDismiss:H,children:"There was an error loading the folder contents."}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(E,{clientOnlyFilePaths:e,directoryItems:U,onItemSelected:c,selectedItemRef:p,getItemUrl:u,directoryNavigateOnClick:j,navigateOnClick:j,getFileTrailingVisual:C,getFileIcon:S,selectedChildren:O,expandedPath:N,singleSelect:I}),G>0&&(0,a.jsx)(A,{message:`${G} entries not shown`})]})})]})}let N=g.memo(w,(e,t)=>e.isActive===t.isActive&&e.isAncestorOfActive===t.isAncestorOfActive&&e.directory===t.directory&&(e.selectedChildren===t.selectedChildren||0===e.selectedChildren.length&&0===t.selectedChildren.length)&&e.expandedPath===t.expandedPath);function I({clientOnlyFilePaths:e,directoryItems:t,leadingPath:n,inheritsActive:r,onItemSelected:s,selectedItemRef:o,onRenderRow:c,getItemUrl:d,getFileTrailingVisual:u,getFileIcon:m,directoryNavigateOnClick:p,navigateOnClick:h,selectedChildren:f,expandedPath:y,singleSelect:x}){let v=(0,i.Z)(),_=(0,l.Z)(),C=g.useRef(_),S=g.useRef(s);g.useEffect(()=>{S.current=s,C.current=_},[s,_]);let b=g.useCallback((e,t)=>{S.current?.(e,t)},[]),w=g.useMemo(()=>t.map(t=>{let i=y===t.data.path,s=f?.includes(t.data.path),l=i||y.startsWith(`${t.data.path}/`),g=f?.filter(e=>e===t.data.path||e.startsWith(`${t.data.path}/`));return"directory"===t.data.contentType?(0,a.jsx)(N,{clientOnlyFilePaths:e,isActive:r||i,isAncestorOfActive:l,onItemSelected:b,leadingPath:n,directory:t,getItemUrl:d,getFetchUrl:v.getItemUrl,selectedItemRef:l?o:void 0,navigate:_,onRenderRow:c,navigateOnClick:p,getFileTrailingVisual:u,getFileIcon:m,itemCount:t.items.length,isSelected:s,selectedChildren:g,expandedPath:y,singleSelect:x},t.data.name):(0,a.jsx)(j,{onItemSelected:b,file:t,isActive:i,getItemUrl:d,selectedItemRef:i?o:void 0,navigate:_,navigateOnClick:h,onRenderRow:c,getFileTrailingVisual:u,getFileIcon:m,isSelected:s,singleSelect:x},t.data.name)}),[t,y,f,b,d,o,_,h,c,u,m,x,e,r,n,v.getItemUrl,p]);return(0,a.jsx)(a.Fragment,{children:w})}let E=g.memo(I);function T(e){let{clientOnlyFilePaths:t,rootItems:n,fetchError:r,loading:i,onRenderRow:s,getItemUrl:o,getFileTrailingVisual:l,getFileIcon:c,expandedPath:u,onSelectionChange:h}=e,[f,y]=(0,g.useReducer)(C,new Set),x=e.selectedItems||f,_=(0,g.useCallback)(e=>{let t=new Set;if(t.add(e.data.path),"directory"===e.data.contentType)for(let n of e.items)for(let e of _(n))t.add(e);return Array.from(t)},[]),S=(0,g.useCallback)((t,n)=>{var a;let r=(a=!!e.singleSelect,a?{type:"SINGLE_SELECT_FILE",path:t}:n?{type:"DESELECT_FILE",path:t}:{type:"SELECT_FILE",path:t});h?h(C(x,r)):y(r)},[h,e.singleSelect,x]),j=(0,g.useCallback)((t,n)=>{if(e.allowFolderReferences&&t.items.length>1e3){let e=t.data.path,n=x.has(e)?{type:"DESELECT_FILE",path:e}:{type:"SELECT_FILE",path:e};h?h(C(x,n)):y(n);return}let a=_(t),r=n?{type:"DESELECT_DIRECTORY",paths:a}:{type:"SELECT_DIRECTORY",paths:a};h?h(C(x,r)):y(r)},[_,h,x,e.allowFolderReferences]),b=(0,g.useCallback)((t,n)=>{if("directory"===t.contentType){if(e.allowFolderReferences&&n.items.length>1e3)return void j(n,x.has(t.path));let a=_(n).every(e=>x.has(e));j(n,a)}else S(t.path,x.has(t.path))},[_,j,S,x,e.allowFolderReferences]),w=(0,g.useCallback)(e=>{1===e.button&&e.preventDefault()},[]);return(0,a.jsx)(p.az,{onMouseDown:w,sx:{...e.sx},"data-testid":"repos-file-tree-container",className:v.Box,children:i?(0,a.jsxs)("div",{className:v.Box_1,children:[(0,a.jsx)(m.A,{"aria-label":"Loading file tree"}),(0,a.jsx)("span",{className:"fgColor-muted",children:"Fetching files..."})]}):(0,a.jsx)("nav",{"aria-label":"File Tree Navigation",children:(0,a.jsxs)(d.G,{"aria-label":"Files",children:[r&&(0,a.jsx)(A,{message:"Some files could not be loaded."}),(0,a.jsx)(E,{clientOnlyFilePaths:t,directoryItems:n,onItemSelected:b,selectedChildren:x?Array.from(x):[],selectedItemRef:e.selectedItemRef,onRenderRow:s,directoryNavigateOnClick:e.directoryNavigateOnClick,navigateOnClick:e.navigateOnClick,getItemUrl:o,getFileTrailingVisual:l,getFileIcon:c,expandedPath:u,singleSelect:e.singleSelect})]})})})}function A({message:e}){return(0,a.jsxs)(d.G.Item,{id:"error-tree-row",children:[(0,a.jsx)(d.G.LeadingVisual,{children:(0,a.jsx)(h.A,{icon:c.AlertFillIcon,className:v.Octicon})}),(0,a.jsx)("div",{className:v.Box_2,children:e||"Couldn't load."})]})}try{S.displayName||(S.displayName="WrappedFileTreeRow")}catch{}try{j.displayName||(j.displayName="FileTreeRow")}catch{}try{b.displayName||(b.displayName="MemoizedCheckbox")}catch{}try{w.displayName||(w.displayName="WrappedDirectoryTreeRow")}catch{}try{N.displayName||(N.displayName="DirectoryTreeRow")}catch{}try{I.displayName||(I.displayName="WrappedDirectoryContents")}catch{}try{E.displayName||(E.displayName="DirectoryContents")}catch{}try{T.displayName||(T.displayName="FileTreePicker")}catch{}try{A.displayName||(A.displayName="ErrorTreeRow")}catch{}},56708:(e,t,n)=>{n.d(t,{q:()=>ChatInputValidationError});let ChatInputValidationError=class ChatInputValidationError extends Error{constructor(e){super(e),this.name="ChatInputValidationError"}}},57224:(e,t,n)=>{n.d(t,{y:()=>s});var a=n(74848),r=n(21728),i=n(49936);function s(e){let t,n,s=(0,r.c)(7),{children:o,appName:l,category:c,metadata:d}=e;s[0]!==l||s[1]!==c||s[2]!==d?(t={appName:l,category:c,metadata:d},s[0]=l,s[1]=c,s[2]=d,s[3]=t):t=s[3];let u=t;return s[4]!==o||s[5]!==u?(n=(0,a.jsx)(i.I.Provider,{value:u,children:o}),s[4]=o,s[5]=u,s[6]=n):n=s[6],n}try{s.displayName||(s.displayName="AnalyticsProvider")}catch{}},57448:(e,t,n)=>{n.d(t,{Ld:()=>g,M8:()=>f,Tz:()=>v,W5:()=>u,cx:()=>h,r_:()=>x,vn:()=>y,xG:()=>m});var a=n(51987),r=n(40458),i=n(97286),s=n(97665),o=n(94747),l=n(96379),c=n(96540),d=n(79064);n(2635),n(33592);let u={Unindexed:"not_indexed",Indexed:"indexed",Indexing:"indexing",PartiallyIndexed:"partially_indexed",Unknown:"unknown"},m={Requested:"requested",NotFound:"not_found",Unauthorized:"unauthorized",ServiceUnavailable:"service_unavailable",QuotaExhausted:"quota_exhausted",Forbidden:"forbidden",CanIndex:"ok",IndexingError:"indexing_error",RequestFailed:"request_failed",Unknown:"unknown"},p=[m.NotFound,m.Unauthorized,m.ServiceUnavailable,m.QuotaExhausted,m.Forbidden,m.RequestFailed],h=256,g=400;function f(e){var t,n;let a=(0,s.jE)(),i=(0,c.useCallback)(()=>Promise.all(e.map(e=>a.invalidateQueries({queryKey:["copilot-chat","repos-indexing-state",e]}))),[a,e]),l=(0,r.E)({queries:e.map(e=>({queryKey:["copilot-chat","repos-indexing-state",e],queryFn:()=>_(e),placeholderData:{requestStatus:m.Unknown,code:u.Unknown,docs:u.Unknown},staleTime:1/0}))}),{mutate:d}=(0,o.n)({mutationKey:["repos-indexing-state"],mutationFn:()=>C(e),onSuccess:i}),h={requestStatus:0===(n=(t=l.map(e=>e.data)).map(e=>e.requestStatus)).length?m.Unknown:n.some(e=>p.includes(e))?m.IndexingError:n.every(e=>e===m.CanIndex)?m.CanIndex:(n.every(e=>e===m.Unknown),m.Unknown),code:j(t.map(e=>e.code)),docs:j(t.map(e=>e.docs)),remainingRepoIndexTokens:t[0]?.remainingRepoIndexTokens};return b(()=>void i(),1e4*(h.code===u.Indexing&&h.requestStatus!==m.IndexingError)),[h,()=>d()]}function y(e){let t=(0,s.jE)(),n=(0,c.useCallback)(()=>Promise.resolve(t.invalidateQueries({queryKey:["repo-indexing-state",e]})),[t,e]),a=(0,i.I)({queryKey:["copilot-chat","repo-indexing-state",e],queryFn:()=>_(e),placeholderData:{requestStatus:m.Unknown,code:u.Unknown,docs:u.Unknown},staleTime:1/0}),{mutate:r}=(0,o.n)({mutationKey:["repo-indexing-state"],mutationFn:()=>C([e]),onSuccess:n}),l=a.data;return b(()=>void n(),1e4*(l.code===u.Indexing&&l.requestStatus!==m.IndexingError)),[l,()=>r()]}function x(e){let t=(0,i.I)({queryKey:["copilot-chat","repos-indexing-state",e],queryFn:()=>S(e),staleTime:1/0});return!t.isError&&!!t.data?.canChat}function v(){let e=d.Jt.getPanelHeight(),t=d.Jt.getPanelWidth(),n=(0,c.useRef)(null),a=(0,c.useRef)(e),r=(0,c.useRef)(e),i=(0,c.useRef)(null),s=(0,c.useRef)(t),o=(0,c.useRef)(t),[l,u]=(0,c.useState)(e),[m,p]=(0,c.useState)(t),f=(0,c.useRef)(0);(0,c.useEffect)(()=>{f.current=parseFloat(getComputedStyle(document.documentElement).fontSize)},[]);let y=e=>Math.min(Math.max(e,h),window.innerHeight-f.current),x=e=>Math.min(Math.max(e,g),window.innerWidth-2*f.current),v=(0,c.useCallback)(e=>{if(null!==n.current){let t=n.current-e.clientY,i=y(a.current+t);u(i),r.current=i}if(null!==i.current){let t=i.current-e.clientX,n=x(s.current+t);p(n),o.current=n}},[]),_=(0,c.useCallback)(()=>{window.removeEventListener("mousemove",v),window.removeEventListener("mouseup",_),null!==n.current&&(d.Jt.setPanelHeight(r.current),n.current=null),null!==i.current&&(d.Jt.setPanelWidth(o.current),i.current=null)},[v]),C=(0,c.useCallback)((e,t,r)=>{0===e.button&&(e.preventDefault(),r&&(n.current=e.clientY,a.current=l),t&&(i.current=e.clientX,s.current=m),window.addEventListener("mousemove",v),window.addEventListener("mouseup",_))},[l,m,v,_]),S=(0,c.useCallback)(e=>{if("ArrowUp"===e.key){let t=y(l+4);u(t),d.Jt.setPanelHeight(t),e.preventDefault()}else if("ArrowDown"===e.key){let t=y(l-4);u(t),d.Jt.setPanelHeight(t),e.preventDefault()}else if("ArrowRight"===e.key){let t=x(m-4);p(t),d.Jt.setPanelWidth(t),e.preventDefault()}else if("ArrowLeft"===e.key){let t=x(m+4);p(t),d.Jt.setPanelWidth(t),e.preventDefault()}},[l,m]);return{panelWidth:m,panelHeight:l,startResize:C,onResizerKeyDown:S}}async function _(e){let t=await fetch(`/search/check_indexing_status?nwo=${encodeURIComponent(e)}`,{headers:{Accept:"application/json",...(0,a.kt)()}});if(!t.ok)return{requestStatus:m.RequestFailed,code:u.Unknown,docs:u.Unknown};let n=await t.json();return{requestStatus:n.can_index,code:n.code_status,docs:n.docs_status}}async function C(e){let t=1===e.length?`nwo=${encodeURIComponent(e[0])}`:`nwos=${encodeURIComponent(JSON.stringify(e))}`;return(0,l.DI)(`/search/index_embeddings?${t}&index_code=true`,{method:"POST"})}async function S(e){let t=await fetch(`/github-copilot/docs/docsets/kb_indexed_repos?ids=${encodeURIComponent(JSON.stringify(e))}`,{headers:{Accept:"application/json",...(0,a.kt)()}});return t.ok?await t.json():{canChat:!1}}function j(e){return e.every(e=>e===u.Indexed)?u.Indexed:e.every(e=>e===u.Unindexed)?u.Unindexed:e.some(e=>e===u.Indexing)?u.Indexing:e.some(e=>e===u.Unindexed)?u.PartiallyIndexed:u.Unknown}function b(e,t){let n=(0,c.useRef)(void 0),a=(0,c.useRef)(e);return(0,c.useEffect)(()=>{a.current=e},[e]),(0,c.useEffect)(()=>{if(t>0)return n.current=window.setInterval(()=>a.current(),t),()=>window.clearInterval(n.current)},[t]),n}},60905:(e,t,n)=>{n.d(t,{s:()=>CopilotImageAttacher});var a=n(50467),r=n(53419),i=n(25641),s=n(35247),o=n(76166),l=n(30456);let c=["image/gif","image/jpeg","image/png","image/webp"];let CopilotImageAttacher=class CopilotImageAttacher{static getAllowedImageFileExtensions(e){return this.getFileExtensions(e).join(",")}static isTypeAllowed(e,t){return e=e.toLowerCase(),this.getMimeTypes(t).includes(e)}static getAllowedFiles(e,t){let[n,a]=e.reduce(([e,n],a)=>this.isTypeAllowed(a.type,t)?[[...e,a],n]:[e,[...n,a]],[[],[]]);return[n,a]}static getAttachmentLimit(){return s.W.attachMultipleImages?4:1}static getAttachmentSizeLimit(){return 3932160}static makeImageReference(e,t){let n=crypto.randomUUID(),a=new l.N(n,e,t);return{id:n,attachment:a,type:"image",name:e.name||"Image"}}static getFileExtensions(e){if(Array.isArray(e))return Array.from(new Set(e.flatMap(e=>this.getFileExtensions(e))));let t=this.getMimeTypes(e).map(e=>`.${e.split("/")[1]}`);return t.includes(".jpeg")&&t.push(".jpg"),t}static getMimeTypes(e){return Array.isArray(e)?Array.from(new Set(e.flatMap(e=>this.getMimeTypes(e)))):e.capabilities.limits.vision?e.capabilities.limits.vision.supported_media_types.filter(e=>c.includes(e)):[]}async addImageAttachments(e,t="unknown",n,a=!1){if(0===e.length)return[];let l=null,c=this.state.selectedThreadID,d=this.manager.getPendingThreadId(n),u=s.W.visionSkipThreadCreate;if(n&&!c&&d&&(c=d),!c&&!u)try{c=(l=await this.manager.createThread({customCopilotId:n,preventThreadSelection:a})).id}catch(t){let e="An error occurred creating the thread. Sending a single message should create a new thread.";throw t instanceof Error&&(e||(e=t.message)),this.manager.addAmbientError(e),Error(e)}let m=this.state.currentReferences.filter(e=>"image"===e.type).length,p=CopilotImageAttacher.getAttachmentLimit();if(m+e.length>p){let e=s.W.attachMultipleImages?`You can add up to ${p} image files per message.`:"Only one image can be uploaded at a time";return this.manager.addAmbientError(e),(0,o.d)("file_limit_reached"),[]}let h=[],g=[];for(let n of e){if(!CopilotImageAttacher.isTypeAllowed(n.type,this.state.model))return(0,o.d)("included_unsupported_file",{fileTypes:n.type,uploadType:t}),[];if(n.size>CopilotImageAttacher.getAttachmentSizeLimit())return this.manager.addAmbientError("Only images below 3.75MB are supported"),(0,o.d)("size_limit_exceeded",{size:n.size}),[];if(null==c&&!u)throw this.manager.addAmbientError("Please manually create a thread before uploading an image"),Error("ThreadID resolution for image attachment is not functioning properly");let e=CopilotImageAttacher.makeImageReference(n,c);if(this.state.model.id.startsWith("claude")&&this.state.model.capabilities.supports.vision){let t=await e.attachment.getDimensions();if(t.width&&t.height&&(t.width>8e3||t.height>8e3)){this.manager.addAmbientError("The image you uploaded exceeds the maximum allowed dimensions for Claude models. Please try again with another model."),(0,o.d)("dimension_limit_exceeded",{width:t.width,height:t.height});continue}}let a=(0,i.Vc)(n.name);this.manager.addReference(a,"image-attacher"),0===g.length&&this.manager.dispatch({type:"WAITING_ON_ATTACHMENT",loading:!0,attachmentType:"file-upload"}),g.push({file:n,placeholder:a,reference:e})}return await Promise.all(g.map(async({file:e,placeholder:n,reference:a})=>{try{l&&await a.attachment.prefetch(),this.manager.setImageAttachmentUploaded(a.id,a.attachment),this.manager.replaceReference(n,a),(0,r.BI)("dotcom_chat.vision.image_added",{uploadType:t}),h.push(a)}catch(a){this.manager.removeReference(n);let t="An unexpected error occurred while reading the file";if("string"==typeof a)throw this.manager.addAmbientError(`An error occurred uploading the attachment ${e.name}`),(0,o.d)("ErrorString",{message:a}),Error(a);if(a instanceof Error)if((0,o.d)(a.name,{message:a.message}),"GenericServerError"===a.name&&a.message.includes("Error creating policy"))this.manager.addAmbientError(t);else throw this.manager.addAmbientError(t),a;else throw this.manager.addAmbientError(t),a}})).finally(()=>{this.manager.dispatch({type:"WAITING_ON_ATTACHMENT",loading:!1})}),a&&n&&l&&this.manager.setPendingThreadId(l.id,n),h}constructor(e,t){(0,a._)(this,"state",void 0),(0,a._)(this,"manager",void 0),this.state=e,this.manager=t}}},61180:(e,t,n)=>{n.d(t,{T:()=>s});var a=n(21728),r=n(96540),i=n(79064);function s(){let e,t,n=(0,a.c)(3),[s,l]=(0,r.useState)(o);n[0]===Symbol.for("react.memo_cache_sentinel")?(e=e=>{l(e),e&&i.Jt.setLastUsedRepository(e)},n[0]=e):e=n[0];let c=e;return n[1]!==s?(t=[s,c],n[1]=s,n[2]=t):t=n[2],t}function o(){return i.Jt.getLastUsedRepository()}},62227:(e,t,n)=>{n.d(t,{A:()=>a});let a={Box:"SingleSignOnBanner-module__Box--jDDJV",Flash:"SingleSignOnBanner-module__Flash--OYpTa",Box_1:"SingleSignOnBanner-module__Box_1--f7GQK",Octicon:"SingleSignOnBanner-module__Octicon--Mg3jx",Box_2:"SingleSignOnBanner-module__Box_2--Se3Ze",ForceWrap:"SingleSignOnBanner-module__ForceWrap--Vz1Sn",Paragraph:"SingleSignOnBanner-module__Paragraph--jaDvQ",ProtectedOrgs_FullList:"SingleSignOnBanner-module__ProtectedOrgs_FullList--siZfg",ProtectedOrgs_Shortened:"SingleSignOnBanner-module__ProtectedOrgs_Shortened--G8LoG",ShieldLockIcon:"SingleSignOnBanner-module__ShieldLockIcon--k2b_L"}},63422:(e,t,n)=>{n.d(t,{L:()=>c});var a=n(74848),r=n(21728),i=n(26108),s=n(34164),o=n(96540);let l={anchor:"IconButtonSelector-module__anchor--t8Bzw",checkIcon:"IconButtonSelector-module__checkIcon--dhq5K"},c=(0,o.forwardRef)((e,t)=>{let n,o,c,u,m,p,h=(0,r.c)(12);return h[0]!==e?({selected:c,icon:n,...o}=e,h[0]=e,h[1]=n,h[2]=o,h[3]=c):(n=h[1],o=h[2],c=h[3]),h[4]===Symbol.for("react.memo_cache_sentinel")?(u=(0,s.$)(l.anchor),h[4]=u):u=h[4],h[5]!==n?(m=e=>(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n,{...e}),(0,a.jsx)(d,{})]}),h[5]=n,h[6]=m):m=h[6],h[7]!==t||h[8]!==o||h[9]!==c||h[10]!==m?(p=(0,a.jsx)(i.K,{ref:t,...o,className:u,icon:m,"data-selected":c}),h[7]=t,h[8]=o,h[9]=c,h[10]=m,h[11]=p):p=h[11],p});c.displayName="IconButtonSelector";let d=()=>{let e,t=(0,r.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsxs)("svg",{className:l.checkIcon,width:"10",height:"10",viewBox:"0 0 10 10",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0,children:[(0,a.jsx)("path",{d:"M7.41406 1.63379C7.75703 1.66786 8.08279 1.80212 8.34961 2.02051L8.47754 2.13672L8.47852 2.1377C8.806 2.46569 8.99015 2.91038 8.99023 3.37402C8.99023 3.7798 8.84934 4.17121 8.59473 4.48242L8.47852 4.61133L5.22754 7.8623C4.89954 8.18968 4.45486 8.37398 3.99121 8.37402C3.52761 8.37402 3.08292 8.18965 2.75488 7.8623L1.49121 6.59863L1.47949 6.58594C1.17042 6.25422 1.00181 5.8156 1.00977 5.3623L1.02148 5.19336C1.06638 4.80245 1.2419 4.43583 1.52246 4.15527C1.84299 3.83487 2.27541 3.65165 2.72852 3.64355L2.89844 3.64844C3.23454 3.67514 3.55557 3.79897 3.82324 4.00391L3.95312 4.1123L3.99121 4.15039L6.00391 2.1377V2.13672C6.33205 1.80893 6.77743 1.625 7.24121 1.625L7.41406 1.63379Z",fill:"#0969DA"}),(0,a.jsx)("path",{d:"M7.41406 1.63379C7.75703 1.66786 8.08279 1.80212 8.34961 2.02051L8.47754 2.13672L8.47852 2.1377C8.806 2.46569 8.99015 2.91038 8.99023 3.37402C8.99023 3.7798 8.84934 4.17121 8.59473 4.48242L8.47852 4.61133L5.22754 7.8623C4.89954 8.18968 4.45486 8.37398 3.99121 8.37402C3.52761 8.37402 3.08292 8.18965 2.75488 7.8623L1.49121 6.59863L1.47949 6.58594C1.17042 6.25422 1.00181 5.8156 1.00977 5.3623L1.02148 5.19336C1.06638 4.80245 1.2419 4.43583 1.52246 4.15527C1.84299 3.83487 2.27541 3.65165 2.72852 3.64355L2.89844 3.64844C3.23454 3.67514 3.55557 3.79897 3.82324 4.00391L3.95312 4.1123L3.99121 4.15039L6.00391 2.1377V2.13672C6.33205 1.80893 6.77743 1.625 7.24121 1.625L7.41406 1.63379Z",stroke:"white",strokeWidth:"2"}),(0,a.jsx)("path",{d:"M7.41406 1.63379C7.75703 1.66786 8.08279 1.80212 8.34961 2.02051L8.47754 2.13672L8.47852 2.1377C8.806 2.46569 8.99015 2.91038 8.99023 3.37402C8.99023 3.7798 8.84934 4.17121 8.59473 4.48242L8.47852 4.61133L5.22754 7.8623C4.89954 8.18968 4.45486 8.37398 3.99121 8.37402C3.52761 8.37402 3.08292 8.18965 2.75488 7.8623L1.49121 6.59863L1.47949 6.58594C1.17042 6.25422 1.00181 5.8156 1.00977 5.3623L1.02148 5.19336C1.06638 4.80245 1.2419 4.43583 1.52246 4.15527C1.84299 3.83487 2.27541 3.65165 2.72852 3.64355L2.89844 3.64844C3.23454 3.67514 3.55557 3.79897 3.82324 4.00391L3.95312 4.1123L3.99121 4.15039L6.00391 2.1377V2.13672C6.33205 1.80893 6.77743 1.625 7.24121 1.625L7.41406 1.63379Z",stroke:"#DDF4FF",strokeWidth:"2"})]}),t[0]=e):e=t[0],e};try{d.displayName||(d.displayName="CheckIcon")}catch{}},65432:(e,t,n)=>{n.d(t,{Bu:()=>h,SC:()=>c,Ti:()=>m,iS:()=>d,k5:()=>l,o4:()=>u,rZ:()=>p});var a=n(82591),r=n(73900),i=n(15838),s=n(94416);let o=0;function l(){o=0,document.dispatchEvent(new Event(a.z.INITIAL)),(0,s.xT)()}function c(e){(0,s.LM)()||(document.dispatchEvent(new Event(a.z.PROGRESS_BAR.START)),document.dispatchEvent(new r.sW(e)),(0,s.Vy)(e),(0,s.ZW)(),(0,s.HK)(),(0,i.E5)())}function d(e={}){f(e)&&(o+=1,document.dispatchEvent(new r.ni((0,s.di)(),o)),m(e))}function u(e={}){if(!f(e))return;o=0;let t=(0,s.my)()||s.BW;document.dispatchEvent(new r.Kq((0,s.di)(),t)),g(),(0,i.Cd)(t),(0,s.xT)()}function m(e={}){if(!f(e))return;let t=(0,s.di)();g(),document.dispatchEvent(new r.RQ(t)),(0,s.Ff)(),(0,s.JA)(t)}function p(e={}){f(e)&&((0,i.Im)(),document.dispatchEvent(new Event(a.z.RENDER)))}function h(){document.dispatchEvent(new Event(a.z.FRAME_UPDATE))}function g(){document.dispatchEvent(new Event(a.z.PROGRESS_BAR.END))}function f({skipIfGoingToReactApp:e,allowedMechanisms:t=[]}={}){return(0,s.LM)()&&(0===t.length||t.includes((0,s.di)()))&&(!e||!(0,s.gc)())}},67475:(e,t,n)=>{n.d(t,{K:()=>i,o:()=>s});var a=n(38621),r=n(35247);function i(e){let t=[];for(let n of e)n.slashCommand&&t.push({key:n.slashCommand.key,name:n.slashCommand.name,description:n.slashCommand.description,icon:n.slashCommand.icon,isNew:n.slashCommand.isNew,order:n.slashCommand.order,suggestions:n.slashCommand.suggestions,execute:async(e,t,a)=>await n.slashCommand.execute(e,t,a)});return r.W.planningAgent&&t.push({key:"brainstorm",name:"Brainstorm",description:"Create a plan and turn them into tasks",icon:a.TasklistIcon,order:1,suggestions:[],execute:(e,t,n,a)=>(a.setUsePlanningIntent(!0),!1)}),t.sort((e,t)=>void 0!==e.order&&void 0!==t.order?e.order-t.order:void 0!==e.order?-1:void 0!==t.order?1:e.name.localeCompare(t.name))}function s(e){return i(e).map(e=>e.key)}},70257:(e,t,n)=>{n.d(t,{V:()=>t1});var a,r=n(74848),i=n(21728),s=n(53419),o=n(88934),l=n(27042),c=n(46251),d=n(69726),u=n(5524),m=n(96540),p=n(82595),h=n(84646),g=n(2635),f=n(79802);function y(){let{threads:e}=(0,g.Pk)(),t=Array.from(e.values()).sort((e,t)=>new Date(t.updatedAt).getTime()-new Date(e.updatedAt).getTime()).map(e=>(0,f.O)(e)).filter(e=>null!==e),n=(0,h.jS)(!0),{data:a}=n;if(void 0===a)return n;let r=new Set,i=[...t.map(e=>a.find(t=>e.id===t.id&&e.owner===t.owner)).filter(e=>{if(void 0===e)return!1;let t=`${e.owner}:${e.id}`;return!r.has(t)&&(r.add(t),!0)}),...[...a].sort((e,t)=>new Date(t.updatedAt).getTime()-new Date(e.updatedAt).getTime()).filter(e=>{let t=`${e.owner}:${e.id}`;return!r.has(t)})].slice(0,5);return{...n,data:i}}var x=n(17485),v=n(25641),_=n(34164);let C={toggleButton:"ToggleButton-module__toggleButton--JlWKX",selected:"ToggleButton-module__selected--fx0LM",icon:"ToggleButton-module__icon--mJLXC",textContent:"ToggleButton-module__textContent--xX6cl"},S=(0,m.forwardRef)((e,t)=>{let n,a,s,o,l,c,d,u,m,p,h,g,f,y,x,v,S=(0,i.c)(33);if(S[0]!==e){let{icon:t,isSelected:r,onClick:i,hasMenu:m,isMenuOpen:p,selectedItemLabel:h,children:g,...f}=e;s=t,c=i,d=h,n=g,l=void 0!==r&&r,a=void 0!==m&&m,o=void 0!==p&&p,u=Object.keys(f).reduce((e,t)=>(t.startsWith("aria-")&&(e[t]=f[t]),e),{}),S[0]=e,S[1]=n,S[2]=a,S[3]=s,S[4]=o,S[5]=l,S[6]=c,S[7]=d,S[8]=u}else n=S[1],a=S[2],s=S[3],o=S[4],l=S[5],c=S[6],d=S[7],u=S[8];let j=u;S[9]!==a||S[10]!==o||S[11]!==l?(m=()=>a?{"aria-haspopup":"menu","aria-expanded":o}:{"aria-pressed":l},S[9]=a,S[10]=o,S[11]=l,S[12]=m):m=S[12];let b=m;S[13]!==b?(p=b(),S[13]=b,S[14]=p):p=S[14],S[15]!==j||S[16]!==p?(h={...j,...p},S[15]=j,S[16]=p,S[17]=h):h=S[17];let w=h,N=a&&d?d:n;S[18]!==c?(g=e=>{c&&c(e)},S[18]=c,S[19]=g):g=S[19];let I=g,E=l&&C.selected;return S[20]!==E?(f=(0,_.$)(C.toggleButton,E),S[20]=E,S[21]=f):f=S[21],S[22]!==s?(y=!!s&&(0,r.jsx)("span",{className:C.icon,children:s}),S[22]=s,S[23]=y):y=S[23],S[24]!==N?(x=(0,r.jsx)("span",{className:C.textContent,children:N}),S[24]=N,S[25]=x):x=S[25],S[26]!==w||S[27]!==I||S[28]!==t||S[29]!==f||S[30]!==y||S[31]!==x?(v=(0,r.jsxs)("button",{ref:t,type:"button",className:f,onClick:I,...w,children:[y,x]}),S[26]=w,S[27]=I,S[28]=t,S[29]=f,S[30]=y,S[31]=x,S[32]=v):v=S[32],v});S.displayName="ToggleButton";var j=n(15033),b=n(35247);function w(){let[e,t]=(0,m.useState)(!1),n=(0,o.Zp)(),{handleSpaceSelect:a,clearSpaceSelection:i,activeCopilotSpaceId:g,readOnly:f}=(0,x.C)(),_=(0,m.useRef)(null),C=(0,m.useRef)(null),[w,N]=(0,m.useState)(!1),I=()=>{N(!0),(0,s.BI)("dotcom_chat.activate",{target:"SPACES_INPUT_CREATE_SPACE",mode:"immersive"})},{data:E=[],isLoading:T}=y(),{data:A=[],isLoading:R}=(0,h.jS)(!0),k=(0,h.BV)(),L=T||R;if((0,m.useEffect)(()=>{if(L&&e&&_.current)_.current.focus();else if(!L&&e&&C.current){let e=setTimeout(()=>{C.current?.focus()},0);return()=>clearTimeout(e)}},[L,e]),!k||f)return;let P=g?A.find(e=>e.id===g.id&&e.owner===g.owner):void 0,M=P?P.name:"Spaces",O="260px";return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(l.W,{open:e,onOpenChange:e=>{b.W.spacesAsAttachmentsEnabled&&e&&(0,s.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_COPILOT_SPACES",mode:"immersive"}),t(e)},children:[(0,r.jsx)(l.W.Anchor,{children:(0,r.jsx)(S,{icon:(0,r.jsx)(p.I,{icon:"spaces"}),isSelected:!!P,onClick:()=>{},hasMenu:!0,"aria-label":"Select a copilot space for this conversation",isMenuOpen:e,selectedItemLabel:M,children:M})}),(0,r.jsx)(l.W.Overlay,{style:E.length>0?{width:O}:{},children:L?(0,r.jsxs)(c.B,{direction:"horizontal",align:"center",justify:"center",padding:"normal",style:{width:O},children:[(0,r.jsx)("div",{ref:_,role:"status",className:"sr-only",tabIndex:-1,children:"Loading spaces"}),(0,r.jsx)(d.A,{})]}):(0,r.jsx)(u.l,{selectionVariant:"single",role:"menu","aria-label":"Select a space",children:E.length>0?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(u.l.Group,{children:[(0,r.jsx)(u.l.GroupHeading,{"aria-label":"Recent spaces",children:"Recent"}),E.map((e,n)=>{let o=!!g&&e.id===g.id&&e.owner===g.owner;return(0,r.jsx)(u.l.Item,{ref:0===n?C:void 0,role:"menuitemradio",onSelect:()=>{g&&e.id===g.id&&e.owner===g.owner?i():(a({id:e.id,owner:e.owner}),(0,s.BI)("dotcom_chat.activate",{target:"SPACES_INPUT_SELECT_SPACE",space:`${e.owner}/${e.id}`})),t(!1)},selected:o,"aria-checked":o,children:(0,r.jsx)("span",{children:e.name})},`${e.owner}, ${e.id}`)})]}),(0,r.jsx)(u.l.Divider,{}),(0,r.jsx)(u.l.Item,{onSelect:()=>{n(v.VR),(0,s.BI)("dotcom_chat.activate",{target:"SPACES_INPUT_VIEW_ALL_SPACES",mode:"immersive"})},children:"View all spaces"}),(0,r.jsx)(u.l.Divider,{}),(0,r.jsx)(u.l.Item,{onSelect:I,children:"Create a space"})]}):(0,r.jsx)(u.l.Item,{ref:C,onSelect:I,children:"Create your first space"})})})]}),w?(0,r.jsx)(j.D,{closeDialog:()=>{(0,s.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_CREATE_DIALOG_CLOSE",mode:"immersive"}),N(!1)}}):null]})}try{w.displayName||(w.displayName="SpacesSelect")}catch{}var N=n(29731),I=n(83494),E=n(8625),T=n(38621),A=n(52870),R=n(59121),k=n(21373),L=n(94747),P=n(96379),M=n(7277),O=n(47970),F=n(47789),D=n(33592),B=n(79216),$=n(20330);let z=/^(?:https:\/\/)?(?:www\.)?(figma\.com\/.+)$/,U=class FigmaNotAuthorizedError extends Error{constructor(){super(),this.name="FigmaNotAuthorizedError"}};async function V(e){let t=await (0,P.lS)(`/copilot/immersive/figma-link?item_url=${e}`);if(!t.ok){if(403===t.status)throw new U;throw Error(`Failed to fetch Figma reference data (${t.status}: ${t.statusText})`)}return await t.json()}async function W(e){let{itemUrl:t}=e,n=await (0,P.lS)(`/copilot/chat-links?item_url=${t}`);if(!n.ok)throw Error(`Failed to fetch reference data (${n.status}: ${n.statusText})`);return await n.json()}var H=n(88431),q=n(96459),K=n(17925),G=n(79064),Q=n(67475),J=n(72303);let Y=async(e,t,n,a,r,i)=>{if((e[0]??"")!=="/")return!1;e=e.substring(1);let o=(({manager:e,chatState:t,plugins:n})=>{let a="assistive"===t.mode?[{label:"Delete conversation",key:"delete",icon:T.TrashIcon,action:async(t,n)=>{e.dispatch({type:"SLASH_COMMANDS_LOADING"});try{let t=(0,J.W)(n);if(!t)throw Error("Thread not found");await e.deleteThread(t),(0,s.BI)("dotcom_chat.activate",{target:"SLASH_COMMAND_DELETE_THREAD",mode:n.mode}),e.dispatch({type:"SLASH_COMMANDS_LOADED"})}catch{e.dispatch({type:"SLASH_COMMANDS_ERROR"})}return!0}},{label:"Rename conversation",key:"rename",icon:T.PencilIcon,action:async(t,n)=>{e.dispatch({type:"SLASH_COMMANDS_LOADING"});try{let a=(0,J.W)(n);if(!a)throw Error("Thread not found");await e.renameThread(a,t),(0,s.BI)("dotcom_chat.activate",{target:"SLASH_COMMAND_RENAME",mode:n.mode}),e.dispatch({type:"SLASH_COMMANDS_LOADED"})}catch{e.dispatch({type:"SLASH_COMMANDS_ERROR"})}return!0}},{label:"Start a new conversation",key:"new",icon:T.PlusIcon,action:async(t,n)=>{e.dispatch({type:"SLASH_COMMANDS_LOADING"});try{await e.selectThread(null),(0,s.BI)("dotcom_chat.activate",{target:"SLASH_COMMAND_NEW_THREAD",mode:n.mode}),e.dispatch({type:"SLASH_COMMANDS_LOADED"})}catch{e.dispatch({type:"SLASH_COMMANDS_ERROR"})}return!0}}]:[];if("immersive"===t.mode&&b.W.chatInputCommands)for(let t of(0,Q.K)(n))t.execute&&a.push({key:t.key,action:async(n,a,r)=>await t.execute(n,a,r,e)});return a})({manager:n,chatState:t,plugins:r}).filter(t=>{let n=(e.split(" ",1)[0]??"").toLowerCase().trim();return t.key.toLowerCase().includes(n)});if(1!==o.length)return!1;let l=o[0],c=e.substring(l.key.length).trim();return i&&(i.selectedRepo||i.selectedBranch)&&(c=JSON.stringify({text:c,selectedRepo:i.selectedRepo,selectedBranch:i.selectedBranch})),await l.action(c,t,a)};var Z=n(46062),X=n(56708),ee=n(61180);function et(e,t,n){if("immersive"===e&&/^\/copilot(\/agents|\/spaces\/[a-zA-Z0-9-_]+\/[0-9]+)?\/?$/.test(t)){let e=n.get("prompt");if(e)return e}}var en=n(26239),ea=n(60905),er=n(76166),ei=n(72439),es=n(23657),eo=n(72206);function el({openCreateSpaceDialog:e,setPendingSpace:t,clearSpaceSelection:n,activeCopilotSpaceId:a,readOnly:i}){let p=(0,D.b)(),[g,f]=(0,m.useState)(!1),x=(0,o.Zp)(),_=(0,m.useRef)(null),C=(0,m.useRef)(null),[S,b]=(0,m.useState)(!1),w=()=>{b(!0),e(!0),(0,s.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_COPILOT_SPACES_CREATE_SPACE",mode:"immersive"})},{data:N=[],isLoading:I}=y(),{isLoading:E}=(0,h.jS)(!0),A=(0,h.BV)(),R=I||E;if((0,m.useEffect)(()=>{if(R&&g&&_.current)_.current.focus();else if(!R&&g&&C.current){let e=setTimeout(()=>{C.current?.focus()},0);return()=>clearTimeout(e)}},[R,g]),!A||i)return;let k="260px";return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(l.W,{open:g,onOpenChange:e=>{e&&(0,s.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_COPILOT_SPACES",mode:"immersive"}),f(e)},children:[(0,r.jsx)(l.W.Anchor,{children:(0,r.jsxs)(u.l.Item,{onSelect:()=>{(0,s.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_COPILOT_SPACES",mode:"immersive"})},children:[(0,r.jsx)(u.l.LeadingVisual,{children:(0,r.jsx)(T.SpaceIcon,{})}),"Spaces\u2026"]})}),(0,r.jsx)(l.W.Overlay,{style:N.length>0?{width:k}:{},children:R?(0,r.jsxs)(c.B,{direction:"horizontal",align:"center",justify:"center",padding:"normal",style:{width:k},children:[(0,r.jsx)("div",{ref:_,role:"status",className:"sr-only",tabIndex:-1,children:"Loading spaces"}),(0,r.jsx)(d.A,{})]}):(0,r.jsx)(u.l,{selectionVariant:"single",role:"menu","aria-label":"Select a space",children:N.length>0?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(u.l.Group,{children:[(0,r.jsx)(u.l.GroupHeading,{"aria-label":"Recent spaces",children:"Recent"}),N.map((e,i)=>{let o=!!a&&e.id===a.id&&e.owner===a.owner;return(0,r.jsx)(u.l.Item,{ref:0===i?C:void 0,role:"menuitemradio",onSelect:()=>{a&&e.id===a.id&&e.owner===a.owner?n():(p.addReference({...e,type:"copilot-space"},"spaces"),t({id:e.id,owner:e.owner}),(0,s.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_COPILOT_SPACES_SELECT_SPACE",space:`${e.owner}/${e.id}`})),f(!1)},selected:o,"aria-checked":o,children:(0,r.jsx)("span",{children:e.name})},`${e.owner}, ${e.id}`)})]}),(0,r.jsx)(u.l.Divider,{}),(0,r.jsx)(u.l.Item,{onSelect:()=>{x(v.VR),(0,s.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_COPILOT_SPACES_VIEW_ALL_SPACES",mode:"immersive"})},children:"View all spaces"}),(0,r.jsx)(u.l.Divider,{}),(0,r.jsx)(u.l.Item,{onSelect:w,children:"Create a space"})]}):(0,r.jsx)(u.l.Item,{ref:C,onSelect:w,children:"Create your first space"})})})]}),S?(0,r.jsx)(j.D,{closeDialog:()=>{(0,s.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_CREATE_DIALOG_CLOSE",mode:"immersive"}),b(!1)}}):null]})}try{el.displayName||(el.displayName="SpacesSelectNew")}catch{}var ec=n(14521),ed=n(99054),eu=n(77430);function em(e){let t,n,a,o,c,d,m=(0,i.c)(24),{onSelectPanel:p,onSelectAgent:h}=e,{availableAgents:g,showLimit:f,disabled:y,loading:x}=(0,ed.JE)(),v=g&&g.length>0;if(x){let e;return m[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsxs)(u.l.Item,{disabled:!0,children:[(0,r.jsx)(u.l.LeadingVisual,{children:(0,r.jsx)(T.AppsIcon,{})}),"Extensions\u2026"]}),m[0]=e):e=m[0],e}if(y){let e,t,n;return m[1]!==p?(e=()=>{(0,s.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_EXTENSION_NOT_SUPPORTED",mode:"immersive"}),p("agents-not-supported")},m[1]=p,m[2]=e):e=m[2],m[3]===Symbol.for("react.memo_cache_sentinel")?(t=(0,r.jsx)(u.l.LeadingVisual,{children:(0,r.jsx)(T.AppsIcon,{})}),m[3]=t):t=m[3],m[4]!==e?(n=(0,r.jsxs)(u.l.Item,{onSelect:e,children:[t,"Extensions\u2026"]}),m[4]=e,m[5]=n):n=m[5],n}if(!v){let e,t,n;return m[6]!==p?(e=()=>{(0,s.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_EXTENSION_NOT_AVAILABLE",mode:"immersive"}),p("no-agents-available")},m[6]=p,m[7]=e):e=m[7],m[8]===Symbol.for("react.memo_cache_sentinel")?(t=(0,r.jsx)(u.l.LeadingVisual,{children:(0,r.jsx)(T.AppsIcon,{})}),m[8]=t):t=m[8],m[9]!==e?(n=(0,r.jsxs)(u.l.Item,{onSelect:e,children:[t,"Extensions\u2026"]}),m[9]=e,m[10]=n):n=m[10],n}if(m[11]===Symbol.for("react.memo_cache_sentinel")?(t=(0,r.jsx)(l.W.Anchor,{children:(0,r.jsxs)(u.l.Item,{onSelect:eh,children:[(0,r.jsx)(u.l.LeadingVisual,{children:(0,r.jsx)(T.AppsIcon,{})}),"Extensions\u2026"]})}),m[11]=t):t=m[11],m[12]!==g||m[13]!==h||m[14]!==f){let e;m[16]!==h||m[17]!==f?(e=e=>(0,r.jsxs)(u.l.Item,{onSelect:()=>{(0,s.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_EXTENSION_SELECTED",mode:"immersive"}),h(e)},children:[(0,r.jsx)(u.l.LeadingVisual,{children:(0,r.jsx)(eu.r,{src:e.avatarUrl})}),e.name,!f&&(0,r.jsxs)(u.l.Description,{variant:"inline",truncate:!0,children:[ed.Z3,e.slug]}),f&&(0,r.jsx)(u.l.Description,{variant:"block",children:"Start a new conversation to use other extensions."})]},e.slug),m[16]=h,m[17]=f,m[18]=e):e=m[18],n=g.map(e),m[12]=g,m[13]=h,m[14]=f,m[15]=n}else n=m[15];return m[19]===Symbol.for("react.memo_cache_sentinel")?(a=(0,r.jsx)(u.l.Divider,{}),m[19]=a):a=m[19],m[20]===Symbol.for("react.memo_cache_sentinel")?(o=(0,r.jsx)(u.l.LeadingVisual,{children:(0,r.jsx)(T.TelescopeIcon,{})}),m[20]=o):o=m[20],m[21]===Symbol.for("react.memo_cache_sentinel")?(c=(0,r.jsxs)(u.l.LinkItem,{href:ed.bn,onClick:ep,children:[o,"Marketplace",(0,r.jsx)(u.l.TrailingVisual,{children:(0,r.jsx)(T.LinkExternalIcon,{})})]}),m[21]=c):c=m[21],m[22]!==n?(d=(0,r.jsxs)(l.W,{children:[t,(0,r.jsx)(l.W.Overlay,{width:"small",children:(0,r.jsxs)(u.l,{children:[n,a,c]})})]}),m[22]=n,m[23]=d):d=m[23],d}function ep(){(0,s.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_EXTENSION_MARKETPLACE",mode:"immersive"})}function eh(){(0,s.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_EXTENSION",mode:"immersive"})}try{em.displayName||(em.displayName="AgentMenu")}catch{}var eg=n(57352),ef=n(15220);let ey={AgentsDialogsMainContainer:"AgentsDialogs-module__AgentsDialogsMainContainer--ymBth",dialogContentWrapper:"AgentsDialogs-module__dialogContentWrapper--v7abd",dialogTitle:"AgentsDialogs-module__dialogTitle--tEo3x",dialogDescription:"AgentsDialogs-module__dialogDescription--LPgKm",documentationLinkContainer:"AgentsDialogs-module__documentationLinkContainer--ydpZ9",AgentsDialogsAlternateContainer:"AgentsDialogs-module__AgentsDialogsAlternateContainer--iIZFy",alertIconContainer:"AgentsDialogs-module__alertIconContainer--jNjdz"};function ex(e){let t,n,a=(0,i.c)(4),{onClose:s,returnFocusRef:o}=e;return a[0]===Symbol.for("react.memo_cache_sentinel")?(t={narrow:"fullscreen",regular:"center"},a[0]=t):t=a[0],a[1]!==s||a[2]!==o?(n=(0,r.jsx)(ef.l,{width:"large",title:"Extensions",position:t,onClose:s,returnFocusRef:o,renderBody:ev}),a[1]=s,a[2]=o,a[3]=n):n=a[3],n}function ev(){return(0,r.jsx)("div",{className:ey.AgentsDialogsMainContainer,children:(0,r.jsxs)("div",{className:ey.dialogContentWrapper,children:[(0,r.jsx)(T.TelescopeIcon,{size:24}),(0,r.jsx)("h3",{className:ey.dialogTitle,children:"Chat with your favorite tools and services"}),(0,r.jsx)("p",{className:ey.dialogDescription,children:"Browse the marketplace to find extensions for the tools and services you rely on"}),(0,r.jsx)(k.Q,{as:"a",href:ed.bn,children:"Browse marketplace"}),(0,r.jsx)("div",{className:ey.documentationLinkContainer,children:(0,r.jsx)(eg.A,{href:"https://gh.io/copilot-extensions-docs",children:"Documentation"})})]})})}function e_(e){let t,n,a,s=(0,i.c)(9),{onClose:o,returnFocusRef:l}=e,c=(0,D.b)(),d=(0,g.Pk)(),u=(0,h.BV)(),m=(0,Z.GF)(d.availableModels);return s[0]===Symbol.for("react.memo_cache_sentinel")?(t={narrow:"fullscreen",regular:"center"},s[0]=t):t=s[0],s[1]!==u||s[2]!==m||s[3]!==c?(n=()=>(0,r.jsx)("div",{className:ey.AgentsDialogsAlternateContainer,children:(0,r.jsxs)("div",{className:ey.dialogContentWrapper,children:[(0,r.jsx)("div",{className:ey.alertIconContainer,children:(0,r.jsx)(T.AlertIcon,{size:24})}),(0,r.jsxs)("h3",{className:ey.dialogTitle,children:[u?"Copilots and extensions":"Extensions"," aren't supported by this model"]}),(0,r.jsxs)("p",{className:ey.dialogDescription,children:["Switch back to the ",m.displayName," model or start a new conversation"]}),(0,r.jsx)(k.Q,{onClick:()=>{c.selectThread(null),c.selectModel(m)},children:"New conversation"})]})}),s[1]=u,s[2]=m,s[3]=c,s[4]=n):n=s[4],s[5]!==o||s[6]!==l||s[7]!==n?(a=(0,r.jsx)(ef.l,{width:"large",title:"Extensions",position:t,onClose:o,returnFocusRef:l,renderBody:n}),s[5]=o,s[6]=l,s[7]=n,s[8]=a):a=s[8],a}try{ex.displayName||(ex.displayName="NoAgentsAvailableDialog")}catch{}try{e_.displayName||(e_.displayName="AgentsNotSupportedDialog")}catch{}var eC=n(77809),eS=n(97564);function ej(e){let t,n,a,s,o=(0,i.c)(14),{isOpen:l,onClose:c,initialRepo:d,onRepoSelect:u}=e,p=(0,D.b)(),{findFileWorkerPath:h}=(0,g.Pk)(),f=(0,m.useRef)(null);o[0]!==p||o[1]!==c?(t=async e=>{let t=await (0,eS.V)(e.repositoryId),n=(0,v.qS)(t);p.addReference(n,"references-menu"),c()},o[0]=p,o[1]=c,o[2]=t):t=o[2];let y=t;o[3]!==p||o[4]!==c?(n=async e=>{if(0===e.length)return void c();let t=await (0,eS.V)(e[0].repositoryId);for(let n of e.map(e=>"github_folder"===e.type?(0,v.OC)(e.filePath,t):(0,v.Od)(e.filePath,t)))p.addReference(n,"references-menu");c()},o[3]=p,o[4]=c,o[5]=n):n=o[5];let x=n;return l?(o[6]===Symbol.for("react.memo_cache_sentinel")?(a=[],o[6]=a):a=o[6],o[7]!==h||o[8]!==x||o[9]!==y||o[10]!==d||o[11]!==c||o[12]!==u?(s=(0,r.jsx)(eC.Q,{formData:a,onCancel:c,onSaveFiles:x,onSaveRepository:y,findFileWorkerPath:h,attachmentButtonRef:f,initialRepo:d,onRepoSelect:u,allowFolderReferences:!0,maxFileCount:20}),o[7]=h,o[8]=x,o[9]=y,o[10]=d,o[11]=c,o[12]=u,o[13]=s):s=o[13],s):null}try{ej.displayName||(ej.displayName="CopilotFilePicker")}catch{}var eb=n(82075),ew=n(26108),eN=n(5839),eI=n(31604),eE=n(81960),eT=n(69497),eA=n(10095),eR=n(87448),ek=n(40961);let eL={disabledForPreviewModelsPanel:"KnowledgeSelectPanel-module__disabledForPreviewModelsPanel--5fRzV",knowledgeBaseIcon:"KnowledgeSelectPanel-module__knowledgeBaseIcon--peP3C",KnowledgeSelectPanelContainer:"KnowledgeSelectPanel-module__KnowledgeSelectPanelContainer--_RbkD",panelHeader:"KnowledgeSelectPanel-module__panelHeader--kWY60",headerContent:"KnowledgeSelectPanel-module__headerContent--AQ0gC",panelTitle:"KnowledgeSelectPanel-module__panelTitle--oQLU4",emptyStateContainer:"KnowledgeSelectPanel-module__emptyStateContainer--Rk1JI",emptyStateContent:"KnowledgeSelectPanel-module__emptyStateContent--BiaDj",emptyStateMessage:"KnowledgeSelectPanel-module__emptyStateMessage--S8iOa",emptyStateDescription:"KnowledgeSelectPanel-module__emptyStateDescription--d4gqH",emptyStateInstructions:"KnowledgeSelectPanel-module__emptyStateInstructions--pOJKv",actionButtonsContainer:"KnowledgeSelectPanel-module__actionButtonsContainer--NjnfZ",createButton:"KnowledgeSelectPanel-module__createButton--AfP6G",organizationsSection:"KnowledgeSelectPanel-module__organizationsSection--YaCxl",sectionTitle:"KnowledgeSelectPanel-module__sectionTitle--hm4Tw",organizationsList:"KnowledgeSelectPanel-module__organizationsList--UvNcy",organizationLink:"KnowledgeSelectPanel-module__organizationLink--UkWa7",organizationAvatar:"KnowledgeSelectPanel-module__organizationAvatar--igPHI",organizationName:"KnowledgeSelectPanel-module__organizationName--V_3Jw",ssoNotice:"KnowledgeSelectPanel-module__ssoNotice--EKDTO"},eP=(0,m.forwardRef)(function({open:e,setOpen:t,...n},a){return(0,r.jsx)(ew.K,{ref:a,"aria-expanded":!!e||void 0,"aria-haspopup":!0,"aria-label":"Attach knowledge base","aria-labelledby":void 0,icon:T.BookIcon,onClick:()=>t(!e),variant:"invisible",className:eL.knowledgeBaseIcon,...n})});function eM({disabledForPreviewModelsProps:e,emptyKnowledgeBaseProps:t,open:n,onOpenChange:a,anchorRef:i}){let s=(0,g.Pk)(),o=(0,D.b)(),l=(0,eb.A)("localStorage"),{knowledgeBases:c}=s,[d,u]=(0,m.useState)([]),[p,h]=(0,m.useState)(!0),[f,y]=(0,m.useState)(""),x=(0,m.useRef)(null),_=l.getItem("lastUsedKnowledgeBaseId")||"",C=l.getItem("lastUsedKnowledgeBaseOrg")||"",{currentReferences:S}=s;(0,m.useEffect)(()=>{n||y("")},[n]);let j=(0,m.useMemo)(()=>""===f?c:c.filter(e=>e.name.toLowerCase().includes(f.toLowerCase())),[f,c]),b=(0,m.useMemo)(()=>j.reduce((e,t)=>{let n=e.find(e=>e.org===t.ownerLogin);return n?n.docsets.push(t):e.push({org:t.ownerLogin,docsets:[t]}),e},[]),[j]),[w,I]=(0,m.useState)(!1),E=p||"pending"===s.knowledgeBasesLoading.state,T=w||"error"===s.knowledgeBasesLoading.state,A=(0,m.useRef)(!1);(0,m.useEffect)(()=>{let e=async()=>{h(!0),await o.fetchKnowledgeBases();let e=await o.service.listAdministratedCopilotEnterpriseOrganizations();e.ok?u(e.payload||[]):I(!0),h(!1)};n&&!A.current&&(A.current=!0,e())},[n,o]);let R=e$();if(s.model?.hasLimitedCapabilities)return(0,r.jsx)(eU,{open:n,setOpen:a,...e});if(!E&&0===c.length)return(0,r.jsx)(eO,{administratedCopilotEnterpriseOrganizations:d,persistentPanelStyles:{position:["fixed","fixed","absolute"],bottom:["60px","60px","0 !important"],"@media screen and (max-height: 480px)":{bottom:"0 !important"},top:"initial !important",left:["18px","18px","calc(50% - 360px) !important"],maxHeight:"100%"},open:n,setOpen:a,mode:s.mode,...t});let k=j.sort((e,t)=>e.id===_?-1:+(t.id===_)).map(e=>({id:e.id,key:e.id,groupId:e.ownerLogin,text:e.name,description:e.description,disabled:!e.canChat,descriptionVariant:"block"})),L=[...b].sort((e,t)=>e.org===C?-1:+(t.org===C)).map(e=>({id:e.org,key:e.org,text:e.org,groupId:e.org,header:{title:e.org}})),P=c.filter(e=>S.some(t=>(0,v.P)(t)&&t.id===e.id));return(0,r.jsx)("div",{ref:x,...(0,N.G)("knowledge-select-panel"),children:(0,r.jsx)(eN.X,{title:"Select knowledge bases",subtitle:"Knowledge bases consolidate content from multiple repositories for an improved chat experience.",onCancel:()=>{(0,ek.flushSync)(()=>a(!1)),i.current?.focus()},open:n,renderAnchor:null,anchorRef:i,onOpenChange:a,loading:E,items:k,onFilterChange:y,groupMetadata:L,notice:null!==R?{text:R,variant:"info"}:void 0,message:T?{variant:"error",title:"Failed to load knowledge bases",body:"Try again later"}:0===b.length?{variant:"empty",title:`No knowledge bases found for \`${f}\``,body:"Try a different search term"}:void 0,...{selected:P,onSelectedChange:e=>(e=>{var t=e.map(e=>c.find(t=>t.id===e.id)).filter(e=>void 0!==e);let n=t.filter(e=>(0,v.P)(e)&&!S.some(t=>(0,v.P)(t)&&t.id===e.id));for(let e of S.filter(e=>(0,v.P)(e)&&!t.some(t=>t.id===e.id)))o.removeReference(e);for(let e of n)o.addReference((0,v.UU)(e),"docsetMenu")})(e)},variant:"modal",overlayProps:{maxHeight:"xlarge"},width:"large"})})}function eO({administratedCopilotEnterpriseOrganizations:e,anchorRef:t,open:n,setOpen:a}){let i=e$(),s=t?{anchorRef:t,renderAnchor:null}:{anchorRef:void 0,renderAnchor:({...e})=>(0,r.jsx)(eP,{open:n,setOpen:a,...e})},o=e?.length===0;return(0,r.jsx)(eI.T,{open:n,onOpen:()=>a(!0),onClose:()=>a(!1),overlayProps:{anchorSide:"outside-bottom",style:{width:"min(100%, 350px)"}},...s,children:(0,r.jsxs)(eR.az,{role:"dialog","aria-labelledby":"knowledge-base-dialog-title",sx:{...o?{height:"100%"}:{}},className:eL.KnowledgeSelectPanelContainer,...(0,N.G)("empty-knowledge-base-picker"),children:[(0,r.jsx)("div",{className:eL.panelHeader,children:(0,r.jsxs)("div",{className:eL.headerContent,children:[(0,r.jsx)(eE.A,{id:"knowledge-base-dialog-title",as:"h4",className:eL.panelTitle,children:"Attach a knowledge base"}),(0,r.jsx)(ew.K,{unsafeDisableTooltip:!0,"aria-label":"Close",icon:T.XIcon,variant:"invisible",onClick:()=>a(!1)})]})}),(0,r.jsxs)(eR.az,{sx:{...o?{flexGrow:1,maxHeight:"100%",overflowY:"auto"}:{}},className:eL.emptyStateContainer,children:[(0,r.jsx)(eA.A,{icon:T.BookIcon,size:"medium",className:eL.knowledgeBaseIcon}),(0,r.jsxs)(eR.az,{sx:{...o?{maxHeight:"100%"}:{}},className:eL.emptyStateContent,children:[(0,r.jsx)("span",{className:eL.emptyStateMessage,children:"You don't have any knowledge bases"}),(0,r.jsxs)("div",{className:eL.emptyStateDescription,children:[(0,r.jsx)("p",{children:"Knowledge bases consolidate content from multiple repositories for an improved chat experience."}),o&&(0,r.jsx)("p",{className:eL.emptyStateInstructions,...(0,N.G)("ask-admin-for-knowledge-base"),children:"Speak with an organization owner about creating a knowledge base for your organization."})]}),e.length>0&&(0,r.jsx)(eF,{administratedCopilotEnterpriseOrganizations:e})]})]}),i&&(0,r.jsx)("div",{className:eL.actionButtonsContainer,children:(0,r.jsx)(eB,{message:i})})]})})}function eF({administratedCopilotEnterpriseOrganizations:e}){return 1===e.length?(0,r.jsx)(k.Q,{as:"a",href:ez(e[0]),className:eL.createButton,...(0,N.G)("create-knowledge-base-button"),children:"Create a knowledge base"}):(0,r.jsxs)("div",{className:eL.organizationsSection,...(0,N.G)("create-knowledge-base-dropdown"),children:[(0,r.jsx)(eE.A,{as:"h3",className:eL.sectionTitle,children:"Create a knowledge base for an organization"}),(0,r.jsx)(u.l,{className:eL.organizationsList,children:e.map(e=>(0,r.jsx)(eD,{org:e},e.id))})]})}function eD({org:e}){return(0,r.jsx)(u.l.Item,{children:(0,r.jsxs)(eg.A,{href:ez(e),className:eL.organizationLink,children:[(0,r.jsx)(eu.r,{square:!0,src:e.avatarUrl,alt:e.login,"aria-hidden":"true",className:eL.organizationAvatar}),(0,r.jsx)(eT.A,{inline:!0,title:e.login,className:eL.organizationName,children:e.login})]})})}function eB({message:e}){return e?(0,r.jsx)("div",{"data-testid":"knowledge-select-panel-sso",className:eL.ssoNotice,children:e}):null}function e$(){let e=(0,g.Pk)(),t=e.ssoOrganizations.map(e=>e.login);for(let n of e.knowledgeBases)for(let e of n.protectedOrganizations)t.includes(e)||t.push(e);if(!t||0===t.length)return null;{if(1===t.length)return`Single sign-on to see content from ${t[0]}.`;if(2===t.length)return`Single sign-on to see content from ${t[0]} and ${t[1]}.`;let e=t.length-2;return`Single sign-on to see content from ${t[0]}, ${t[1]}, and ${e} organization${e>1?"s":""}`}}function ez(e){return`/organizations/${e.login}/settings/copilot/chat_settings/new`}function eU({anchorRef:e,open:t,setOpen:n}){let a=e?{anchorRef:e,renderAnchor:null}:{anchorRef:void 0,renderAnchor:({...e})=>(0,r.jsx)(eP,{open:t,setOpen:n,...e})};return(0,r.jsx)(eI.T,{open:t,onOpen:()=>n(!0),onClose:()=>n(!1),...a,children:(0,r.jsxs)("div",{className:(0,_.$)("m-3 d-flex flex-column flex-items-center text-center",eL.disabledForPreviewModelsPanel),children:[(0,r.jsx)(T.AlertIcon,{className:"fgColor-attention mb-3"}),(0,r.jsx)("h3",{className:"h5 mb-2",children:"Knowledge bases aren't supported by this model"}),(0,r.jsx)("span",{className:"text-small fgColor-muted",children:"Switch back to the GPT-4o model or start a new conversation"})]})})}try{eP.displayName||(eP.displayName="KBIconButton")}catch{}try{(a=KBIconButtonInner).displayName||(a.displayName="KBIconButtonInner")}catch{}try{eM.displayName||(eM.displayName="KnowledgeSelectPanel")}catch{}try{eO.displayName||(eO.displayName="EmptyKnowledgeBase")}catch{}try{eF.displayName||(eF.displayName="CreateKnowledgeBaseButton")}catch{}try{eD.displayName||(eD.displayName="CreateKnowledgeBaseActionRow")}catch{}try{eB.displayName||(eB.displayName="SSOFooter")}catch{}try{eU.displayName||(eU.displayName="DisabledForPreviewModels")}catch{}var eV=n(35673),eW=n(71363);let eH=(0,m.memo)(({panel:e,onPanelChange:t,anchorRef:n,initialRepo:a,onRepoSelect:i,...o})=>{let{inputRef:c}=o,d=(0,D.b)(),p=(0,g.Pk)(),h=(0,F.qw)(),{supportedAttachmentTypes:f,supportedReferenceTypes:y}=function(){let e=(0,g.Pk)(),t=null!==(0,ec.G)(),n=["upload"],a=e.renderKnowledgeBases&&(e.currentTopic&&(0,v.Z6)(e.currentTopic)||!e.currentTopic),r=b.W.knowledgeBasesDisabled;return t||n.push("repositories"),!a||t||r||n.push("knowledge-bases"),!t&&b.W.spacesAsAttachmentsEnabled&&n.push("copilot-spaces"),t||n.push("agents"),{supportedAttachmentTypes:n,supportedReferenceTypes:t?["files"]:["files","folders","symbols"]}}(),{model:_}=(0,g.bP)("model"),C="immersive"===p.mode&&!!_.capabilities?.supports?.vision,S=(0,ed.kw)(o),w=(0,m.useRef)(null),I=(0,ec.G)(),E=(0,es.FQ)(!0),{handleSpaceSelect:A,clearSpaceSelection:R,activeCopilotSpaceId:k,readOnly:L}=(0,x.C)(),P=!!(I&&E),[M,O]=(0,m.useState)(!1);return(0,r.jsxs)("div",{children:[f.includes("upload")&&(0,r.jsx)("input",{id:"image-uploader",...(0,N.G)("image-uploader"),hidden:!0,ref:w,type:"file",accept:[C?ea.s.getAllowedImageFileExtensions(_):"",ei.E.getTextFileExtensions()].join(","),multiple:!0,onChange:e=>{if(!e.target.files)return;let[t,n]=ea.s.getAllowedFiles([...e.target.files],_),a=[];for(let e of(C?new ea.s(p,d).addImageAttachments(t,"menu",I,P):a.push(...t),n))new ei.E(d).addAttachment(e);for(let e of a)(0,s.BI)("dotcom_chat.upload_unsupported_file",{name:e.name,type:e.type,size:e.size});e.currentTarget.value=""}}),(0,r.jsx)(l.W,{anchorRef:n,open:"attachment-types"===e,onOpenChange:e=>t(t=>e&&null===t?"attachment-types":e||"attachment-types"!==t?t:null),children:(0,r.jsx)(l.W.Overlay,{width:"small",side:"outside-bottom",align:"start",portalContainerName:"assistive"===p.mode?eV.E5:void 0,children:(0,r.jsxs)(u.l,{children:[f.includes("repositories")&&(0,r.jsxs)(u.l.Item,{onSelect:()=>{(0,s.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_REPOSITORIES",mode:p.mode}),t("repositories")},children:[(0,r.jsx)(u.l.LeadingVisual,{children:(0,r.jsx)(T.RepoIcon,{})}),"Repositories\u2026"]}),(0,r.jsxs)(u.l.Item,{onSelect:()=>{(0,s.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_MULTI_FILE_PICKER",mode:p.mode}),t("multi-file-picker")},children:[(0,r.jsx)(u.l.LeadingVisual,{children:(0,r.jsx)(T.FileCodeIcon,{})}),function(e){let t=e.includes("files"),n=e.includes("folders"),a=e.includes("symbols");return t&&n&&a?"Files, folders, and symbols":t&&n?"Files and folders":t&&a?"Files and symbols":n&&a?"Folders and symbols":t?"Files":n?"Folders":a?"Symbols":"References"}(y),"\u2026"]}),f.includes("knowledge-bases")&&(0,r.jsxs)(u.l.Item,{onSelect:()=>{(0,s.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_KNOWLEDGE_BASES",mode:p.mode}),t("knowledge-bases")},children:[(0,r.jsx)(u.l.LeadingVisual,{children:(0,r.jsx)(T.BookIcon,{})}),(0,r.jsx)("span",{...(0,N.G)("knowledge-bases-action-list-item"),children:"Knowledge bases\u2026"})]}),f.includes("copilot-spaces")&&(0,r.jsx)(el,{openCreateSpaceDialog:O,setPendingSpace:A,clearSpaceSelection:R,activeCopilotSpaceId:k,readOnly:L}),h.map(e=>{let n=e.attachmentMenuContribution;return n?(0,r.jsx)(n.MenuItemComponent,{onSelect:()=>t(n.attachmentType)},e.id):null}),f.includes("upload")&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(u.l.Divider,{}),(0,r.jsxs)(u.l.Item,{onSelect:()=>{(0,s.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_IMAGES",mode:p.mode}),t(null),w.current?.click()},children:[(0,r.jsx)(u.l.LeadingVisual,{children:(0,r.jsx)(T.UploadIcon,{})}),"Upload from computer"]})]}),f.includes("agents")&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(u.l.Divider,{}),(0,r.jsx)(em,{onSelectPanel:e=>t(e),onSelectAgent:e=>setTimeout(()=>S(e.slug))})]})]})})}),"multi-file-picker"===e&&(0,r.jsx)(ej,{isOpen:!0,onClose:()=>t(null),initialRepo:a,onRepoSelect:i}),(0,r.jsx)(eW.FZ,{open:"repositories"===e,onOpenChange:e=>t(e?"repositories":null),submitReturnFocusRef:c,cancelReturnFocusRef:n}),f.includes("knowledge-bases")&&(0,r.jsx)(eM,{disabledForPreviewModelsProps:{anchorRef:n},emptyKnowledgeBaseProps:{anchorRef:n},open:"knowledge-bases"===e,onOpenChange:e=>t(e?"knowledge-bases":null),anchorRef:n}),M&&(0,r.jsx)(j.D,{closeDialog:()=>O(!1)}),"no-agents-available"===e&&(0,r.jsx)(ex,{onClose:()=>t(null),returnFocusRef:n}),"agents-not-supported"===e&&(0,r.jsx)(e_,{onClose:()=>t(null),returnFocusRef:n}),h.map(a=>a.attachmentMenuContribution&&a.attachmentMenuContribution.attachmentType===e?(0,r.jsx)(a.attachmentMenuContribution.PanelComponent,{onSubmit:()=>{t(null),c.current?.focus()},onDismiss:()=>{t(null),n.current?.focus()}},a.id):null)]})});eH.displayName="AttachmentMenu";var eq=n(71555);let eK={agents:"Extensions",repositories:"Repositories",files:"Files and folders",issues:"Issues",pulls:"Pull requests",discussions:"Discussions"},eG=[{name:eK.agents,icon:T.AppsIcon,value:"agents",where:"start"},{name:eK.repositories,icon:T.RepoIcon,value:"repositories",where:"anywhere"},{name:eK.files,icon:T.FileIcon,value:"repositories:files",where:"anywhere"},{name:eK.issues,icon:T.IssueOpenedIcon,value:"repositories:issues",where:"anywhere"},{name:eK.pulls,icon:T.GitPullRequestIcon,value:"repositories:pulls",where:"anywhere"},{name:eK.discussions,icon:T.CommentDiscussionIcon,value:"repositories:discussions",where:"anywhere"}],eQ={is:e=>eG.some(t=>t.value===e)};function eJ(e){let t,n,a,s,o,l=(0,i.c)(12);return l[0]!==e?({agent:t,...n}=e,l[0]=e,l[1]=t,l[2]=n):(t=l[1],n=l[2]),l[3]!==t.avatarUrl?(a=(0,r.jsx)(u.l.LeadingVisual,{children:(0,r.jsx)(eu.r,{src:t.avatarUrl})}),l[3]=t.avatarUrl,l[4]=a):a=l[4],l[5]!==t.slug?(s=(0,r.jsxs)(u.l.Description,{variant:"inline",truncate:!0,children:[ed.Z3,t.slug]}),l[5]=t.slug,l[6]=s):s=l[6],l[7]!==t.name||l[8]!==n||l[9]!==a||l[10]!==s?(o=(0,r.jsxs)(u.l.Item,{...n,children:[a,t.name,s]}),l[7]=t.name,l[8]=n,l[9]=a,l[10]=s,l[11]=o):o=l[11],o}try{eJ.displayName||(eJ.displayName="AgentSuggestion")}catch{}function eY(e){let t,n,a,s,o,l,c,d,p=(0,i.c)(20);p[0]!==e?({leadingVisual:t,...n}=e,p[0]=e,p[1]=t,p[2]=n):(t=p[1],n=p[2]);let h=(0,m.useId)(),g=(0,m.useId)();return p[3]!==g||p[4]!==h?(a=(0,_.$)(h,g),p[3]=g,p[4]=h,p[5]=a):a=p[5],p[6]!==t?(s=void 0!==t&&(0,r.jsx)(u.l.LeadingVisual,{children:t}),p[6]=t,p[7]=s):s=p[7],p[8]!==h||p[9]!==n.children?(o=(0,r.jsx)("span",{id:h,children:n.children}),p[8]=h,p[9]=n.children,p[10]=o):o=p[10],p[11]!==g?(l=(0,r.jsx)("span",{className:"d-none","aria-hidden":!0,id:g,children:"Opens in new tab."}),p[11]=g,p[12]=l):l=p[12],p[13]===Symbol.for("react.memo_cache_sentinel")?(c=(0,r.jsx)(u.l.TrailingVisual,{children:(0,r.jsx)(T.LinkExternalIcon,{})}),p[13]=c):c=p[13],p[14]!==n||p[15]!==a||p[16]!==s||p[17]!==o||p[18]!==l?(d=(0,r.jsxs)(u.l.Item,{...n,"aria-labelledby":a,children:[s,o,l,c]}),p[14]=n,p[15]=a,p[16]=s,p[17]=o,p[18]=l,p[19]=d):d=p[19],d}try{eY.displayName||(eY.displayName="LinkSuggestion")}catch{}function eZ(e){return{value:`@${e.slug}`,render:t=>(0,r.jsx)(eJ,{agent:e,...t})}}function eX(e){let t,n,a,s,o,l=(0,i.c)(9);return l[0]!==e?({leadingVisual:t,...n}=e,l[0]=e,l[1]=t,l[2]=n):(t=l[1],n=l[2]),l[3]!==t?(a=void 0!==t&&(0,r.jsx)(u.l.LeadingVisual,{children:t}),l[3]=t,l[4]=a):a=l[4],l[5]===Symbol.for("react.memo_cache_sentinel")?(s=(0,r.jsx)(u.l.TrailingVisual,{children:(0,r.jsx)(T.ArrowRightIcon,{})}),l[5]=s):s=l[5],l[6]!==n||l[7]!==a?(o=(0,r.jsxs)(u.l.Item,{"aria-haspopup":!0,...n,children:[a,n.children,s]}),l[6]=n,l[7]=a,l[8]=o):o=l[8],o}try{eX.displayName||(eX.displayName="MultistepSuggestion")}catch{}function e0(e){let t,n,a,s,o=(0,i.c)(9);o[0]!==e?({category:n,...t}=e,o[0]=e,o[1]=t,o[2]=n):(t=o[1],n=o[2]);let{name:l,icon:c}=n;return o[3]!==c?(a=(0,r.jsx)(c,{}),o[3]=c,o[4]=a):a=o[4],o[5]!==l||o[6]!==t||o[7]!==a?(s=(0,r.jsx)(eX,{leadingVisual:a,...t,children:l}),o[5]=l,o[6]=t,o[7]=a,o[8]=s):s=o[8],s}try{e0.displayName||(e0.displayName="CategorySuggestion")}catch{}let e1={asyncSuggestion:"shared-module__asyncSuggestion--AXibl",stale:"shared-module__stale--R4Im6"};function e2(e){let t,n,a,s,o,l,c,d,m,p,h,g=(0,i.c)(25);g[0]!==e?({discussion:n,stale:s,className:t,...a}=e,g[0]=e,g[1]=t,g[2]=n,g[3]=a,g[4]=s):(t=g[1],n=g[2],a=g[3],s=g[4]);let f=s&&e1.stale;return g[5]!==t||g[6]!==f?(o=(0,_.$)(e1.asyncSuggestion,f,t),g[5]=t,g[6]=f,g[7]=o):o=g[7],g[8]!==n.state?(l="open"===n.state&&(0,r.jsx)(T.CommentDiscussionIcon,{className:"fgColor-open"}),g[8]=n.state,g[9]=l):l=g[9],g[10]!==n.state?(c="closed"===n.state&&(0,r.jsx)(T.DiscussionClosedIcon,{className:"fgColor-muted"}),g[10]=n.state,g[11]=c):c=g[11],g[12]!==l||g[13]!==c?(d=(0,r.jsxs)(u.l.LeadingVisual,{children:[l,c]}),g[12]=l,g[13]=c,g[14]=d):d=g[14],g[15]!==n.title?(m=(0,r.jsx)(eT.A,{title:n.title,maxWidth:350,children:n.title}),g[15]=n.title,g[16]=m):m=g[16],g[17]!==n.number?(p=(0,r.jsxs)(u.l.Description,{children:["#",n.number]}),g[17]=n.number,g[18]=p):p=g[18],g[19]!==a||g[20]!==o||g[21]!==d||g[22]!==m||g[23]!==p?(h=(0,r.jsxs)(u.l.Item,{...a,className:o,children:[d,m,p]}),g[19]=a,g[20]=o,g[21]=d,g[22]=m,g[23]=p,g[24]=h):h=g[24],h}try{e2.displayName||(e2.displayName="DiscussionSuggestion")}catch{}function e5(e){let t,n,a,s,o,l,c,d,m,p,h,g,f,y,x,v=(0,i.c)(35);if(v[0]!==e?({type:o,path:n,stale:s,className:t,...a}=e,v[0]=e,v[1]=t,v[2]=n,v[3]=a,v[4]=s,v[5]=o):(t=v[1],n=v[2],a=v[3],s=v[4],o=v[5]),v[6]!==t||v[7]!==n||v[8]!==a||v[9]!==s||v[10]!==o){let e=n.split("/"),i=e.pop();c=u.l.Item,p=a;let y=s&&e1.stale;v[19]!==t||v[20]!==y?(h=(0,_.$)(e1.asyncSuggestion,y,t),v[19]=t,v[20]=y,v[21]=h):h=v[21],v[22]!==o?(g=(0,r.jsx)(u.l.LeadingVisual,{children:"folder"===o?(0,r.jsx)(T.FileDirectoryFillIcon,{}):(0,r.jsx)(T.FileIcon,{})}),v[22]=o,v[23]=g):g=v[23],f=i,l=u.l.Description,d="inline",m=e.join("/"),v[6]=t,v[7]=n,v[8]=a,v[9]=s,v[10]=o,v[11]=l,v[12]=c,v[13]=d,v[14]=m,v[15]=p,v[16]=h,v[17]=g,v[18]=f}else l=v[11],c=v[12],d=v[13],m=v[14],p=v[15],h=v[16],g=v[17],f=v[18];return v[24]!==l||v[25]!==d||v[26]!==m?(y=(0,r.jsxs)(l,{variant:d,children:[m,"/"]}),v[24]=l,v[25]=d,v[26]=m,v[27]=y):y=v[27],v[28]!==c||v[29]!==p||v[30]!==h||v[31]!==g||v[32]!==f||v[33]!==y?(x=(0,r.jsxs)(c,{...p,className:h,children:[g,f,y]}),v[28]=c,v[29]=p,v[30]=h,v[31]=g,v[32]=f,v[33]=y,v[34]=x):x=v[34],x}try{e5.displayName||(e5.displayName="FileSuggestion")}catch{}function e3(e){let t,n,a,s,o,l,c,d,m,p,h,g,f=(0,i.c)(28);f[0]!==e?({issue:n,stale:s,className:t,...a}=e,f[0]=e,f[1]=t,f[2]=n,f[3]=a,f[4]=s):(t=f[1],n=f[2],a=f[3],s=f[4]);let y=s&&e1.stale;return f[5]!==t||f[6]!==y?(o=(0,_.$)(e1.asyncSuggestion,y,t),f[5]=t,f[6]=y,f[7]=o):o=f[7],f[8]!==n.state?(l="draft"===n.state&&(0,r.jsx)(T.IssueDraftIcon,{className:"fgColor-draft"}),f[8]=n.state,f[9]=l):l=f[9],f[10]!==n.state?(c="open"===n.state&&(0,r.jsx)(T.IssueOpenedIcon,{className:"fgColor-open"}),f[10]=n.state,f[11]=c):c=f[11],f[12]!==n.state?(d="closed"===n.state&&(0,r.jsx)(T.IssueClosedIcon,{className:"fgColor-done"}),f[12]=n.state,f[13]=d):d=f[13],f[14]!==l||f[15]!==c||f[16]!==d?(m=(0,r.jsxs)(u.l.LeadingVisual,{children:[l,c,d]}),f[14]=l,f[15]=c,f[16]=d,f[17]=m):m=f[17],f[18]!==n.title?(p=(0,r.jsx)(eT.A,{title:n.title,maxWidth:350,children:n.title}),f[18]=n.title,f[19]=p):p=f[19],f[20]!==n.number?(h=(0,r.jsxs)(u.l.Description,{children:["#",n.number]}),f[20]=n.number,f[21]=h):h=f[21],f[22]!==a||f[23]!==o||f[24]!==m||f[25]!==p||f[26]!==h?(g=(0,r.jsxs)(u.l.Item,{...a,className:o,children:[m,p,h]}),f[22]=a,f[23]=o,f[24]=m,f[25]=p,f[26]=h,f[27]=g):g=f[27],g}try{e3.displayName||(e3.displayName="IssueSuggestion")}catch{}function e4(e){let t,n,a,s,o,l,c,d,m,p,h,g,f=(0,i.c)(28);f[0]!==e?({pullRequest:a,stale:s,className:t,...n}=e,f[0]=e,f[1]=t,f[2]=n,f[3]=a,f[4]=s):(t=f[1],n=f[2],a=f[3],s=f[4]);let y=s&&e1.stale;return f[5]!==t||f[6]!==y?(o=(0,_.$)(e1.asyncSuggestion,y,t),f[5]=t,f[6]=y,f[7]=o):o=f[7],f[8]!==a.state?(l="draft"===a.state&&(0,r.jsx)(T.GitPullRequestDraftIcon,{className:"fgColor-draft"}),f[8]=a.state,f[9]=l):l=f[9],f[10]!==a.state?(c="open"===a.state&&(0,r.jsx)(T.GitPullRequestIcon,{className:"fgColor-open"}),f[10]=a.state,f[11]=c):c=f[11],f[12]!==a.state?(d="closed"===a.state&&(0,r.jsx)(T.GitPullRequestClosedIcon,{className:"fgColor-done"}),f[12]=a.state,f[13]=d):d=f[13],f[14]!==l||f[15]!==c||f[16]!==d?(m=(0,r.jsxs)(u.l.LeadingVisual,{children:[l,c,d]}),f[14]=l,f[15]=c,f[16]=d,f[17]=m):m=f[17],f[18]!==a.title?(p=(0,r.jsx)(eT.A,{title:a.title,maxWidth:350,children:a.title}),f[18]=a.title,f[19]=p):p=f[19],f[20]!==a.number?(h=(0,r.jsxs)(u.l.Description,{children:["#",a.number]}),f[20]=a.number,f[21]=h):h=f[21],f[22]!==n||f[23]!==o||f[24]!==m||f[25]!==p||f[26]!==h?(g=(0,r.jsxs)(u.l.Item,{...n,className:o,children:[m,p,h]}),f[22]=n,f[23]=o,f[24]=m,f[25]=p,f[26]=h,f[27]=g):g=f[27],g}try{e4.displayName||(e4.displayName="PullRequestSuggestion")}catch{}function e7(e){let t,n,a,s,o,l,c,d,m=(0,i.c)(18);m[0]!==e?({repository:s,isMultistep:n,stale:o,className:t,...a}=e,m[0]=e,m[1]=t,m[2]=n,m[3]=a,m[4]=s,m[5]=o):(t=m[1],n=m[2],a=m[3],s=m[4],o=m[5]);let p=o&&e1.stale;m[6]!==t||m[7]!==p?(l=(0,_.$)(e1.asyncSuggestion,p,t),m[6]=t,m[7]=p,m[8]=l):l=m[8];let h=l;m[9]!==s.isInOrganization||m[10]!==s.ownerAvatarUrl?(c=s.ownerAvatarUrl?(0,r.jsx)(eu.r,{src:s.ownerAvatarUrl,alt:"",size:16,square:s.isInOrganization}):(0,r.jsx)(T.RepoIcon,{}),m[9]=s.isInOrganization,m[10]=s.ownerAvatarUrl,m[11]=c):c=m[11];let g=c;return m[12]!==g||m[13]!==h||m[14]!==n||m[15]!==a||m[16]!==s.nwo?(d=n?(0,r.jsx)(eX,{...a,className:h,leadingVisual:g,children:s.nwo},s.nwo):(0,r.jsxs)(u.l.Item,{...a,className:h,children:[(0,r.jsx)(u.l.LeadingVisual,{children:g}),s.nwo]},s.nwo),m[12]=g,m[13]=h,m[14]=n,m[15]=a,m[16]=s.nwo,m[17]=d):d=m[17],d}try{e7.displayName||(e7.displayName="RepositorySuggestion")}catch{}function e6(e){return{value:null,key:e.value,render:t=>(0,r.jsx)(e0,{category:e,...t})}}function e8(e){return null!==e}var e9=n(84331);function te(e){return{value:`/${e.key}`,key:e.key,render:t=>(0,r.jsxs)(u.l.Item,{...t,children:[(0,r.jsx)(u.l.LeadingVisual,{children:(0,r.jsx)(e.icon,{})}),e.name,(0,r.jsx)(u.l.Description,{variant:"block",children:e.description})]})}}var tt=n(97286);function tn(e){let t,n,a=(0,i.c)(3),[r,s]=(0,m.useState)(null);return(null===r&&null!==e||null!==r&&null===e)&&s(e),a[0]!==e?(t=()=>{let t=setTimeout(()=>s(e),200);return()=>clearTimeout(t)},n=[e],a[0]=e,a[1]=t,a[2]=n):(t=a[1],n=a[2]),(0,m.useEffect)(t,n),r}function ta(e){return e}async function tr(e,t,n,a){return new Promise((r,i)=>{if(!window.Worker)return void setTimeout(()=>r(e.filter(e=>e.includes(t))));let s=new Worker(n);s.addEventListener("message",e=>r(e.data.list)),s.addEventListener("error",e=>i(Error(`Worker error: ${e.message}`))),a.addEventListener("abort",()=>{s.terminate(),i(Error("Worker aborted"))}),s.postMessage({baseList:e,query:t})})}function ti(e){return e}function ts(e){return e}function to(e){return e}var tl=n(26408);function tc(e){let t,n,a,s,o=(0,i.c)(9);return o[0]!==e?({org:t,...n}=e,o[0]=e,o[1]=t,o[2]=n):(t=o[1],n=o[2]),o[3]!==t.avatarUrl?(a=(0,r.jsx)(eu.r,{square:!0,src:t.avatarUrl}),o[3]=t.avatarUrl,o[4]=a):a=o[4],o[5]!==t.login||o[6]!==n||o[7]!==a?(s=(0,r.jsx)(eY,{leadingVisual:a,...n,children:t.login}),o[5]=t.login,o[6]=n,o[7]=a,o[8]=s):s=o[8],s}function td(e){let t,n,a,s=(0,i.c)(7);return s[0]!==e?({orgs:t,...n}=e,s[0]=e,s[1]=t,s[2]=n):(t=s[1],n=s[2]),s[3]!==t[0]?.login||s[4]!==t.length||s[5]!==n?(a=1===t.length?(0,r.jsxs)(eY,{leadingVisual:(0,r.jsx)(T.ShieldLockIcon,{}),...n,children:["Single sign-on to ",(0,r.jsx)("strong",{children:t[0]?.login})," for more"]}):(0,r.jsx)(eX,{leadingVisual:(0,r.jsx)(T.ShieldLockIcon,{}),...n,children:"Single sign-on for more"}),s[3]=t[0]?.login,s[4]=t.length,s[5]=n,s[6]=a):a=s[6],a}try{tc.displayName||(tc.displayName="SSOOrgSuggestion")}catch{}try{td.displayName||(td.displayName="SSOPromptSuggestion")}catch{}let tu=e=>`/orgs/${encodeURIComponent(e.login)}/sso?return_to=${encodeURIComponent(location.href)}`;function tm(e){return{value:null,key:`open-link:${tu(e)}`,render:t=>(0,r.jsx)(tc,{org:e,...t})}}function tp(e){let t,n,a,o,l,c,d,p,h,f,y,x=(0,i.c)(29),{children:v,onSelectCommand:_,onSelectReference:C,onShowAgentsDialog:S,hideAutocomplete:j}=e,{mode:w}=(0,g.Pk)();x[0]===Symbol.for("react.memo_cache_sentinel")?(t=[{triggerChar:"@",insertSpaceOnCommit:!0,keepTriggerCharOnCommit:!1,multiWord:!0}],b.W.chatInputCommands&&t.push({triggerChar:"/",insertSpaceOnCommit:!0,keepTriggerCharOnCommit:!1,multiWord:!1}),x[0]=t):t=x[0];let[N,I]=(0,m.useState)(th);x[1]===Symbol.for("react.memo_cache_sentinel")?(n=()=>I(!0),a=[],x[1]=n,x[2]=a):(n=x[1],a=x[2]),(0,m.useEffect)(n,a);let[E,A]=(0,m.useState)(null),{suggestions:R,stale:k}=function(e){let t=(0,i.c)(9),n=function(e){let t,n,a=(0,i.c)(7),r=(0,F.qw)();a[0]!==r?(t=(0,Q.K)(r),a[0]=r,a[1]=t):t=a[1];let s=t;e:{let t,r;if(!e){n=null;break e}a[2]!==s||a[3]!==e.filter?(t=""===e.filter.trim()?s:s.filter(t=>(0,e9.dt)(t.name,e.filter)>.5),a[2]=s,a[3]=e.filter,a[4]=t):t=a[4];let i=t;a[5]!==i?(r=i.map(te),a[5]=i,a[6]=r):r=a[6],n=r}return n}(e?.category==="commands"?e:null),a=function(e){let t,n=(0,i.c)(3),{currentReferences:a}=(0,g.Pk)();e:{let i;if(!e){t=null;break e}if(n[0]!==a||n[1]!==e){let t=e.filter.toLowerCase(),s=e=>e.toLowerCase().includes(t)&&e.toLowerCase()!==t,o=a.map(e=>{let t=B.Q.for(e);switch(t?.type){case void 0:break;case"repository":{let e=`${t.reference.ownerLogin}/${t.reference.name}`;if(!s(e))return null;return{value:B.Q.stringify(t),render:n=>(0,r.jsx)(e7,{repository:{databaseId:t.reference.id,isInOrganization:"Organization"===t.reference.ownerType,name:t.reference.name,nwo:e,ownerLogin:t.reference.ownerLogin},...n})}}case"issue":{let e=t.reference.title??"";if(!s(e))return null;return{value:B.Q.stringify(t),render:n=>(0,r.jsx)(e3,{issue:{number:t.reference.number,state:t.reference.state??"",title:e},...n})}}case"pull-request":{let e=t.reference.title??"";if(!s(e))return null;return{value:B.Q.stringify(t),render:n=>(0,r.jsx)(e4,{pullRequest:{number:t.reference.number,state:t.reference.state??"",title:e},...n})}}case"discussion":{let e=t.reference.title??"";if(!s(e))return null;return{value:B.Q.stringify(t),render:n=>(0,r.jsx)(e2,{discussion:{number:t.reference.number,state:t.reference.state,title:e},...n})}}case"file":{let e=t.reference.path;if(!s(e))return null;return{value:B.Q.stringify(t),render:n=>(0,r.jsx)(e5,{type:"folder"===t.reference.type?"folder":"file",path:e,...n})}}}return null}).filter(e8),l=eG.filter(n=>n.name.toLowerCase().includes(t)&&function(e,t){switch(e){case"start":return 0===t.index;case"anywhere":return!0}}(n.where,e)).map(e6);if(l.length>0){let e=o.at(-1);if(e&&"object"==typeof e){let t=e.render;e.render=e=>(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t,{...e}),(0,r.jsx)(u.l.Divider,{})]})}}i=o.concat(l),n[0]=a,n[1]=e,n[2]=i}else i=n[2];t=i}return t}(e?.category==="categories"?e:null),s=function(e){let t,n=(0,i.c)(4),{availableAgents:a,loading:s,showLimit:o,disabled:l}=(0,ed.JE)(null!==e);e:{let i;if(l||!e){t=null;break e}if(s&&!a){t="loading";break e}n[0]!==a||n[1]!==e||n[2]!==o?(i=a?.filter(t=>e?.category==="agents"&&t.name.toLowerCase().includes(e.filter.toLowerCase())).map(eZ).concat({value:null,key:`open-link:${ed.bn}`,render:e=>(0,r.jsxs)(r.Fragment,{children:[a.length>0&&(0,r.jsx)(u.l.Divider,{}),(0,r.jsx)(eY,{leadingVisual:(0,r.jsx)(T.TelescopeIcon,{}),...e,inactiveText:o?"Start a new conversation to use other extensions.":void 0,children:"Marketplace"})]})})??null,n[0]=a,n[1]=e,n[2]=o,n[3]=i):i=n[3],t=i}return t}(e?.category==="agents"?e:null),o=function(e){let{currentReferences:t}=(0,g.Pk)(),n=tn(e),a=e!==n,{repositories:i,loading:s}=(0,tl.U)(n?.filter??"",null!==n),o=(0,m.useMemo)(()=>new Set(t.filter(e=>"repository"===e.type).map(e=>e.id)),[t]),{ssoOrganizations:l}=(0,g.Pk)();return{suggestions:(0,m.useMemo)(()=>{if(!n)return null;if("initial"===s)return"loading";let e=void 0!==n.nextCategory,t=i.toSorted((e,t)=>o.has(e.databaseId)&&!o.has(t.databaseId)?-1:o.has(t.databaseId)&&!o.has(e.databaseId)?1:0).slice(0,5).map(t=>({value:e?null:B.Q.stringify({type:"repository",repo:t.nwo}),key:t.nwo,render:n=>(0,r.jsx)(e7,{repository:t,isMultistep:e,stale:!!s||a,...n})}))??[];return l.length>0&&t.push({value:null,key:1===l.length?`open-link:${tu(l[0])}`:"sso-orgs",render:e=>(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(u.l.Divider,{}),(0,r.jsx)(td,{orgs:l,...e})]})}),t},[i,s,n,o,l,a]),stale:!0===s}}(e?.category==="repositories"?e:null),l=function(e){let t,n,a,s,o,l=(0,i.c)(18),{service:c}=(0,D.b)(),d=tn(e),u=e!==d,m=null!==d,p=d?.repository,h=d?.filter;l[0]!==p||l[1]!==h?(t=["copilot-autocomplete-issues",p,h],l[0]=p,l[1]=h,l[2]=t):t=l[2],l[3]!==d||l[4]!==c?(n=async()=>c.fetchAutocompleteIssues(d.repository,d.filter),l[3]=d,l[4]=c,l[5]=n):n=l[5],l[6]!==m||l[7]!==t||l[8]!==n?(a={enabled:m,queryKey:t,queryFn:n,placeholderData:ts},l[6]=m,l[7]=t,l[8]=n,l[9]=a):a=l[9];let g=(0,tt.I)(a);e:{let e;if(!d){s=null;break e}if(g.isLoading){s="loading";break e}l[10]!==d||l[11]!==u||l[12]!==g.data||l[13]!==g.isPlaceholderData?(e=g.data?.map(e=>({value:B.Q.stringify({type:"issue",repo:d.repository,id:e.number.toString()}),key:e.number.toString(),render:t=>(0,r.jsx)(e3,{...t,issue:e,stale:g.isPlaceholderData||u})}))??null,l[10]=d,l[11]=u,l[12]=g.data,l[13]=g.isPlaceholderData,l[14]=e):e=l[14],s=e}let f=s;return l[15]!==g.isPlaceholderData||l[16]!==f?(o={suggestions:f,stale:g.isPlaceholderData},l[15]=g.isPlaceholderData,l[16]=f,l[17]=o):o=l[17],o}(e?.category==="issues"?e:null),c=function(e){let t,n,a,s,o,l=(0,i.c)(18),{service:c}=(0,D.b)(),d=tn(e),u=e!==d,m=null!==d,p=d?.repository,h=d?.filter;l[0]!==p||l[1]!==h?(t=["copilot-autocomplete-pulls",p,h],l[0]=p,l[1]=h,l[2]=t):t=l[2],l[3]!==d||l[4]!==c?(n=async()=>c.fetchAutocompletePullRequests(d.repository,d.filter),l[3]=d,l[4]=c,l[5]=n):n=l[5],l[6]!==m||l[7]!==t||l[8]!==n?(a={enabled:m,queryKey:t,queryFn:n,placeholderData:to},l[6]=m,l[7]=t,l[8]=n,l[9]=a):a=l[9];let g=(0,tt.I)(a);e:{let e;if(!d){s=null;break e}if(g.isLoading){s="loading";break e}l[10]!==d||l[11]!==u||l[12]!==g.data||l[13]!==g.isPlaceholderData?(e=g.data?.map(e=>({value:B.Q.stringify({type:"pull-request",repo:d.repository,id:e.number.toString()}),key:e.number.toString(),render:t=>(0,r.jsx)(e4,{...t,pullRequest:e,stale:g.isPlaceholderData||u})}))??null,l[10]=d,l[11]=u,l[12]=g.data,l[13]=g.isPlaceholderData,l[14]=e):e=l[14],s=e}let f=s;return l[15]!==g.isPlaceholderData||l[16]!==f?(o={suggestions:f,stale:g.isPlaceholderData},l[15]=g.isPlaceholderData,l[16]=f,l[17]=o):o=l[17],o}(e?.category==="pulls"?e:null),d=function(e){let t,n,a,s,o,l=(0,i.c)(18),{service:c}=(0,D.b)(),d=tn(e),u=e!==d,m=null!==d,p=d?.repository,h=d?.filter;l[0]!==p||l[1]!==h?(t=["copilot-autocomplete-discussions",p,h],l[0]=p,l[1]=h,l[2]=t):t=l[2],l[3]!==d||l[4]!==c?(n=async()=>c.fetchAutocompleteDiscussions(d.repository,d.filter),l[3]=d,l[4]=c,l[5]=n):n=l[5],l[6]!==m||l[7]!==t||l[8]!==n?(a={enabled:m,queryKey:t,queryFn:n,placeholderData:ta},l[6]=m,l[7]=t,l[8]=n,l[9]=a):a=l[9];let g=(0,tt.I)(a);e:{let e;if(!d){s=null;break e}if(g.isLoading){s="loading";break e}l[10]!==d||l[11]!==g.data||l[12]!==g.isPlaceholderData||l[13]!==u?(e=g.data?.map(e=>({value:B.Q.stringify({type:"discussion",repo:d.repository,id:e.number.toString()}),key:e.number.toString(),render:t=>(0,r.jsx)(e2,{...t,discussion:e,stale:g.isPlaceholderData||u})}))??null,l[10]=d,l[11]=g.data,l[12]=g.isPlaceholderData,l[13]=u,l[14]=e):e=l[14],s=e}let f=s;return l[15]!==g.isPlaceholderData||l[16]!==f?(o={suggestions:f,stale:g.isPlaceholderData},l[15]=g.isPlaceholderData,l[16]=f,l[17]=o):o=l[17],o}(e?.category==="discussions"?e:null),p=function(e){let t,n,a,s,o,l,c,d,u=(0,i.c)(23),m=(0,D.b)(),p=null!==e,h=e?.repository;u[0]!==h?(t=["copilot-repository",h],u[0]=h,u[1]=t):t=u[1],u[2]!==m||u[3]!==e?.repository?(n=async()=>{if(!e?.repository)return null;let t=await m.service.fetchRepo(e?.repository);if(!t.ok)throw Error("Failed to fetch repository");return t.payload},u[2]=m,u[3]=e?.repository,u[4]=n):n=u[4],u[5]!==p||u[6]!==t||u[7]!==n?(a={enabled:p,queryKey:t,queryFn:n,staleTime:3e5},u[5]=p,u[6]=t,u[7]=n,u[8]=a):a=u[8];let f=(0,tt.I)(a),y=function(e,t){let n,a,r,s=(0,i.c)(11),o=(0,D.b)(),l=null!==e;return!0!==s[0]||s[1]!==e?(n=["copilot-repository-files",e,!0],s[0]=!0,s[1]=e,s[2]=n):n=s[2],!0!==s[3]||s[4]!==o||s[5]!==e?(a=async()=>{if(!e)return{};let t=await o.service.listRepoFiles(e,!0);if(!t.ok)throw Error("Failed to fetch files for repository");return t.payload},s[3]=!0,s[4]=o,s[5]=e,s[6]=a):a=s[6],s[7]!==l||s[8]!==n||s[9]!==a?(r={enabled:l,queryKey:n,queryFn:a,staleTime:3e5},s[7]=l,s[8]=n,s[9]=a,s[10]=r):r=s[10],(0,tt.I)(r)}(f.data??null);y.data?.directories,u[9]!==y.data?.directories?(s=y.data?.directories??[],u[9]=y.data?.directories,u[10]=s):s=u[10],u[11]!==s?(o=new Set(s),u[11]=s,u[12]=o):o=u[12];let x=o;u[13]!==y.data?(l=y.data?(y.data.paths??[]).concat(y.data.directories??[]):null,u[13]=y.data,u[14]=l):l=u[14];let v=function(e,t){let n,a,r,s=(0,i.c)(9),{findFileWorkerPath:o}=(0,g.Pk)();s[0]!==e||s[1]!==t||s[2]!==o?(n=["copilot-worker-filter",o,e,t],a=async n=>{let{signal:a}=n;return e?0===t.length?e:tr(e,t,o,a):[]},s[0]=e,s[1]=t,s[2]=o,s[3]=n,s[4]=a):(n=s[3],a=s[4]);let l=null!==e;return s[5]!==n||s[6]!==a||s[7]!==l?(r={queryKey:n,queryFn:a,enabled:l,staleTime:1/0,gcTime:1e4,networkMode:"always",retry:!1,placeholderData:ti},s[5]=n,s[6]=a,s[7]=l,s[8]=r):r=s[8],(0,tt.I)(r)}(l,e?.filter??"");e:{let t;if(!e){c=null;break e}if(f.isLoading||y.isLoading||v.isLoading){c="loading";break e}u[15]!==x||u[16]!==v.data||u[17]!==v.isPlaceholderData||u[18]!==e?(t=[...v.data?.slice(0,5).map(t=>({value:B.Q.stringify({repo:e.repository,type:"file",id:t}),key:t,render:e=>(0,r.jsx)(e5,{...e,path:t,type:x.has(t)?"folder":"file",stale:v.isPlaceholderData})}))??[]],u[15]=x,u[16]=v.data,u[17]=v.isPlaceholderData,u[18]=e,u[19]=t):t=u[19];let n=t;c=n.length>0?n:null}let _=c;return u[20]!==f.isPlaceholderData||u[21]!==_?(d={suggestions:_,stale:f.isPlaceholderData},u[20]=f.isPlaceholderData,u[21]=_,u[22]=d):d=u[22],d}(e?.category==="files"?e:null),h=function(e){let t,n=(0,i.c)(5),{ssoOrganizations:a}=(0,g.Pk)();e:{let r;if(!e){t=null;break e}if(n[0]!==e||n[1]!==a){let t;n[3]!==e?(t=t=>t.login.toLowerCase().includes(e.filter.toLowerCase()),n[3]=e,n[4]=t):t=n[4],r=a.filter(t).slice(0,10).map(tm),n[0]=e,n[1]=a,n[2]=r}else r=n[2];t=r}return t}(e?.category==="sso-orgs"?e:null);switch(e?.category){case"commands":{let e;return t[0]!==n?(e={suggestions:n,stale:!1},t[0]=n,t[1]=e):e=t[1],e}case void 0:{let e;return t[2]===Symbol.for("react.memo_cache_sentinel")?(e={suggestions:null,stale:!1},t[2]=e):e=t[2],e}case"categories":{let e;return t[3]!==a?(e={suggestions:a,stale:!1},t[3]=a,t[4]=e):e=t[4],e}case"repositories":return o;case"issues":return l;case"agents":{let e;return t[5]!==s?(e={suggestions:s,stale:!1},t[5]=s,t[6]=e):e=t[6],e}case"discussions":return d;case"pulls":return c;case"files":return p;case"sso-orgs":{let e;return t[7]!==h?(e={suggestions:h,stale:!1},t[7]=h,t[8]=e):e=t[8],e}}}(E);if(x[3]!==S||x[4]!==E?(o={query:E,onShowAgentsDialog:S},x[3]=S,x[4]=E,x[5]=o):o=x[5],!function(e){let t,n,a=(0,i.c)(12),{query:r,onShowAgentsDialog:s}=e,o=r?.category==="agents",{availableAgents:l,loading:c,disabled:d}=(0,ed.JE)(o);a[0]!==o||a[1]!==l?.length||a[2]!==d||a[3]!==c||a[4]!==s?(t=()=>{o&&!c&&(d?s("agents-not-supported"):l?.length||s("no-agents-available"))},a[0]=o,a[1]=l?.length,a[2]=d,a[3]=c,a[4]=s,a[5]=t):t=a[5],a[6]!==o||a[7]!==l||a[8]!==d||a[9]!==c||a[10]!==s?(n=[o,c,l,d,s],a[6]=o,a[7]=l,a[8]=d,a[9]=c,a[10]=s,a[11]=n):n=a[11],(0,m.useEffect)(t,n)}(o),!N||j){let e;return x[6]!==v?(e=(0,r.jsx)("div",{children:v}),x[6]=v,x[7]=e):e=x[7],e}x[8]!==w||x[9]!==_||x[10]!==C||x[11]!==E?(l=e=>{let{suggestion:t}=e,n="string"==typeof t?t:t.value;if((0,s.BI)("dotcom_chat.activate",{target:"AUTOCOMPLETE_ITEM_SELECTED",mode:w,suggestion:n}),"object"==typeof t&&E?.category==="commands")return void _?.(t.key);let a=null!==n&&E?.category!=="agents"?B.Q.parse(n):void 0;if(a&&C(a),"object"!=typeof t||null!==t.value)return;let r=/^open-link:(.+)$/.exec(t.key);if(r){A(null),window.open(r[1],"_blank");return}switch(E?.category){case"categories":eQ.is(t.key)&&A(function(e){switch(e){case"repositories":return{category:"repositories",filter:""};case"agents":return{category:"agents",filter:""};case"repositories:discussions":return{category:"repositories",filter:"",nextCategory:"discussions"};case"repositories:issues":return{category:"repositories",filter:"",nextCategory:"issues"};case"repositories:pulls":return{category:"repositories",filter:"",nextCategory:"pulls"};case"repositories:files":return{category:"repositories",filter:"",nextCategory:"files"}}}(t.key));break;case"repositories":"sso-orgs"===t.key?A({category:"sso-orgs",filter:""}):E.nextCategory&&A({category:E.nextCategory,filter:"",repository:t.key})}},x[8]=w,x[9]=_,x[10]=C,x[11]=E,x[12]=l):l=x[12];let L=l;x[13]!==E?(c=e=>{if("/"===e.trigger.triggerChar){(null===E&&1===e.target.selectionStart&&1===e.target.selectionEnd||E?.category==="commands")&&A({category:"commands",filter:e.query});return}A(t=>t?{...t,filter:e.query}:{category:"categories",filter:e.query,index:(e.target.selectionStart??0)-(e.query.length+e.trigger.triggerChar.length)})},x[13]=E,x[14]=c):c=x[14];let P=c;x[15]===Symbol.for("react.memo_cache_sentinel")?(d=()=>A(null),x[15]=d):d=x[15];let M=d;return x[16]!==E?(p=E&&function(e){switch(e.category){case"categories":case"commands":return null;case"repositories":switch(e.nextCategory){case"discussions":case"issues":case"pulls":case"files":return`${eK[e.nextCategory]} \u{203A}`;default:return"Repositories \u203A"}case"agents":return eK[e.category];case"discussions":case"issues":case"pulls":case"files":return`${eK[e.category]} \u{203A} ${e.repository} \u{203A}`;case"sso-orgs":return"Single sign-on"}}(E)||void 0,x[16]=E,x[17]=p):p=x[17],x[18]!==v||x[19]!==L||x[20]!==P||x[21]!==R||x[22]!==p?(h=(0,r.jsx)(eq.a,{fullWidth:!0,suggestions:R,triggers:t,tabInsertsSuggestions:!1,onHideSuggestions:M,onShowSuggestions:P,onSelectSuggestion:L,suggestionsPlacement:"below",title:p,asMenu:!0,children:v}),x[18]=v,x[19]=L,x[20]=P,x[21]=R,x[22]=p,x[23]=h):h=x[23],x[24]!==k?(f=k&&(0,r.jsx)("span",{role:"status","aria-live":"polite",className:"sr-only",children:"Loading"}),x[24]=k,x[25]=f):f=x[25],x[26]!==h||x[27]!==f?(y=(0,r.jsxs)(r.Fragment,{children:[h,f]}),x[26]=h,x[27]=f,x[28]=y):y=x[28],y}function th(){return"undefined"!=typeof document}try{tp.displayName||(tp.displayName="ChatInputAutocomplete")}catch{}let tg={container:"ChatInput-module__container--qmP6j",input:"ChatInput-module__input--HalEQ",containerSmall:"ChatInput-module__containerSmall--NfPkF",inputContainer:"ChatInput-module__inputContainer--cpjba",inputPreview:"ChatInput-module__inputPreview--Fdwj0",clicked:"ChatInput-module__clicked--u0igo",attachments:"ChatInput-module__attachments--Fv007",attachmentButton:"ChatInput-module__attachmentButton--qtFf6",attachmentButtonText:"ChatInput-module__attachmentButtonText--fVuEs",inputContainerNewConversation:"ChatInput-module__inputContainerNewConversation--FexlN",toolbar:"ChatInput-module__toolbar--Kv3Gl",toolbarNoModes:"ChatInput-module__toolbarNoModes--KJL2k",extra:"ChatInput-module__extra--oQVm8",CommandIconButton:"ChatInput-module__CommandIconButton--lxm7H",mode:"ChatInput-module__mode--dH9c4",modeButton:"ChatInput-module__modeButton--y5Yp0",modeSelectButton:"ChatInput-module__modeSelectButton--rJ86j",modeSelectorMobile:"ChatInput-module__modeSelectorMobile--ZPCVa",modeSelectorDesktop:"ChatInput-module__modeSelectorDesktop--SifXL",actions:"ChatInput-module__actions--zbM52",actionsMultiple:"ChatInput-module__actionsMultiple--LHDC3",toolbarButtons:"ChatInput-module__toolbarButtons--YDoIY",lighterSegmentedControl:"ChatInput-module__lighterSegmentedControl--uAdMt"};var tf=n(16378),ty=n(6224);let tx=(0,m.forwardRef)(function(e,t){let n,a,s,o=(0,i.c)(8),{text:l}=e;o[0]!==l?(n=(0,tf._)(l),o[0]=l,o[1]=n):n=o[1];let{availableAgents:c}=(0,ed.JE)(n),{currentReferences:d}=(0,g.Pk)(),u=(0,D.b)(),p=(0,F.qw)(),h=(0,M.l)().use($.U,{references:d,agents:void 0===c?[]:c,plugins:p}).parse(l),f=(0,tf.O)(h),y=(0,m.useRef)(f);(0,m.useEffect)(function(){for(let e of y.current)if(!f.has(e)){let t=d.find(t=>(0,v.Vb)(t)===e);t&&u.removeReference(t)}y.current=f}),o[2]===Symbol.for("react.memo_cache_sentinel")?(a=(0,N.G)("copilot-chat-input-textarea-preview"),o[2]=a):a=o[2];let x=h.children.map(tv);return o[3]!==t||o[4]!==a||o[5]!==tg.inputPreview||o[6]!==x?(s=(0,r.jsx)("div",{id:"copilot-chat-textarea-preview",...a,"aria-hidden":!0,className:tg.inputPreview,ref:t,role:"presentation",children:x}),o[3]=t,o[4]=a,o[5]=tg.inputPreview,o[6]=x,o[7]=s):s=o[7],s});try{tx.displayName||(tx.displayName="ChatInputPreview")}catch{}function tv(e,t){switch(e.type){case"text":return e.value;case"command":return(0,r.jsx)("span",{className:ty.A.command,...(0,N.G)("input-preview-command"),children:e.value},t);case"reference-mention":return void 0!==e.data.mentionedReferenceId?(0,r.jsx)("span",{className:ty.A.mention,...(0,N.G)("input-preview-ref"),children:e.value},t):e.value;case"agent-mention":return(0,r.jsx)("span",{className:ty.A.mention,children:e.value},t)}}var t_=n(11683),tC=n(45800),tS=n(25536),tj=n(7730),tb=n(57448);let tw={container:"ChatInputReferences-module__container--bNybl",attachmentsList:"ChatInputReferences-module__attachmentsList--mEJpJ",scrolledToEnd:"ChatInputReferences-module__scrolledToEnd--DONiv",loading:"ChatInputReferences-module__loading--kAJlw",divider:"ChatInputReferences-module__divider--k8d6S",menuButton:"ChatInputReferences-module__menuButton--IVLqN",functionLoading:"ChatInputReferences-module__functionLoading--Oimop",convertToFileContainer:"ChatInputReferences-module__convertToFileContainer--y1XOU",convertToFileButton:"ChatInputReferences-module__convertToFileButton--hnPn2"};var tN=n(1631),tI=n(15518);let tE=(0,m.memo)(e=>{let t,n,a,s,o,c,p,h,f,y,x,C,S,j,b,w,I,E=(0,i.c)(51),{className:A,isLoading:R,returnFocusRef:L,tokenSize:P,onSelectReference:M,getReferenceVersion:O,showConvertToFileText:F,onConvertToFile:B,onConvertToFileDismiss:$,hideAttachmentsMenu:z,onRemoveReference:U}=e,V=void 0===P?"medium":P,{currentReferences:W}=(0,g.Pk)(),q=(0,D.b)(),K=(0,m.useRef)(null),G=(0,tj.g)(K),[Q,J]=(0,m.useState)(!1);E[0]!==W?(t=(0,v.rT)(W),E[0]=W,E[1]=t):t=E[1];let Y=t,{setSelectedCopilotSpaceId:Z}=(0,tS.O)(),X=(0,m.useRef)(null);E[2]===Symbol.for("react.memo_cache_sentinel")?(n={containerRef:X,focusableElementFilter:tA,bindKeys:t_.z0.ArrowHorizontal|t_.z0.HomeAndEnd,focusInStrategy:"previous",focusOutBehavior:"stop"},E[2]=n):n=E[2],E[3]!==Y?(a=[Y],E[3]=Y,E[4]=a):a=E[4],(0,tC.G)(n,a),E[5]===Symbol.for("react.memo_cache_sentinel")?(s=[],E[5]=s):s=E[5];let ee=(0,m.useRef)(s),et=(e,t)=>{let n=ee.current[t+1]??ee.current[t-1]??L.current;n?.focus(),U?.(e),(0,v.yA)(e)&&Z(void 0),q.removeReference(e)};E[6]!==q||E[7]!==L||E[8]!==Y||E[9]!==Z?(o=()=>{setTimeout(()=>L.current?.focus()),Y.filter(v.yA).length>0&&Z(void 0),q.clearCurrentReferences()},E[6]=q,E[7]=L,E[8]=Y,E[9]=Z,E[10]=o):o=E[10];let en=o,ea=(0,m.useRef)(Y);E[11]!==Y?(c=()=>{if(ea.current.length<Y.length){let e=Y.find(e=>!ea.current.find(t=>(0,v.x_)(t,e))),t=e?Y.indexOf(e):-1;ee?.current?.[t]?.scrollIntoView({behavior:"smooth",block:"nearest",inline:"end"})}ea.current=Y},p=[Y],E[11]=Y,E[12]=c,E[13]=p):(c=E[12],p=E[13]),(0,H.N)(c,p),E[14]!==$?(h=()=>{$?.()},E[14]=$,E[15]=h):h=E[15];let er=h;E[16]===Symbol.for("react.memo_cache_sentinel")?(f=()=>{J(tR)},E[16]=f):f=E[16];let ei=f,es=function(e,t,n,a){let r,s,o,l,c,d=(0,i.c)(14),[u,p]=(0,m.useState)(!1);d[0]!==a||d[1]!==t?(r=()=>{t.current&&p(t.current.some(e=>{if(!e)return!1;let t=e.querySelector(a);return!!t&&t.scrollWidth>t.clientWidth}))},d[0]=a,d[1]=t,d[2]=r):r=d[2];let h=r;return d[3]!==h||d[4]!==e.length?(s=()=>{if(0===e.length)return void p(!1);let t=requestAnimationFrame(h);return()=>cancelAnimationFrame(t)},d[3]=h,d[4]=e.length,d[5]=s):s=d[5],d[6]!==h||d[7]!==e?(o=[e,h],d[6]=h,d[7]=e,d[8]=o):o=d[8],(0,m.useEffect)(s,o),d[9]!==h||d[10]!==n||d[11]!==e.length?(l=()=>{if(0===e.length||!n.current)return;let t=new ResizeObserver(()=>{h()});return t.observe(n.current),()=>{t.disconnect()}},c=[e.length,h,n],d[9]=h,d[10]=n,d[11]=e.length,d[12]=l,d[13]=c):(l=d[12],c=d[13]),(0,m.useEffect)(l,c),u}(Y,ee,X,`.${tI.A.name}`),eo=(0,m.useId)();E[17]!==er||E[18]!==F?(y=e=>{("Delete"===e.key||"Backspace"===e.key)&&(e.preventDefault(),e.stopPropagation(),F&&er())},E[17]=er,E[18]=F,E[19]=y):y=E[19];let el=y;if(0===Y.length&&!R&&!F)return null;E[20]!==A?(x=(0,_.$)(A,tw.container),E[20]=A,E[21]=x):x=E[21];let ec=G&&tw.scrolledToEnd,ed=R&&tw.loading;E[22]!==ec||E[23]!==ed?(C=(0,_.$)(tw.attachmentsList,ec,ed),E[22]=ec,E[23]=ed,E[24]=C):C=E[24],E[25]!==eo||E[26]!==er||E[27]!==B||E[28]!==el||E[29]!==F||E[30]!==V?(S=F&&(0,r.jsxs)("div",{className:tw.convertToFileContainer,children:[(0,r.jsx)(k.Q,{onClick:B,leadingVisual:T.FileIcon,className:tw.convertToFileButton,"aria-describedby":eo,onKeyDown:el,children:"Convert to file"}),(0,r.jsx)(tN.lh,{size:V,onRemove:er,descriptionId:eo})]}),E[25]=eo,E[26]=er,E[27]=B,E[28]=el,E[29]=F,E[30]=V,E[31]=S):S=E[31];let eu=Y.map((e,t)=>"repository"===e.type?(0,r.jsx)(tT,{reference:e,ref:e=>{ee.current[t]=e},"data-index":t,size:V,fullWidth:Q,onRemove:()=>et(e,t),onClick:M,getReferenceVersion:O},(0,v.Vb)(e)):(0,r.jsx)(tN.BR,{reference:e,ref:e=>{ee.current[t]=e},"data-index":t,size:V,fullWidth:Q,onRemove:()=>et(e,t),onClick:M,getReferenceVersion:O},(0,v.Vb)(e)));return E[32]!==R?(j=R&&(0,r.jsxs)("div",{className:tw.functionLoading,...(0,N.G)("loading-indicator"),children:[(0,r.jsx)(d.A,{size:"small"}),"Retrieving\u2026"]}),E[32]=R,E[33]=j):j=E[33],E[34]!==C||E[35]!==S||E[36]!==eu||E[37]!==j?(b=(0,r.jsxs)("div",{className:C,ref:K,children:[S,eu,j]}),E[34]=C,E[35]=S,E[36]=eu,E[37]=j,E[38]=b):b=E[38],E[39]!==ei||E[40]!==es||E[41]!==z||E[42]!==en||E[43]!==Y.length||E[44]!==Q||E[45]!==V?(w=Y.length>0&&!z&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:tw.divider}),(0,r.jsxs)(l.W,{children:[(0,r.jsx)(l.W.Anchor,{children:(0,r.jsx)(ew.K,{icon:T.KebabHorizontalIcon,"aria-label":"Attachments options",variant:"invisible",tooltipDirection:"n",className:tw.menuButton,size:V})}),(0,r.jsx)(l.W.Overlay,{width:"small",children:(0,r.jsxs)(u.l,{children:[es&&(0,r.jsxs)(u.l.Item,{onSelect:ei,children:[(0,r.jsx)(u.l.LeadingVisual,{children:Q?(0,r.jsx)(T.EyeClosedIcon,{}):(0,r.jsx)(T.EyeIcon,{})}),Q?"Hide full attachment names":"Show full attachment names"]}),(0,r.jsxs)(u.l.Item,{onSelect:en,children:[(0,r.jsx)(u.l.LeadingVisual,{children:(0,r.jsx)(T.TrashIcon,{})}),"Remove attachments"]})]})})]})]}),E[39]=ei,E[40]=es,E[41]=z,E[42]=en,E[43]=Y.length,E[44]=Q,E[45]=V,E[46]=w):w=E[46],E[47]!==x||E[48]!==b||E[49]!==w?(I=(0,r.jsxs)("div",{role:"toolbar","aria-label":"Attachments",className:x,ref:X,children:[b,w]}),E[47]=x,E[48]=b,E[49]=w,E[50]=I):I=E[50],I});tE.displayName="ChatInputReferences";let tT=(0,m.forwardRef)(function(e,t){let n,a,s,o=(0,i.c)(8),l=e.reference,c=(0,g.pn)(tk),d=`${l.ownerLogin}/${l.name}`,[u,p]=(0,tb.vn)(d),h=(0,m.useRef)(!1),f=u.code===tb.W5.Unindexed||u.docs===tb.W5.Unindexed;return o[0]!==c||o[1]!==f||o[2]!==p?(n=function(){!h.current&&f&&c&&(h.current=!0,p())},a=[c,f,p],o[0]=c,o[1]=f,o[2]=p,o[3]=n,o[4]=a):(n=o[3],a=o[4]),(0,m.useEffect)(n,a),o[5]!==e||o[6]!==t?(s=(0,r.jsx)(tN.BR,{ref:t,...e}),o[5]=e,o[6]=t,o[7]=s):s=o[7],s});try{tT.displayName||(tT.displayName="RepoReferenceToken")}catch{}try{tT.displayName||(tT.displayName="RepoReferenceToken")}catch{}function tA(e){return!e.hasAttribute("aria-hidden")}function tR(e){return!e}function tk(e){return e.model&&!e.model.hasLimitedCapabilities}var tL=n(81829);let tP=()=>{let e,t=(0,i.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)("svg",{"aria-label":"Tool",xmlns:"http://www.w3.org/2000/svg",width:"17",height:"16",fill:"none",viewBox:"0 0 17 16",children:(0,r.jsx)("path",{fill:"currentColor",d:"M6.146 2.344A6 6 0 0 1 11.44.679c.659.117 1.087.598 1.21 1.155a1.68 1.68 0 0 1-.47 1.544L10.19 5.371a.25.25 0 0 0-.069.224l.17.89c.02.101.098.18.198.199l.891.17a.25.25 0 0 0 .224-.069l1.994-1.993a1.68 1.68 0 0 1 1.544-.469 1.48 1.48 0 0 1 1.155 1.211 6 6 0 0 1-1.665 5.295 6 6 0 0 1-5.553 1.614c-.182-.041-.312.015-.37.076l-2.24 2.47a.75.75 0 0 1-1.11-1.007l2.249-2.48c.488-.527 1.199-.658 1.797-.524a4.5 4.5 0 0 0 4.166-1.21 4.5 4.5 0 0 0 1.249-3.972l-.003-.008c-.028-.005-.094 0-.159.065l-1.994 1.993c-.41.41-.996.59-1.565.481l-.89-.17a1.75 1.75 0 0 1-1.392-1.39l-.17-.89a1.75 1.75 0 0 1 .482-1.566l1.993-1.993c.065-.065.07-.132.065-.16l-.008-.003a4.5 4.5 0 0 0-3.972 1.25 4.5 4.5 0 0 0-1.21 4.165c.133.599.004 1.31-.522 1.797l-.007.006-2.474 2.244a.75.75 0 0 1-1.008-1.111l2.47-2.24c.061-.058.118-.187.077-.37a6 6 0 0 1 1.614-5.552"})}),t[0]=e):e=t[0],e};try{tP.displayName||(tP.displayName="MCPIcon")}catch{}var tM=n(97793),tO=n(97665),tF=n(99511),tD=n(40480),tB=n(26382);let t$={container:"McpToolsManager-module__container--PHa2N",header:"McpToolsManager-module__header--PXzkx",headerTitle:"McpToolsManager-module__headerTitle--CiuwN",searchInput:"McpToolsManager-module__searchInput--v2pAX",contentArea:"McpToolsManager-module__contentArea--aqxn4",loadingContainer:"McpToolsManager-module__loadingContainer--btAEV",emptyState:"McpToolsManager-module__emptyState--qpgwB",emptyStateTitle:"McpToolsManager-module__emptyStateTitle--PLCEY",emptyStateDescription:"McpToolsManager-module__emptyStateDescription--x7TOI",footer:"McpToolsManager-module__footer--UZmCo",serverName:"McpToolsManager-module__serverName--au45P",toolItem:"McpToolsManager-module__toolItem--Eo5Ka",toolNameContainer:"McpToolsManager-module__toolNameContainer--VKNAW",toolName:"McpToolsManager-module__toolName--EL2OQ",toolDescription:"McpToolsManager-module__toolDescription--nn86Q"},tz=({anchorRef:e,open:t,onOpenChange:n})=>{let[a,i]=(0,m.useState)(!1),[s,o]=(0,m.useState)(""),[l,c]=(0,m.useState)(null),[u,p]=(0,m.useState)(()=>new Set),{service:h}=(0,D.b)(),g=(0,tO.jE)(),{data:f,isPending:y,isError:x}=(0,tt.I)({enabled:t,queryKey:["copilot-chat-mcps"],queryFn:async()=>h.fetchMCPServers(),placeholderData:e=>e}),v=(0,m.useMemo)(()=>f||[],[f]),_=(0,m.useMemo)(()=>v.filter(e=>e.name.toLowerCase().includes(s.toLowerCase())),[v,s]),C=e=>{p(t=>{let n=new Set(t);return n.has(e)?n.delete(e):n.add(e),n})};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(eI.T,{open:t,onOpen:()=>n(!0),onClose:()=>n(!1),anchorRef:e,side:"outside-bottom",align:"end",renderAnchor:()=>(0,r.jsx)(r.Fragment,{}),width:"medium",children:(0,r.jsxs)("div",{className:t$.container,children:[(0,r.jsxs)("div",{className:t$.header,children:[(0,r.jsx)("div",{className:t$.headerTitle,children:"MCP Servers"}),(0,r.jsx)(tF.A,{placeholder:"Search by provider",value:s,onChange:e=>o(e.target.value),className:t$.searchInput,leadingVisual:T.SearchIcon})]}),(0,r.jsx)("div",{className:t$.contentArea,children:y?(0,r.jsx)("div",{className:t$.loadingContainer,children:(0,r.jsx)(d.A,{})}):x?(0,r.jsxs)(tB.E,{children:[(0,r.jsx)(tB.E.Visual,{children:"\u26A0\uFE0F"}),(0,r.jsx)(tB.E.Heading,{children:"Error loading tools"})]}):0===v.length?(0,r.jsxs)("div",{className:t$.emptyState,children:[(0,r.jsx)(T.ToolsIcon,{size:24}),(0,r.jsx)("div",{className:t$.emptyStateTitle,children:"You don't have any MCP tools configured"}),(0,r.jsx)("div",{className:t$.emptyStateDescription,children:"Add one to connect models to files, APIs, databases, and more."})]}):(0,r.jsx)(tD.G,{"aria-label":"MCP server selection",children:_.map(e=>(0,r.jsxs)(tD.G.Item,{id:e.id,onSelect:()=>(e=>{c(e),C(e)})(e.id),expanded:u.has(e.id),onExpandedChange:()=>C(e.id),current:l===e.id,"aria-selected":l===e.id,children:[(0,r.jsx)("span",{className:t$.serverName,children:e.name}),e.tools&&e.tools.length>0?(0,r.jsx)(tD.G.SubTree,{children:(e=>e.length>0&&"object"==typeof e[0]&&"name"in e[0])(e.tools)?e.tools.map(t=>{let n=`${e.id}-${t.name}`,a=l===n;return(0,r.jsx)(tD.G.Item,{id:n,current:a,"aria-selected":a,onSelect:()=>{!a&&b.W.mcpToolDescriptions?c(n):c(null)},children:b.W.mcpToolDescriptions?(0,r.jsxs)("div",{className:t$.toolItem,children:[(0,r.jsxs)("div",{className:t$.toolNameContainer,children:[a?(0,r.jsx)(T.DashIcon,{size:12}):(0,r.jsx)(T.PlusIcon,{size:12}),(0,r.jsx)("span",{className:t$.toolName,children:t.name})]}),t.description&&a&&(0,r.jsx)("div",{className:t$.toolDescription,children:t.description})]}):t.name},t.name)}):e.tools.map(t=>{let n=`${e.id}-${t}`;return(0,r.jsx)(tD.G.Item,{id:n,onSelect:()=>c(n),current:l===n,"aria-selected":l===n,children:t},t)})}):null]},e.id))})}),(0,r.jsx)("div",{className:t$.footer,children:(0,r.jsx)(k.Q,{variant:"default",leadingVisual:T.PlusIcon,onClick:()=>{i(!0)},block:!0,children:"New tool"})})]})},"mcp-tool-manager"),(0,r.jsx)(tM.O,{isOpen:a,onClose:()=>{i(!1)},onServerAdded:()=>{g.invalidateQueries({queryKey:["copilot-chat-mcps"]})}})]})};try{tz.displayName||(tz.displayName="McpToolsManager")}catch{}let tU=()=>{let e,t=(0,i.c)(2),[n,a]=(0,m.useState)(!1),s=(0,m.useRef)(null);return t[0]!==n?(e=(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(ew.K,{ref:s,icon:tP,variant:"invisible","aria-label":"MCP tools",onClick:()=>a(!n)}),(0,r.jsx)(tz,{anchorRef:s,open:n,onOpenChange:a})]}),t[0]=n,t[1]=e):e=t[1],e};try{tU.displayName||(tU.displayName="McpToolMenu")}catch{}var tV=n(12970),tW=n(11196);function tH(){let e,t,n,a=(0,i.c)(8),s=(0,D.b)(),{usePlanningIntent:o,selectedThreadID:l}=(0,g.bP)("usePlanningIntent","selectedThreadID");a[0]!==s||a[1]!==o?(e=()=>s.setUsePlanningIntent(!o),a[0]=s,a[1]=o,a[2]=e):e=a[2];let c=e;if(l){let e;return a[3]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)(tW.m,{text:"Planning mode is enabled and cannot be toggled after the conversation has started.",children:(0,r.jsx)(k.Q,{leadingVisual:T.TasklistIcon,inactive:!0,"aria-disabled":!0,"aria-pressed":!0,children:"Plan"})}),a[3]=e):e=a[3],e}return a[4]===Symbol.for("react.memo_cache_sentinel")?(t=(0,r.jsx)(T.TasklistIcon,{}),a[4]=t):t=a[4],a[5]!==c||a[6]!==o?(n=(0,r.jsx)(S,{icon:t,isSelected:o,onClick:c,children:"Plan"}),a[5]=c,a[6]=o,a[7]=n):n=a[7],n}try{tH.displayName||(tH.displayName="PlanningIntentToggle")}catch{}var tq=n(66990),tK=n(46642),tG=n(63422);function tQ(e){let t,n,a,s,o,c,m,p,h,g,f=(0,i.c)(26),{nwo:y,branch:x,selectedAgent:v,onSelect:_}=e,{data:C,isLoading:S}=function(e){let t,n,a,r=(0,i.c)(7),s=!!e;return r[0]!==e?(t=["custom-agents",e],n=async()=>{try{let t=await (0,P.DI)(`/agents/swe/custom-agents/${e}`);if(404===t.status)return[];return(await t.json()).agents}catch{return[]}},r[0]=e,r[1]=t,r[2]=n):(t=r[1],n=r[2]),r[3]!==s||r[4]!==t||r[5]!==n?(a={enabled:s,queryKey:t,queryFn:n},r[3]=s,r[4]=t,r[5]=n,r[6]=a):a=r[6],(0,tt.I)(a)}(y);f[0]!==C||f[1]!==v?(t=C?.find(e=>e.name===v),f[0]=C,f[1]=v,f[2]=t):t=f[2];let j=t,b=j?.display_name||j?.name;if(f[3]!==x||f[4]!==y){let e=new URLSearchParams({filename:".github/agents/my-agent.md",value:`---
name:
description:
---

# My Agent

Describe what your agent does here...`});n=y,a=x,s=e.toString(),f[3]=x,f[4]=y,f[5]=n,f[6]=a,f[7]=s}else n=f[5],a=f[6],s=f[7];let w=`/${n}/new/${a}?${s}`,N=b?`Select a custom agent, selected: ${b}`:"Select a custom agent",I=!y||!x,E=!!v;return f[8]!==N||f[9]!==I||f[10]!==E?(o=(0,r.jsx)(l.W.Anchor,{children:(0,r.jsx)(tG.L,{icon:tJ,"aria-label":N,selected:E,disabled:I})}),f[8]=N,f[9]=I,f[10]=E,f[11]=o):o=f[11],f[12]!==C||f[13]!==S||f[14]!==_||f[15]!==v?(c=S?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(u.l.Item,{children:[(0,r.jsx)(u.l.LeadingVisual,{children:(0,r.jsx)(d.A,{size:"small"})}),"Loading"]}),(0,r.jsx)(u.l.Divider,{})]}):C&&C.length>0&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(u.l.Group,{selectionVariant:"single",children:[(0,r.jsx)(u.l.Item,{selected:null===v,onSelect:()=>_(void 0),children:"None"}),C.map(e=>(0,r.jsx)(u.l.Item,{selected:v===e.name,onSelect:()=>_(e.name),children:e.display_name||e.name},e.name))]}),(0,r.jsx)(u.l.Divider,{})]}),f[12]=C,f[13]=S,f[14]=_,f[15]=v,f[16]=c):c=f[16],f[17]===Symbol.for("react.memo_cache_sentinel")?(m=(0,r.jsx)(u.l.LeadingVisual,{children:(0,r.jsx)(T.PlusIcon,{})}),f[17]=m):m=f[17],f[18]!==w?(p=(0,r.jsx)(u.l.Group,{selectionVariant:!1,children:(0,r.jsxs)(u.l.LinkItem,{href:w,target:"_blank",children:[m,"Create an agent"]})}),f[18]=w,f[19]=p):p=f[19],f[20]!==c||f[21]!==p?(h=(0,r.jsx)(l.W.Overlay,{width:"auto",children:(0,r.jsxs)(u.l,{children:[c,p]})}),f[20]=c,f[21]=p,f[22]=h):h=f[22],f[23]!==h||f[24]!==o?(g=(0,r.jsxs)(l.W,{children:[o,h]}),f[23]=h,f[24]=o,f[25]=g):g=f[25],g}let tJ=e=>{let t,n,a,s,o=(0,i.c)(5);return o[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,r.jsx)("path",{d:"M5.75 7.5C6.16421 7.5 6.5 7.83579 6.5 8.25V9.75C6.5 10.1642 6.16421 10.5 5.75 10.5C5.33579 10.5 5 10.1642 5 9.75V8.25C5 7.83579 5.33579 7.5 5.75 7.5Z",fill:"currentColor"}),n=(0,r.jsx)("path",{d:"M11 8.25C11 7.83579 10.6642 7.5 10.25 7.5C9.83579 7.5 9.5 7.83579 9.5 8.25V9.75C9.5 10.1642 9.83579 10.5 10.25 10.5C10.6642 10.5 11 10.1642 11 9.75V8.25Z",fill:"currentColor"}),a=(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.25 0C5.83579 0 5.5 0.335786 5.5 0.75C5.5 1.16421 5.83579 1.5 6.25 1.5H7.5V3.5H3.75C2.50736 3.5 1.5 4.50736 1.5 5.75V8H0.75C0.335786 8 0 8.33579 0 8.75C0 9.16421 0.335786 9.5 0.75 9.5H1.5V12.25C1.5 13.4926 2.50736 14.5 3.75 14.5H12.25C13.4926 14.5 14.5 13.4926 14.5 12.25V9.5H15.25C15.6642 9.5 16 9.16421 16 8.75C16 8.33579 15.6642 8 15.25 8H14.5V5.75C14.5 4.50736 13.4926 3.5 12.25 3.5H9V0.75C9 0.335786 8.66421 0 8.25 0H6.25ZM3 5.75C3 5.33579 3.33579 5 3.75 5H12.25C12.6642 5 13 5.33579 13 5.75V12.25C13 12.6642 12.6642 13 12.25 13H3.75C3.33579 13 3 12.6642 3 12.25V5.75Z",fill:"currentColor"}),o[0]=t,o[1]=n,o[2]=a):(t=o[0],n=o[1],a=o[2]),o[3]!==e?(s=(0,r.jsxs)("svg",{width:"16",height:"15",viewBox:"0 0 16 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:[t,n,a]}),o[3]=e,o[4]=s):s=o[4],s};try{tQ.displayName||(tQ.displayName="CustomAgentSelector")}catch{}let tY={container:"RepoBranchAgentSelector-module__container--gHrlH"},tZ=e=>{let t,n,a,s,o,l,c=(0,i.c)(23),{selectedRepo:d,selectedBranch:u,selectedCustomAgent:m,onRepoSelect:p,onBranchSelect:h,onCustomAgentSelect:g,agentSelectionEnabled:f}=e,y=void 0===f||f;c[0]!==h||c[1]!==p?(t=e=>{e&&(p(e),h(e.defaultBranch))},c[0]=h,c[1]=p,c[2]=t):t=c[2];let x=`Repository: ${d?.nameWithOwner||"Select repository"}`;return c[3]!==x?(n={"aria-label":x},c[3]=x,c[4]=n):n=c[4],c[5]!==d||c[6]!==t||c[7]!==n?(a=(0,r.jsx)(tK.P,{repositoryLoader:tX,selectionVariant:"single",selectAllOption:!1,onSelect:t,currentSelection:d,width:"medium",additionalButtonProps:n}),c[5]=d,c[6]=t,c[7]=n,c[8]=a):a=c[8],c[9]!==h||c[10]!==u||c[11]!==d?(s=(0,r.jsx)(r.Fragment,{children:d?(0,r.jsx)(tq.PI,{cacheKey:"repo-branch-agent-selector",canCreate:!1,currentCommitish:u??d.defaultBranch,defaultBranch:d.defaultBranch,owner:d.owner,repo:d.nameOnly,types:["branch"],selectedRefType:"branch",closeOnSelect:!0,hideShowAll:!0,actionListHeadingText:"Select a branch",onSelectItem:h,renderAnchor:e=>(0,r.jsx)(tG.L,{...e,icon:T.GitBranchIcon,selected:u!==d.defaultBranch,"aria-label":`Branch: ${u||"Select branch"}`,"aria-labelledby":void 0})}):(0,r.jsx)(tG.L,{icon:T.GitBranchIcon,selected:!1,"aria-label":"Select branch",disabled:!0})}),c[9]=h,c[10]=u,c[11]=d,c[12]=s):s=c[12],c[13]!==y||c[14]!==g||c[15]!==u||c[16]!==m||c[17]!==d?.nameWithOwner?(o=y&&(0,r.jsx)(tQ,{nwo:d?.nameWithOwner,branch:u,selectedAgent:m,onSelect:g}),c[13]=y,c[14]=g,c[15]=u,c[16]=m,c[17]=d?.nameWithOwner,c[18]=o):o=c[18],c[19]!==a||c[20]!==s||c[21]!==o?(l=(0,r.jsxs)("div",{className:tY.container,children:[a,s,o]}),c[19]=a,c[20]=s,c[21]=o,c[22]=l):l=c[22],l};async function tX(e="",t){let n=new URL("/copilot/agent-sessions/repositories",window.location.origin);e.trim()&&n.searchParams.set("q",e.trim()),t&&n.searchParams.set("defaultOwner",t);let a=await (0,P.lS)(n.href);if(a.ok){let{repositories:e}=await a.json();return e.map(e=>({id:e.id,nameWithOwner:e.nameWithOwner,enabled:!0,name:e.nameWithOwner,owner:e.owner,nameOnly:e.name,defaultBranch:e.defaultBranch,visibility:e.visibility}))}return[]}try{tZ.displayName||(tZ.displayName="RepoBranchAgentPicker")}catch{}let t0=["github:cancel","copilot-chat:send-message","copilot-chat:edit-last-message"],t1=e=>{let t,n,a,l,c,d,u,p,h,f,y,C,S,j,w,T,R,k,Q,J,el,ec,ed,eu,em,ep,eh,eg,ef,ey,ex,ev,e_,eC,eS,ej,eb,ew,eN,eI,eE,eT=(0,i.c)(184),eA=(0,g.bP)("defaultRecipient","isWaitingOnAttachment","attachmentProcessingType","isWaitingOnCopilot","messages","mode","model","selectedThreadID","skillOptions","slashCommandLoading","thirdPartyMcpAllowed"),{model:eR}=eA,ek=(0,eo.tD)(),eL=(0,D.b)();eT[0]!==eL?(t=eL.maxMessagesReached(),eT[0]=eL,eT[1]=t):t=eT[1];let eP=t,[eM,eO]=(0,m.useState)(null),eF="loading"===eA.slashCommandLoading.state,{safeSetTimeout:eD}=(0,A.A)(),{onSelectReference:eB}=e,e$=(0,m.useRef)(null),ez=(0,m.useRef)(""),eU=(0,m.useRef)(!1),eV=(0,F.qw)(),{activeCopilotSpaceId:eW}=(0,x.C)();eT[2]!==e.activeModeName||eT[3]!==e.modes?(n=e.modes.find(t=>t.name===e.activeModeName)||e.modes[0],eT[2]=e.activeModeName,eT[3]=e.modes,eT[4]=n):n=eT[4];let eq=n;eT[5]!==eL||eT[6]!==e.initialReference?(a=()=>{e.initialReference&&eL.addReference(e.initialReference,"page-file-reference")},l=[e.initialReference,eL],eT[5]=eL,eT[6]=e.initialReference,eT[7]=a,eT[8]=l):(a=eT[7],l=eT[8]),(0,m.useEffect)(a,l),eT[9]!==eM||eT[10]!==eA.mode?(c=e=>{e$.current=null,ez.current="",eU.current=!1,eM&&(eO(null),void 0!==e&&e&&(0,s.BI)("dotcom_chat.activate",{target:"CONVERT_TO_FILE_DISMISS",mode:eA.mode}))},eT[9]=eM,eT[10]=eA.mode,eT[11]=c):c=eT[11];let eK=c,eG=eA.isWaitingOnCopilot||eA.isWaitingOnAttachment||eF,eQ=e.isNewConversation||!1;eT[12]!==eK||eT[13]!==e.onChatCommandChange||eT[14]!==e.onSubmit||eT[15]!==e.textAreaRef||eT[16]!==eG||eT[17]!==eQ?(d={isLoading:eG,onSubmit:e.onSubmit,textAreaRef:e.textAreaRef,clearPastedFile:eK,isNewConversation:eQ,onChatCommandChange:e.onChatCommandChange},eT[12]=eK,eT[13]=e.onChatCommandChange,eT[14]=e.onSubmit,eT[15]=e.textAreaRef,eT[16]=eG,eT[17]=eQ,eT[18]=d):d=eT[18];let{typingHasStarted:eJ,textAreaRef:eY,textareaPreviewRef:eZ,textAreaPreviewContainerRef:eX,text:e0,setText:e1,handleSubmit:e2,handleSubmitToNewThread:e5,handleScroll:e3,handleChange:e4,handleStop:e7,handleFocus:e6,selectedRepo:e8,setSelectedRepo:e9,selectedBranch:te,setSelectedBranch:tt,selectedCustomAgent:tn,setSelectedCustomAgent:ta}=function(e){let t=(0,g.Pk)(),n=(0,D.b)(),a=(0,q.Z)(),{selectedThreadID:r,mode:i,autoSubmit:l,model:c}=t,{clearPastedFile:d,isLoading:u,onSubmit:p,onChatCommandChange:h,isNewConversation:f}=e,y=G.Jt.getSavedMessage(r),x=G.Jt.getSavedUserMessageOnError(r),{pathname:v}=(0,o.zy)(),[_,C]=(0,o.ok)(),[S,j]=(0,m.useState)(()=>et(t.mode,v,_)??x??y??""),[w,N]=(0,m.useState)(null),[I,E]=(0,m.useState)(!1),T=(0,m.useRef)(null),R=e.textAreaRef||T,k=(0,m.useRef)(null),L=(0,m.useRef)(null),P=(0,m.useRef)(0),M=(0,m.useRef)(null),O=(0,m.useRef)(()=>{}),B=(0,m.useRef)(!1),$=(0,Z.GF)(t.availableModels),z=(0,m.useRef)(r),{safeSetTimeout:U}=(0,A.A)(),V=(0,m.useRef)(0),W=(0,F.qw)(),[Q,J]=(0,ee.T)(),[en,ea]=(0,m.useState)(()=>{if(Q){let e=`${Q.ownerLogin}/${Q.name}`;return{id:Q.id,nameWithOwner:e,enabled:!0,name:e,owner:Q.ownerLogin,nameOnly:Q.name,defaultBranch:Q.defaultBranch||"main",visibility:Q.visibility}}}),er=(0,m.useCallback)(e=>{ea(e),(async()=>{if(e){let t=await n.service.fetchRepo(e.id);t.ok&&t.payload&&J(t.payload)}})()},[n.service,J]),[ei,es]=(0,m.useState)(()=>en?.defaultBranch),[eo,el]=(0,m.useState)(void 0),ec=(0,m.useCallback)(async()=>{t.renderAttachKnowledgeBaseHerePopover&&await n.fetchKnowledgeBases()},[n,t.renderAttachKnowledgeBaseHerePopover]);(0,m.useEffect)(()=>{ec()},[ec]),(0,m.useEffect)(()=>{if(!b.W.stableConversationView)return void G.Jt.setSavedMessage(r,S);r===z.current?G.Jt.setSavedMessage(r,S):(j(G.Jt.getSavedMessage(r)||""),z.current=r)},[r,S]),(0,H.N)(()=>{let e=0;!function t(){if(!R.current||!L.current||!k.current)return;if(e++,"assistive"===i&&0===R.current.scrollHeight&&e<10)return void U(t,1);if(0===S.length&&56===V.current)return;R.current.style.height="0";let n=R.current.scrollHeight,a=Math.min(n,300);k.current.style.height=`${n}px`,R.current.style.height=`${n}px`,L.current.style.height=`${a}px`,V.current=a}()},[i,U,S,R,k]);let ed=(0,m.useCallback)(()=>{R?.current&&k?.current&&L?.current&&(k.current.scrollTop=R.current.scrollTop,k.current.scrollLeft=R.current.scrollLeft)},[R]),eu=(0,m.useMemo)(()=>t.currentReferences.filter(e=>!("isClientOnly"in e)||!e.isClientOnly),[t.currentReferences]),em=(0,m.useCallback)(async e=>{if(E(!1),G.Jt.clearSavedUserMessage(r),G.Jt.clearSavedUserMessageOnError(r),t.defaultRecipient&&!S.includes(`@${t.defaultRecipient}`)&&n.clearDefaultRecipient(),e?.preventDefault(),await Y(S,t,n,a,W,{selectedRepo:en,selectedBranch:ei})){(0,s.BI)("dotcom_chat.activate",{target:"SLASH_COMMAND_EXECUTED",mode:t.mode,command:S}),"/new"===S.trim()&&G.Jt.setSavedMessageFast(r,null),j("");return}if(!u){let e=S;if(!e){let[t,a]=n.tryInferMessage(eu);if(!t||!a)return;e=a}try{j(""),await p?.(e)}catch(t){if(t instanceof X.q)return void j(e);throw t}}},[u,n,a,p,W,r,eu,t,S,en,ei]),ep=(0,m.useCallback)(()=>n.sendMessageToNewThread(r,S,eu,t.context,$),[n,r,t.context,eu,S,$]);(0,m.useEffect)(()=>{(async()=>{let e=et(i,v,_),t=new URLSearchParams(_),n=t.get("model"),a=!n||n===c.id;e&&a&&!B.current&&(t.delete("prompt"),t.delete("model"),(0,s.BI)("dotcom_chat.activate",{target:"COPILOT_PROMPT_LOADED_FROM_URL",mode:"immersive"}),C(t,{replace:!0}),l&&(B.current=!0,await Promise.resolve(),await em()))})()},[v,_,C,i,l,c,em]);let eh=(0,m.useCallback)(e=>{E(!0),R?.current&&(j(e.target.value),d?.(),P.current=0,ed())},[ed,d,R]),eg=(0,m.useCallback)(async()=>{await n.stopStreaming(),null!=r&&(n.startThreadReload(),await new Promise(e=>{M.current=setTimeout(()=>e(r),6e3)}),O.current=await n.fetchMessages(r,!0,!0))},[n,r]);return(0,m.useEffect)(()=>{O.current&&(O.current(),O.current=()=>{})},[t.messages]),(0,m.useEffect)(()=>()=>{M.current&&(clearTimeout(M.current),M.current=null),n.cancelThreadReload(),O.current=()=>{}},[n]),(0,m.useEffect)(()=>{if(!f)return;let e=(0,K.V)(S,W);w!==e&&(N(e),h?.(e))},[f,S,w,h,W]),{typingHasStarted:I,textAreaRef:R,textareaPreviewRef:k,textAreaPreviewContainerRef:L,text:S,setText:j,command:w,setCommand:N,handleSubmit:em,handleSubmitToNewThread:ep,handleScroll:ed,handleChange:eh,handleStop:eg,handleFocus:e=>{e.currentTarget.selectionStart>0||e.currentTarget.setSelectionRange(e.currentTarget.value.length,e.currentTarget.value.length)},selectedRepo:en,setSelectedRepo:er,selectedBranch:ei,setSelectedBranch:es,selectedCustomAgent:eo,setSelectedCustomAgent:el}}(d);eT[19]!==e1?(u=()=>({setText:e1}),p=[e1],eT[19]=e1,eT[20]=u,eT[21]=p):(u=eT[20],p=eT[21]),(0,m.useImperativeHandle)(e.chatInputRef,u,p),eT[22]!==e4||eT[23]!==eY?(h={inputRef:eY,fallbackEventHandler:e4},eT[22]=e4,eT[23]=eY,eT[24]=h):h=eT[24];let tr=(0,E.H)(h);eT[25]!==tr||eT[26]!==e.figmaAuthUrl||eT[27]!==eY?(f={figmaAuthUrl:e.figmaAuthUrl,textAreaRef:eY,emitChange:tr},eT[25]=tr,eT[26]=e.figmaAuthUrl,eT[27]=eY,eT[28]=f):f=eT[28];let{replaceUrlWithReferenceMention:ti}=function(e){let t,n,a,r,s,o,l,c,d,u,m,p,h=(0,i.c)(35),{figmaAuthUrl:f,textAreaRef:y,emitChange:x}=e,_=(0,D.b)(),{currentReferences:C}=(0,g.Pk)();h[0]!==x||h[1]!==y?(t=(e,t,n)=>{if(!y.current||e===t)return;let a=n?.[0]??0,r=y.current.value.slice(a,n?.[1]),i=r.indexOf(e);for(;i>-1;){let n=i+e.length;x(t,[i+a,n+a]),i=(r=r.replace(e,t)).indexOf(e)}},h[0]=x,h[1]=y,h[2]=t):t=h[2];let S=t;h[3]!==_?(n=e=>{let{itemUrl:t}=e,n=(0,v.Vc)(t);return _.addReference(n,"url-attacher"),_.dispatch({type:"WAITING_ON_ATTACHMENT",loading:!0,attachmentType:"url-reference"}),n},h[3]=_,h[4]=n):n=h[4],h[5]!==S||h[6]!==_?(a=(e,t,n)=>{let{parsedReferenceMention:a}=t;_.replaceReference(n,e);let r=B.Q.for(e);if(!r)return;let i=B.Q.stringify(a),s=B.Q.stringify(r);i!==s&&S(i,s)},r=(e,t,n)=>{let{itemUrl:a,parsedReferenceMention:r}=t;_.removeReference(n),S(B.Q.stringify(r),a)},h[5]=S,h[6]=_,h[7]=a,h[8]=r):(a=h[7],r=h[8]),h[9]!==_?(s=()=>{_.dispatch({type:"WAITING_ON_ATTACHMENT",loading:!1})},h[9]=_,h[10]=s):s=h[10],h[11]!==n||h[12]!==a||h[13]!==r||h[14]!==s?(o={mutationFn:W,onMutate:n,onSuccess:a,onError:r,onSettled:s},h[11]=n,h[12]=a,h[13]=r,h[14]=s,h[15]=o):o=h[15];let j=(0,L.n)(o);h[16]!==_?(l=e=>{let t=(0,v.Vc)(e);return _.addReference(t,"figma-attacher"),_.dispatch({type:"WAITING_ON_ATTACHMENT",loading:!0,attachmentType:"url-reference"}),t},c=(e,t,n)=>{_.replaceReference(n,e)},h[16]=_,h[17]=l,h[18]=c):(l=h[17],c=h[18]),h[19]!==f||h[20]!==_?(d=(e,t,n)=>{n&&f&&e instanceof U?_.replaceReference(n,{type:"figma",title:"Sign in to Figma",id:`forbidden-${t}`,url:f,thumbnailUrl:"",fullImageUrl:"",authenticationRequired:!0}):_.removeReference(n)},h[19]=f,h[20]=_,h[21]=d):d=h[21],h[22]!==_?(u=()=>{_.dispatch({type:"WAITING_ON_ATTACHMENT",loading:!1})},h[22]=_,h[23]=u):u=h[23],h[24]!==u||h[25]!==l||h[26]!==c||h[27]!==d?(m={mutationFn:V,onMutate:l,onSuccess:c,onError:d,onSettled:u},h[24]=u,h[25]=l,h[26]=c,h[27]=d,h[28]=m):m=h[28];let b=(0,L.n)(m);return h[29]!==C||h[30]!==b||h[31]!==S||h[32]!==j||h[33]!==y?(p={replaceUrlWithReferenceMention:e=>{let t=y.current?.value.slice(...e)??"";if(/\s/.test(t))return t;let n=B.Q.fromUrl(t);n&&(C.every(e=>!B.Q.refersTo(n,e))&&j.mutate({itemUrl:t,parsedReferenceMention:n}),S(t,B.Q.stringify(n),e));let a=z.exec(t);return a&&(b.mutate(t),S(t,a[1],e)),t}},h[29]=C,h[30]=b,h[31]=S,h[32]=j,h[33]=y,h[34]=p):p=h[34],p}(f),{isLoading:ts,addReferenceForMention:to,addReferencesForMentions:tl}=function(){let e=(0,D.b)(),{currentReferences:t,mode:n}=(0,g.Pk)(),a=(0,F.qw)(),r=(0,L.n)({mutationFn:async e=>{let t="repository"===e.type?[e.repo]:[e.repo,(e=>{switch(e){case"issue":return"issue";case"pull-request":return"pull_request";case"discussion":return"discussion";case"thread-scoped-file":case"file":return"file"}})(e.type),e.id??""],a=await (0,P.lS)(`/copilot/chat/reference/${t.join("/")}`);if(!a.ok)throw Error(`Failed to fetch reference data (${a.status}: ${a.statusText})`);return(0,s.BI)("dotcom_chat.activate",{target:"REFERENCE_LINK_PASTE",mode:n,linkType:e.type}),await a.json()},onSuccess:t=>e.addReference(t,"chatInput")}),i=e=>{t.every(t=>!B.Q.refersTo(e,t))&&r.mutate(e)};return{isLoading:r.isPending,addReferenceForMention:i,addReferencesForMentions:e=>{let n=(0,M.l)().use($.U,{references:t,agents:[],plugins:a}).parse(e),r=0;(0,O.YR)(n,e=>{"reference-mention"===e.type&&void 0===e.data.mentionedReferenceId&&r<20&&(r++,i(e.data.referenceMention))})}}}(),tc=(0,es.FQ)(),td=eW&&tc,tu=!!(eW&&tc);eT[29]!==eV||eT[30]!==e0?(y=(0,K.V)(e0,eV),eT[29]=eV,eT[30]=e0,eT[31]=y):y=eT[31];let tm=y,th=eF||ts||eA.isWaitingOnAttachment||!!e.submitDisabled||"task"===tm&&!e8&&!te,tf=0===e0.length;eT[32]!==e7||eT[33]!==eA.mode?(C=()=>{(0,s.BI)("dotcom_chat.activate",{target:"CHAT_MESSAGE_STOP",mode:eA.mode}),e7()},eT[32]=e7,eT[33]=eA.mode,eT[34]=C):C=eT[34];let ty=C;eT[35]!==eW||eT[36]!==eK||eT[37]!==e2||eT[38]!==tc||eT[39]!==eL||eT[40]!==eM||eT[41]!==tu||eT[42]!==eA.mode||eT[43]!==eA.selectedThreadID||eT[44]!==th?(S=async()=>{if(th)return;let e=eW?`${eW.owner}/${eW.id}`:"";(0,s.BI)("dotcom_chat.activate",{target:"CHAT_MESSAGE_SUBMIT",mode:eA.mode,selectedThreadId:eA.selectedThreadID,copilotSpace:e,fromSpaceUI:tc}),tu&&await eL.selectPendingThread(eW),eM&&eK(!1),e2()},eT[35]=eW,eT[36]=eK,eT[37]=e2,eT[38]=tc,eT[39]=eL,eT[40]=eM,eT[41]=tu,eT[42]=eA.mode,eT[43]=eA.selectedThreadID,eT[44]=th,eT[45]=S):S=eT[45];let tv=S;eT[46]!==eW||eT[47]!==e5||eT[48]!==eL||eT[49]!==tu||eT[50]!==th?(j=async()=>{th||(tu&&await eL.selectPendingThread(eW),e5())},eT[46]=eW,eT[47]=e5,eT[48]=eL,eT[49]=tu,eT[50]=th,eT[51]=j):j=eT[51];let t_=j;eT[52]!==eL||eT[53]!==eA.messages?(w=()=>{let e=eA.messages.findLast(t4)?.id;e&&eL.startEditingMessage(e)},eT[52]=eL,eT[53]=eA.messages,eT[54]=w):w=eT[54];let tC=w;e:{if(eA.isWaitingOnCopilot){T="Copilot is responding\u2026";break e}if(eA.defaultRecipient){T=void 0;break e}if(eP){T="Message limit reached. To continue chatting with Copilot, start a new conversation.";break e}T=eq.placeholder??"Ask anything"}let tS=T;eA.defaultRecipient&&""===e0&&!eJ&&e1(`@${eA.defaultRecipient} `);let tj=(0,m.useRef)(null),[tb,tw]=(0,m.useState)(null),[tN,tI]=(0,m.useState)(null);eT[55]!==eA.mode?(R=()=>{(0,s.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU",mode:eA.mode}),tw(t7)},eT[55]=eA.mode,eT[56]=R):R=eT[56];let tT=R;eT[57]!==eL||eT[58]!==eA.mode||eT[59]!==eA.skillOptions?.deepCodeSearch?(k=()=>{(0,s.BI)("dotcom_chat.activate",{target:"DEEP_CODESEARCH",mode:eA.mode}),eL.dispatch({type:"SET_DEEP_CODESEARCH",deepCodeSearch:!eA.skillOptions?.deepCodeSearch})},eT[57]=eL,eT[58]=eA.mode,eT[59]=eA.skillOptions?.deepCodeSearch,eT[60]=k):k=eT[60],eA.skillOptions?.deepCodeSearch;let tA=k,tR="immersive"===eA.mode&&!!eR.capabilities?.supports?.vision;eT[61]!==eW||eT[62]!==ek||eT[63]!==eL||eT[64]!==eR||eT[65]!==tu||eT[66]!==e.existingFileNames||eT[67]!==tR?(Q=async(t,n,a,r)=>{let i=new ea.s(ek(),eL),s=new ei.E(eL,e.existingFileNames),o=[];[...t].some(t6)&&!eR.capabilities?.supports?.vision&&(eL.addAmbientError(`The ${eR.displayName} model doesn't support answering questions about images. Select a different model and try again.`),(0,er.d)("vision_not_supported_for_model",{modelId:eR.id,uploadType:n}));let[l,c]=ea.s.getAllowedFiles([...t],eR);if(tR){let e=await i.addImageAttachments(l,n,eW,tu);e&&o.push(...e)}let d=[];for(let e of c)if(await ei.E.isAttachable(e)){let t=await s.addAttachment(e,a,r);t&&o.push(t)}else d.push(e.type);return tR&&d.length>0&&(0,er.d)("included_unsupported_file",{fileTypes:d.join(","),uploadType:n}),o},eT[61]=eW,eT[62]=ek,eT[63]=eL,eT[64]=eR,eT[65]=tu,eT[66]=e.existingFileNames,eT[67]=tR,eT[68]=Q):Q=eT[68];let tk=Q;eT[69]!==eK||eT[70]!==tk||eT[71]!==eM||eT[72]!==e1||eT[73]!==eA.mode||eT[74]!==e0?(J=async()=>{if(!eM)return;let e=[eM],t=await tk(e,"paste",e$.current||void 0,ez.current);if(t.length>0&&t[0]?.type==="thread-scoped-file"){let e=await eM.text();e1(e0.replaceAll(e,`@${t[0].name}`)),eK(!1),(0,s.BI)("dotcom_chat.activate",{target:"CONVERT_TO_FILE_CONVERT",mode:eA.mode})}},eT[69]=eK,eT[70]=tk,eT[71]=eM,eT[72]=e1,eT[73]=eA.mode,eT[74]=e0,eT[75]=J):J=eT[75];let tP=J;eT[76]!==eK?(el=()=>{eK(!0)},eT[76]=eK,eT[77]=el):el=eT[77];let tM=el;eT[78]!==eM||eT[79]!==eA.isWaitingOnAttachment||eT[80]!==eA.mode?(ec=()=>{!eM||eA.isWaitingOnAttachment||eU.current||(eU.current=!0,(0,s.BI)("dotcom_chat.activate",{target:"CONVERT_TO_FILE_TRIGGER",mode:eA.mode}))},ed=[eM,eA.isWaitingOnAttachment,eA.mode],eT[78]=eM,eT[79]=eA.isWaitingOnAttachment,eT[80]=eA.mode,eT[81]=ec,eT[82]=ed):(ec=eT[81],ed=eT[82]),(0,m.useEffect)(ec,ed),eT[83]!==tl||eT[84]!==tk||eT[85]!==eL||eT[86]!==e.existingFileNames||eT[87]!==ti||eT[88]!==eD||eT[89]!==eY?(eu=t=>{let n=t.clipboardData;if(n?.items){let a=[];for(let t=0;t<n.items.length;t++){let r=n.items[t];if(r){if("file"===r.kind){let e=r.getAsFile();e&&a.push(e)}else if("string"===r.kind&&["text","text/plain"].includes(r.type)){let t=n.getData(r.type);if(t.length>1e3&&t.length<=ei.E.getAttachmentSizeLimit())eD(()=>{eU.current=!1;let n=new File([t],"",{type:ei.x}),a=new ei.E(eL,e.existingFileNames);eO(n),e$.current=a.generateFileName(t,n.type).then(e=>ez.current=e)},1);else{tl(t);let e=eY.current?.selectionStart??0;setTimeout(()=>ti([e,e+t.length]));return}}}}a.length>0&&(t.preventDefault(),tk(a,"paste"))}},eT[83]=tl,eT[84]=tk,eT[85]=eL,eT[86]=e.existingFileNames,eT[87]=ti,eT[88]=eD,eT[89]=eY,eT[90]=eu):eu=eT[90];let tO=eu;eT[91]!==tk?(em=e=>{tk(e,"drag")},eT[91]=tk,eT[92]=em):em=eT[92];let tF=em,tD=e.isStreaming||eA.isWaitingOnCopilot,tB=!!eq.supportsAttachments&&"task"!==tm,t$=tD?ty:void 0,tz=tf?tC:void 0;eT[93]!==tT||eT[94]!==tv||eT[95]!==t_||eT[96]!==tA||eT[97]!==t$||eT[98]!==tz?(ep={"github:cancel":t$,"copilot-chat:send-message":tv,"copilot-chat:send-message-new-conversation":t_,"copilot-chat:add-attachment":tT,"copilot-chat:edit-last-message":tz,"copilot-chat:deep-codesearch":tA},eT[93]=tT,eT[94]=tv,eT[95]=t_,eT[96]=tA,eT[97]=t$,eT[98]=tz,eT[99]=ep):ep=eT[99];let tU=ep,tV="small"===e.size;eT[100]!==e.className||eT[101]!==tV?(eh=(0,_.$)(tg.container,{[tg.containerSmall]:tV},e.className),eT[100]=e.className,eT[101]=tV,eT[102]=eh):eh=eT[102];let tW="small"===e.size?"small":"medium",tH=!!eM&&!eA.isWaitingOnAttachment,tq=!!e.initialReference;eT[103]!==tP||eT[104]!==tM||eT[105]!==ts||eT[106]!==eB||eT[107]!==e.getReferenceVersion||eT[108]!==e.onRemoveReference||eT[109]!==tW||eT[110]!==tH||eT[111]!==tq?(eg=(0,r.jsx)(tE,{className:tg.attachments,returnFocusRef:tj,tokenSize:tW,isLoading:ts,onSelectReference:eB,onRemoveReference:e.onRemoveReference,getReferenceVersion:e.getReferenceVersion,showConvertToFileText:tH,onConvertToFile:tP,onConvertToFileDismiss:tM,hideAttachmentsMenu:tq}),eT[103]=tP,eT[104]=tM,eT[105]=ts,eT[106]=eB,eT[107]=e.getReferenceVersion,eT[108]=e.onRemoveReference,eT[109]=tW,eT[110]=tH,eT[111]=tq,eT[112]=eg):eg=eT[112],eT[113]!==e.isNewConversation?(ef=(0,_.$)(tg.inputContainer,{[tg.inputContainerNewConversation]:e.isNewConversation}),eT[113]=e.isNewConversation,eT[114]=ef):ef=eT[114];let tK=!eq.supportsAutocompletion,tG=!e.disableAutoFocus,tQ=eq.textAreaAriaLabel||tS,tJ=eP||e.disabled;eT[115]===Symbol.for("react.memo_cache_sentinel")?(ey=(0,N.G)("copilot-chat-input-textarea"),eT[115]=ey):ey=eT[115],eT[116]!==e4||eT[117]!==e6||eT[118]!==tO||eT[119]!==e3||eT[120]!==tS||eT[121]!==tG||eT[122]!==tQ||eT[123]!==tJ||eT[124]!==e0||eT[125]!==eY?(ex=(0,r.jsx)("textarea",{autoFocus:tG,id:en.wg,className:tg.input,autoComplete:"off",autoCorrect:"off",spellCheck:"false","aria-label":tQ,"aria-multiline":"true",onPaste:tO,ref:eY,onScroll:e3,onChange:e4,onFocus:e6,placeholder:tS,value:e0,"data-react-autofocus":!0,disabled:tJ,...ey}),eT[116]=e4,eT[117]=e6,eT[118]=tO,eT[119]=e3,eT[120]=tS,eT[121]=tG,eT[122]=tQ,eT[123]=tJ,eT[124]=e0,eT[125]=eY,eT[126]=ex):ex=eT[126],eT[127]!==to||eT[128]!==tK||eT[129]!==ex?(ev=(0,r.jsx)(tp,{onSelectReference:to,onShowAgentsDialog:tw,hideAutocomplete:tK,children:ex}),eT[127]=to,eT[128]=tK,eT[129]=ex,eT[130]=ev):ev=eT[130],eT[131]!==e0||eT[132]!==eZ?(e_=(0,r.jsx)(tx,{text:e0,ref:eZ}),eT[131]=e0,eT[132]=eZ,eT[133]=e_):e_=eT[133],eT[134]!==ef||eT[135]!==ev||eT[136]!==e_||eT[137]!==eX?(eC=(0,r.jsxs)(I.tL.LimitKeybindingScope,{commandIds:t0,className:ef,ref:eX,children:[ev,e_]}),eT[134]=ef,eT[135]=ev,eT[136]=e_,eT[137]=eX,eT[138]=eC):eC=eT[138];let tY=eA.skillOptions?.deepCodeSearch;return eT[139]!==tm||eT[140]!==e.extraToolbar||eT[141]!==te||eT[142]!==tn||eT[143]!==e8||eT[144]!==tt||eT[145]!==ta||eT[146]!==e9?(eS="task"===tm?(0,r.jsx)(tZ,{selectedRepo:e8,selectedBranch:te,selectedCustomAgent:tn,onRepoSelect:e9,onBranchSelect:tt,onCustomAgentSelect:ta,agentSelectionEnabled:b.W.sweAgentUseSubagents}):e.extraToolbar,eT[139]=tm,eT[140]=e.extraToolbar,eT[141]=te,eT[142]=tn,eT[143]=e8,eT[144]=tt,eT[145]=ta,eT[146]=e9,eT[147]=eS):eS=eT[147],eT[148]!==tT||eT[149]!==tm||eT[150]!==eq||eT[151]!==e.modes||eT[152]!==e.onNewThreadSelected||eT[153]!==e.showPlanningToggle||eT[154]!==eA.thirdPartyMcpAllowed||eT[155]!==tD||eT[156]!==th||eT[157]!==tB||eT[158]!==tY||eT[159]!==eS?(ej=(0,r.jsx)(t2,{addAttachment:tT,currentMode:eq,attachmentButtonRef:tj,deepCodeSearch:tY,modes:e.modes,stoppable:tD,submitDisabled:th,onNewThreadSelected:e.onNewThreadSelected,thirdPartyMcpAllowed:eA.thirdPartyMcpAllowed,supportsAttachments:tB,extraToolbar:eS,showPlanningToggle:e.showPlanningToggle,chatCommand:tm}),eT[148]=tT,eT[149]=tm,eT[150]=eq,eT[151]=e.modes,eT[152]=e.onNewThreadSelected,eT[153]=e.showPlanningToggle,eT[154]=eA.thirdPartyMcpAllowed,eT[155]=tD,eT[156]=th,eT[157]=tB,eT[158]=tY,eT[159]=eS,eT[160]=ej):ej=eT[160],eT[161]!==eh||eT[162]!==eg||eT[163]!==eC||eT[164]!==ej?(eb=(0,r.jsxs)("form",{className:eh,children:[eg,eC,ej]}),eT[161]=eh,eT[162]=eg,eT[163]=eC,eT[164]=ej,eT[165]=eb):eb=eT[165],eT[166]!==tU||eT[167]!==eb?(ew=(0,r.jsx)(I.tL,{commands:tU,children:eb}),eT[166]=tU,eT[167]=eb,eT[168]=ew):ew=eT[168],eT[169]!==tb||eT[170]!==e4||eT[171]!==tN||eT[172]!==eY?(eN=(0,r.jsx)(eH,{inputRef:eY,inputOnChange:e4,anchorRef:tj,panel:tb,onPanelChange:tw,initialRepo:tN,onRepoSelect:tI}),eT[169]=tb,eT[170]=e4,eT[171]=tN,eT[172]=eY,eT[173]=eN):eN=eT[173],eT[174]!==tF||eT[175]!==td||eT[176]!==eA.attachmentProcessingType||eT[177]!==eA.isWaitingOnAttachment||eT[178]!==tB?(eI=tB&&!td&&(0,r.jsx)(tL.A,{onFilesDrop:tF,isUploading:eA.isWaitingOnAttachment&&"file-upload"===eA.attachmentProcessingType}),eT[174]=tF,eT[175]=td,eT[176]=eA.attachmentProcessingType,eT[177]=eA.isWaitingOnAttachment,eT[178]=tB,eT[179]=eI):eI=eT[179],eT[180]!==ew||eT[181]!==eN||eT[182]!==eI?(eE=(0,r.jsxs)(r.Fragment,{children:[ew,eN,eI]}),eT[180]=ew,eT[181]=eN,eT[182]=eI,eT[183]=eE):eE=eT[183],eE},t2=(0,m.memo)(e=>{let{chatCommand:t,extraToolbar:n,currentMode:a,supportsAttachments:i}=e,s=!!(e.onNewThreadSelected&&a.supportsModelSwitching);return(0,r.jsxs)("div",{className:(0,_.$)(tg.toolbar,{[tg.toolbarNoModes]:1===e.modes.length}),children:[e.modes.length>1&&(0,r.jsxs)("div",{className:tg.mode,children:[(0,r.jsx)("div",{className:tg.modeSelectorMobile,children:(0,r.jsxs)(l.W,{children:[(0,r.jsx)(l.W.Button,{className:tg.modeSelectButton,leadingVisual:a.icon,variant:"invisible",trailingAction:T.TriangleDownIcon,children:a.name}),(0,r.jsx)(l.W.Overlay,{width:"auto",children:(0,r.jsx)(u.l,{selectionVariant:"single",role:"menu","aria-label":"Item",children:e.modes.map(t=>(0,r.jsxs)(u.l.Item,{selected:a.name===t.name,onSelect:()=>{e.onClickMode?.(t.name)},children:[(0,r.jsx)(u.l.LeadingVisual,{children:t.icon}),t.name]},t.name))})})]})}),(0,r.jsx)("div",{className:tg.modeSelectorDesktop,children:(0,r.jsx)(R.I,{className:tg.lighterSegmentedControl,"aria-label":"Mode switcher",onChange:t=>{e.modes[t]&&e.onClickMode?.(e.modes[t].name)},children:e.modes.map(e=>(0,r.jsx)(R.I.Button,{className:tg.modeButton,selected:e.name===a.name,children:e.name},e.name))})})]}),(0,r.jsxs)("div",{className:tg.extra,children:[i&&(0,r.jsx)(k.Q,{ref:e.attachmentButtonRef,leadingVisual:T.PlusIcon,variant:"invisible","aria-label":"Add repositories, files and spaces",className:tg.attachmentButton,onClick:e.addAttachment,"data-testid":"attachment-menu-button",children:(0,r.jsx)("span",{className:(0,_.$)(tg.attachmentButtonText,{"sr-only":"task"===t}),children:"Add repositories, files and spaces"})}),b.W.showDeepCodeSearchButton&&(0,r.jsx)(I.N5,{commandId:"copilot-chat:deep-codesearch",icon:T.RocketIcon,variant:"invisible",tooltipDirection:"n",className:(0,_.$)({[tg.clicked]:e.deepCodeSearch})}),n,!b.W.spacesAsAttachmentsEnabled&&a.supportsSpaces&&(0,r.jsx)(w,{}),b.W.planningAgent&&!b.W.chatInputCommands&&e.showPlanningToggle&&(0,r.jsx)(tH,{})]}),(0,r.jsxs)("div",{className:(0,_.$)(tg.actions,{[tg.actionsMultiple]:s}),children:[s&&(0,r.jsx)(tV.Yb,{onNewThreadSelected:e.onNewThreadSelected}),(0,r.jsxs)("div",{className:tg.toolbarButtons,children:[b.W.copilotThirdPartyMcp&&a.supportsMCP&&e.thirdPartyMcpAllowed&&(0,r.jsx)(tU,{}),e.stoppable?(0,r.jsx)(t3,{}):(0,r.jsx)(t5,{disabled:e.submitDisabled,label:a.submitLabel})]})]})]})});function t5(e){let t,n=(0,i.c)(3),{disabled:a,label:s}=e,o=s||"Send now";return n[0]!==a||n[1]!==o?(t=(0,r.jsx)(I.N5,{commandId:"copilot-chat:send-message",variant:"invisible",size:"medium",icon:T.PaperAirplaneIcon,"aria-label":o,disabled:a,tooltipDirection:"n"}),n[0]=a,n[1]=o,n[2]=t):t=n[2],t}function t3(){let e,t=(0,i.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)(I.N5,{...(0,N.G)("copilot-chat-stop-button"),commandId:"github:cancel",variant:"invisible",size:"medium",icon:T.SquareFillIcon,tooltipDirection:"n",className:tg.CommandIconButton}),t[0]=e):e=t[0],e}t2.displayName="ChatInputToolbar";try{t1.displayName||(t1.displayName="ChatInput")}catch{}try{t5.displayName||(t5.displayName="SubmitButton")}catch{}try{t3.displayName||(t3.displayName="StopButton")}catch{}function t4(e){return"user"===e.role}function t7(e){return"attachment-types"===e?null:"attachment-types"}function t6(e){return e.type.startsWith("image/")}},71363:(e,t,n)=>{n.d(t,{FZ:()=>b,X1:()=>I});var a,r=n(74848),i=n(21728),s=n(69599),o=n(53419),l=n(33544),c=n(29731),d=n(5524),u=n(18096),m=n(34164),p=n(96540),h=n(40961),g=n(26408),f=n(25641),y=n(79064),x=n(2635),v=n(33592);let _=e=>{let t,n,a,s=(0,i.c)(6),{children:o,delay:l,assertive:c}=e,d=void 0===l?500:l,[u,m]=(0,p.useState)(!1);if(s[0]!==d?(t=()=>{m(!1);let e=setTimeout(()=>m(!0),d);return()=>clearTimeout(e)},n=[d,m],s[0]=d,s[1]=t,s[2]=n):(t=s[1],n=s[2]),(0,p.useEffect)(t,n),!u)return null;let h=void 0!==c&&c?"assertive":"polite";return s[3]!==o||s[4]!==h?(a=(0,r.jsx)("div",{role:"alert","aria-live":h,"aria-atomic":"true",children:o}),s[3]=o,s[4]=h,s[5]=a):a=s[5],a};try{_.displayName||(_.displayName="DelayedComponent")}catch{}var C=n(35673);let S={ActionList:"RepoSelectPanel-module__ActionList--ud9yE",emptyStateMessage:"RepoSelectPanel-module__emptyStateMessage--qQwDm",CopilotRepoSelectPanelAnchored:"RepoSelectPanel-module__CopilotRepoSelectPanelAnchored--mTBrm"};var j=n(27844);function b(e){let t,n,a,s,o=(0,i.c)(12),{currentReferences:l}=(0,x.Pk)(),c=(0,v.b)();o[0]!==l?(n=new Set((t=l.filter(N)).map(w)),o[0]=l,o[1]=t,o[2]=n):(t=o[1],n=o[2]);let d=n,[u,m]=(0,p.useState)();o[3]!==c||o[4]!==e||o[5]!==t?(a=async n=>{m(void 0);let a=t.find(e=>e.id===n);if(a)return void c.removeReference(a);let r=await c.service.fetchRepo(n);if(!r.ok){m("Error: failed to attach repository. Please try again."),e.onOpenChange(!0);return}let i=(0,f.qS)(r.payload);c.addReference(i,"repoMenu")},o[3]=c,o[4]=e,o[5]=t,o[6]=a):a=o[6];let h=a;return o[7]!==u||o[8]!==e||o[9]!==d||o[10]!==h?(s=(0,r.jsx)(I,{...e,selectionVariant:"multiple",selectedRepoIds:d,onSelectRepo:h,description:"Choose repositories to chat about.",error:u}),o[7]=u,o[8]=e,o[9]=d,o[10]=h,o[11]=s):s=o[11],s}function w(e){return e.id}function N(e){return"repository"===e.type}function I(e){let t,n,a,f,y,v,b,w,N,I,A,R,k,L,P,M,O,F,D,B=(0,i.c)(52),{open:$,onOpenChange:z,submitReturnFocusRef:U,cancelReturnFocusRef:V,selectedRepoIds:W,featuredRepoIds:H,onSelectRepo:q,selectionVariant:K,description:G,error:Q,ownerDisplayLogin:J,includeForks:Y,anchorRef:Z}=e,X=void 0===H?W:H,{ssoOrganizations:ee}=(0,x.Pk)(),[et,en]=(0,p.useState)("");B[0]!==$?(t=()=>{$||en("")},n=[$],B[0]=$,B[1]=t,B[2]=n):(t=B[1],n=B[2]),(0,p.useEffect)(t,n);let{repositories:ea,loading:er}=(0,g.U)(et,$,void 0,J,void 0!==Y&&Y);e:{if(er){a="Loading repositories";break e}if(0===ea.length){a="No repositories found";break e}if(1===ea.length){a="1 repository found";break e}a=`${ea.length} repositories found`}let ei=a;B[3]===Symbol.for("react.memo_cache_sentinel")?(f=e=>{en(e.currentTarget.value)},B[3]=f):f=B[3];let es=f;t:{let e;if(!ee){let e;B[4]===Symbol.for("react.memo_cache_sentinel")?(e=[],B[4]=e):e=B[4],y=e;break t}B[5]!==ee?(e=ee.map(T),B[5]=ee,B[6]=e):e=B[6],y=e}let eo=y;B[7]!==X?(v=e=>X.has(e.databaseId)?"featuredRepos":"nonFeaturedRepos",B[7]=X,B[8]=v):v=B[8];let{featuredRepos:el,nonFeaturedRepos:ec}=function(e,t){let n={};for(let a of e){let e=t(a);n[e]??(n[e]=[]),n[e].push(a)}return n}(ea,v),[ed,eu]=(0,p.useState)(!1);B[9]!==q?(b=async e=>{eu(!0),await q(e),eu(!1)},B[9]=q,B[10]=b):b=B[10];let em=b;B[11]===Symbol.for("react.memo_cache_sentinel")?(w=(0,c.G)("repo-select-panel"),B[11]=w):w=B[11];let ep=u.X,eh=Z&&S.CopilotRepoSelectPanelAnchored;B[12]!==eh?(N=(0,m.$)(eh),B[12]=eh,B[13]=N):N=B[13],B[14]!==V||B[15]!==z?(I=()=>{(0,h.flushSync)(()=>z(!1)),V.current?.focus(),(0,o.BI)("dotcom_chat.activate",{target:"REPOSITORY_DIALOG_CLOSE",mode:"immersive"})},B[14]=V,B[15]=z,B[16]=I):I=B[16],B[17]!==z||B[18]!==U?(A=()=>{(0,h.flushSync)(()=>z(!1)),U.current?.focus()},B[17]=z,B[18]=U,B[19]=A):A=B[19];let eg=Z?"anchored":"modal",ef="multiple"===K?"Select repositories":"Select a repository",ey=eo.length>0&&"border-bottom-0";B[20]!==ey?(R=(0,m.$)(ey),B[20]=ey,B[21]=R):R=B[21];let ex=!0===er||ed;B[22]!==ex?(k=(0,r.jsx)(u.X.SearchInput,{loading:ex,onChange:es,placeholder:"Search repositories","aria-label":"Search repositories"}),B[22]=ex,B[23]=k):k=B[23],B[24]!==R||B[25]!==k?(L=(0,r.jsx)(u.X.Header,{className:R,children:k}),B[24]=R,B[25]=k,B[26]=L):L=B[26],B[27]!==J||B[28]!==eo?(P=(void 0===J||""===J)&&!(0,s.G7)("global_sso_banner")&&(0,r.jsx)(l.x,{portalContainerName:C.f1,protectedOrgs:eo,redirectURI:E,useFullWidthStyle:!0}),B[27]=J,B[28]=eo,B[29]=P):P=B[29],B[30]===Symbol.for("react.memo_cache_sentinel")?(M=(0,r.jsx)(C.hl,{}),B[30]=M):M=B[30],B[31]!==Q?(O=Q&&(0,r.jsx)(u.X.Message,{variant:"error",size:"inline",children:Q}),B[31]=Q,B[32]=O):O=B[32];let ev="initial"===er?(0,r.jsxs)("div",{className:S.ActionList,children:[(0,r.jsx)("div",{className:"sr-only",children:ei}),(0,r.jsx)(u.X.Loading,{children:"Fetching repositories\u2026"})]}):0!==ea.length||er?(0,r.jsxs)(d.l,{className:S.ActionList,children:[(0,r.jsx)("div",{className:"sr-only",children:ei}),el?.map(e=>(0,r.jsx)(j.W,{repo:e,onSelect:em,selected:W.has(e.databaseId)},e.databaseId)),el&&ec&&(0,r.jsx)(d.l.Divider,{}),ec?.map(e=>(0,r.jsx)(j.W,{repo:e,onSelect:em,selected:W.has(e.databaseId)},e.databaseId))]}):(0,r.jsxs)("div",{className:S.ActionList,children:[(0,r.jsx)("div",{className:"sr-only",children:ei}),(0,r.jsx)("div",{className:S.emptyStateMessage,children:(0,r.jsx)(_,{delay:750,children:(0,r.jsx)(u.X.Message,{variant:"empty",title:"No repositories found",children:"Try a different search term"})})})]});return B[33]!==ep||B[34]!==Z||B[35]!==G||B[36]!==$||B[37]!==K||B[38]!==N||B[39]!==I||B[40]!==A||B[41]!==eg||B[42]!==ef||B[43]!==L||B[44]!==P||B[45]!==M||B[46]!==O||B[47]!==ev?(F=(0,r.jsxs)(ep,{className:N,width:"large",maxHeight:"xlarge",onCancel:I,onSubmit:A,open:$,variant:eg,selectionVariant:K,title:ef,description:G,anchorRef:Z,children:[L,P,M,O,ev]}),B[33]=ep,B[34]=Z,B[35]=G,B[36]=$,B[37]=K,B[38]=N,B[39]=I,B[40]=A,B[41]=eg,B[42]=ef,B[43]=L,B[44]=P,B[45]=M,B[46]=O,B[47]=ev,B[48]=F):F=B[48],B[49]!==w||B[50]!==F?(D=(0,r.jsx)("div",{...w,children:F}),B[49]=w,B[50]=F,B[51]=D):D=B[51],D}function E(){return`/search/refresh_blackbird_caches?return_to=${location.href}`}function T(e){return e.login}try{(a=function(e){let t,n,a,s=(0,i.c)(9),{selectedThreadID:o,currentTopic:l}=(0,x.Pk)(),c=(0,v.b)();s[0]!==c||s[1]!==o?(t=async e=>{y.Jt.setSelectedTopic(o??"",e.toString()),c.clearCurrentReferences(["image","issue"]),await c.fetchCurrentRepo(e)},s[0]=c,s[1]=o,s[2]=t):t=s[2];let d=t;return s[3]!==l?(n=new Set(l?[l.id]:[]),s[3]=l,s[4]=n):n=s[4],s[5]!==d||s[6]!==e||s[7]!==n?(a=(0,r.jsx)(I,{...e,selectionVariant:"instant",selectedRepoIds:n,onSelectRepo:d,description:"Choose a repository to chat about."}),s[5]=d,s[6]=e,s[7]=n,s[8]=a):a=s[8],a}).displayName||(a.displayName="RepoTopicSelectPanel")}catch{}try{b.displayName||(b.displayName="RepoReferencesSelectPanel")}catch{}try{I.displayName||(I.displayName="RepoSelectPanel")}catch{}},72011:(e,t,n)=>{n.d(t,{A2:()=>m,CT:()=>c,Lr:()=>d,O6:()=>o,dp:()=>l,ee:()=>u});var a=n(25641),r=n(23657),i=n(96379);let s="/github-copilot/chat",o=["copilot-chat","custom-copilots"];function l(e){return e?["copilot-chat","custom-copilot",{id:e.id,owner:e.owner}]:["copilot-chat","custom-copilot",null]}async function c(){let e=await (0,i.lS)(`${s}/custom_copilots`);if(!e.ok)throw Error(`Failed to fetch spaces: ${a.nN[e.status]||a.DW}`);return await e.json()}async function d(e){if(!e||!e.owner)return{status:500,ok:!1,error:"unexpected null custom copilot id or missing owner"};let{owner:t,id:n}=e,r=`${s}/custom_copilots/${t}/${n}`,o=await (0,i.lS)(r);if(!o.ok)return{status:o.status,ok:!1,error:a.nN[o.status]||a.DW};let l=await o.json();return{status:o.status,ok:!0,payload:l}}async function u(e){let t=await (0,i.lS)((0,r.fn)(e),{method:"DELETE"});return t.ok?{status:t.status,ok:!0,payload:null}:t}async function m(e){let t=await (0,i.lS)(`${(0,r.fn)(e)}/settings/visibility`);if(!t.ok)throw Error("Error fetching visibility settings");try{let e=await t.json();return{memberCount:e.member_count&&"number"==typeof e.member_count?e.member_count:null}}catch(e){throw Error(`Error parsing visibility settings: ${e}`)}}},72439:(e,t,n)=>{n.d(t,{E:()=>CopilotTextAttacher,x:()=>o});var a=n(50467),r=n(53419),i=n(25641),s=n(23967);let o="application/x.clipboard",l=/^\s*`?([\w-_]{3,40}\.\w{1,10})`?\s*$/;let CopilotTextAttacher=class CopilotTextAttacher{static async isAttachable(e){if(e.size>CopilotTextAttacher.getAttachmentSizeLimit())return!1;let t=await e.text();return CopilotTextAttacher.isPlainText(t)}static getTextFileExtensions(){return CopilotTextAttacher.fileExtensionsCache??(CopilotTextAttacher.fileExtensionsCache=Object.values(s.r4).flatMap(e=>e.extensions??[]).filter(e=>"stl"!==e).join(","))}static getAttachmentSizeLimit(){return 512e3}static isPlainText(e){let t=Math.min(e.length,1e3),n=0,a=0;for(let r=0;r<t;r++){let t=e.charCodeAt(r);0===t?n++:t>127&&a++}let r=n/t,i=a/t;return r<=.1&&i<=.2}async makeReference(e,t){let n=await e.text(),a=e.name||(t?await t:await this.generateFileName(n,e.type));return this.makeReferenceSync(n,a)}makeReferenceSync(e,t){let n=t.split(".").pop();return(0,r.BI)("copilot.attach_pasted_file",{extension:n,characters:e.length}),{type:"thread-scoped-file",name:t,text:e,language:""}}async addAttachment(e,t,n){let a;if(e.size>CopilotTextAttacher.getAttachmentSizeLimit())return void this.manager.addAmbientError("Attached text files must be smaller than 500KB");let r=await e.text();if(!CopilotTextAttacher.isPlainText(r))return void this.manager.addAmbientError(`"${e.name}" has an unsupported file type. Please try again with a plain text file`);if(n)a=this.makeReferenceSync(r,n),this.manager.addReference(a,"text-attacher");else{let n=(0,i.Vc)(e.name);this.manager.addReference(n,"text-attacher"),this.manager.dispatch({type:"WAITING_ON_ATTACHMENT",loading:!0,attachmentType:"file-upload"});try{a=await this.makeReference(e,t),this.manager.replaceReference(n,a)}catch{this.manager.addAmbientError("Failed to process file. Please try again."),this.manager.removeReference(n)}finally{this.manager.dispatch({type:"WAITING_ON_ATTACHMENT",loading:!1})}}return a}async generateFileName(e,t){let n=this.existingFileNames.size>0?`

Follow the naming formats used by these existing files: ${Array.from(this.existingFileNames).slice(0,5).join(", ")}`:"",a=await this.manager.service.getSimpleCompletion(`Return a suitable filename for the following file contents.
      Follow the file naming conventions of the language and do not include any special characters except for period, underscore or hyphens.
      Try to limit the name to 20 characters or less.
      You MUST include the file extension. Include only the filename in your response and nothing else.${n}

File contents:
\`\`\`
${e}
\`\`\`
`),i=a.ok?l.exec(a.payload)?.[1]:null;return i?(0,r.BI)("copilot.generate_pasted_file_name.success"):(0,r.BI)("copilot.generate_pasted_file_name.failure"),this.uniqueFileName(i??this.defaultFileName(t))}uniqueFileName(e){if(!this.existingFileNames.has(e))return e;let t=e.lastIndexOf("."),n=t>0&&t<e.length-1,a=n?e.substring(0,t):e,r=n?e.substring(t):"",i=2;for(;this.existingFileNames.has(`${a}${i}${r}`);)i++;return`${a}${i}${r}`}defaultFileName(e){return e===o?"pasted.txt":"untitled.txt"}constructor(e,t=new Set){(0,a._)(this,"manager",void 0),(0,a._)(this,"existingFileNames",void 0),this.manager=e,this.existingFileNames=t}};(0,a._)(CopilotTextAttacher,"fileExtensionsCache",void 0)},73189:(e,t,n)=>{n.d(t,{l:()=>a});let a=()=>void 0},73900:(e,t,n)=>{n.d(t,{Kq:()=>SoftNavErrorEvent,RQ:()=>SoftNavEndEvent,gh:()=>SoftNavPayloadEvent,ni:()=>SoftNavSuccessEvent,sW:()=>SoftNavStartEvent});var a=n(50467),r=n(82591);let i=class SoftNavEvent extends Event{constructor(e,t){super(t),(0,a._)(this,"mechanism",void 0),this.mechanism=e}};let SoftNavStartEvent=class SoftNavStartEvent extends i{constructor(e){super(e,r.z.START)}};let SoftNavSuccessEvent=class SoftNavSuccessEvent extends i{constructor(e,t){super(e,r.z.SUCCESS),(0,a._)(this,"visitCount",void 0),this.visitCount=t}};let SoftNavErrorEvent=class SoftNavErrorEvent extends i{constructor(e,t){super(e,r.z.ERROR),(0,a._)(this,"error",void 0),this.error=t}};let SoftNavEndEvent=class SoftNavEndEvent extends i{constructor(e){super(e,r.z.END)}};let SoftNavPayloadEvent=class SoftNavPayloadEvent extends Event{constructor(e){super("soft-nav:payload"),(0,a._)(this,"payload",void 0),(0,a._)(this,"appPayload",void 0),this.payload=e.payload,this.appPayload=e.appPayload}}},76166:(e,t,n)=>{n.d(t,{d:()=>r});var a=n(53419);function r(e,t){(0,a.BI)("dotcom_chat.vision.error",{type:e,...t})}},76629:(e,t,n)=>{n.d(t,{BP:()=>u,D3:()=>d,O8:()=>l});var a=n(74848),r=n(21728),i=n(96540),s=n(71315),o=n(88431);let l={ServerRender:"ServerRender",ClientHydrate:"ClientHydrate",ClientRender:"ClientRender"},c=(0,i.createContext)(l.ClientRender);function d(e){let t,n,d,u,m=(0,r.c)(8),{wasServerRendered:p,children:h}=e;m[0]!==p?(t=()=>s.X3?l.ServerRender:p?l.ClientHydrate:l.ClientRender,m[0]=p,m[1]=t):t=m[1];let[g,f]=(0,i.useState)(t);return m[2]!==g?(n=()=>{g!==l.ClientRender&&f(l.ClientRender)},d=[g],m[2]=g,m[3]=n,m[4]=d):(n=m[3],d=m[4]),(0,o.N)(n,d),m[5]!==h||m[6]!==g?(u=(0,a.jsx)(c.Provider,{value:g,children:h}),m[5]=h,m[6]=g,m[7]=u):u=m[7],u}function u(){return(0,i.useContext)(c)}try{c.displayName||(c.displayName="RenderPhaseContext")}catch{}try{d.displayName||(d.displayName="RenderPhaseProvider")}catch{}},77430:(e,t,n)=>{n.d(t,{r:()=>o});var a=n(74848),r=n(71315),i=n(87448),s=n(96540);let o=(0,s.forwardRef)(function({src:e,size:t=20,sx:n,...o},l){let c=(0,s.useMemo)(()=>{let n=new URL(e,r.fV.origin);return n.searchParams.has("size")||n.searchParams.has("s")||n.searchParams.set("size",String(2*Number(t))),n.toString()},[e,t]);return(0,a.jsx)(i.eu,{ref:l,src:c,size:t,"data-testid":"github-avatar",sx:n,...o})});try{o.displayName||(o.displayName="GitHubAvatar")}catch{}},77809:(e,t,n)=>{n.d(t,{Q:()=>ei});var a=n(74848),r=n(26108),i=n(15220),s=n(46251),o=n(86877),l=n(21373),c=n(72511),d=n(38621),u=n(96540),m=n(97564),p=n(54030),h=n(39176),g=n(54114),f=n(71363),y=n(78314),x=n(31078),v=n(53552),_=n(64375),C=n(29731),S=n(6665),j=n(19189),b=n(7808),w=n(64642),N=n(65787),I=n(25407),E=n(66108),T=n(94195),A=n(96459),R=n(11683),k=n(45800),L=n(31604),P=n(87448),M=n(10095),O=n(91385),F=n(70170),D=n(37272),B=n(71315),$=n(34164);let z=u.forwardRef(({ariaActiveDescendant:e,ariaControls:t,ariaExpanded:n,ariaHasPopup:r,className:i,onBlur:s,onFocus:o,onKeyDown:l,onPreload:c,onSearch:m,query:p,searchPlaceholder:h,loading:g,sx:f},y)=>{let{sendRepoClickEvent:x}=(0,S.T)(),[v,_]=u.useState(p),C=u.useRef((0,F.s)(e=>m(e),250));u.useEffect(()=>{_(p)},[p]);let j=p?(0,a.jsx)(P.ks.Action,{onClick:()=>{x("FILE_TREE.CANCEL_SEARCH"),m("")},icon:d.XCircleFillIcon,"aria-label":"Clear",className:"fgColor-muted"}):void 0;return(0,a.jsx)(P.ks,{autoFocus:U(),className:(0,$.$)("d-flex",i),ref:y,value:v,onKeyDown:l,onChange:e=>{_(e.target.value),c(),C.current(e.target.value)},sx:f,"aria-label":h||"Go to file","aria-activedescendant":e,role:r?"combobox":void 0,"aria-controls":t,"aria-expanded":n,"aria-haspopup":r?"dialog":void 0,autoCorrect:"off",spellCheck:"false",placeholder:h||"Go to file",loading:""!==p&&g,leadingVisual:d.SearchIcon,trailingAction:j,trailingVisual:j?void 0:()=>(0,a.jsx)(D.E,{children:(0,a.jsx)("kbd",{children:"t"})}),onFocus:e=>{c(),e.target.select(),o?.(e)},onBlur:s,onClick:()=>x("FILE_TREE.SEARCH_BOX")})});function U(){return"1"===new URLSearchParams(B.fV.search).get("search")}z.displayName="FilesSearchBox";let V={Box:"FileResultsList-module__Box--cUmDY",ActionList:"FileResultsList-module__ActionList--kDNEZ",FilesSearchBox:"FileResultsList-module__FilesSearchBox--KW9Zl",HighlightMatch:"FileResultsList-module__HighlightMatch--Jy_cG",Octicon:"FileResultsList-module__Octicon--PvMf4"},W={excludeDirectories:!1,excludeSeeAllResults:!1};function H({actionListSx:e,additionalResults:t,className:n,commitOid:r,config:i=W,findFileWorkerPath:s,getItemUrl:o,onRenderRow:l,onItemSelected:d,searchBoxRef:m,sx:h}){let{excludeDirectories:g,excludeSeeAllResults:f}=i,{query:_,setQuery:C}=(0,x.JS)(),E=(0,y.t)(),M=u.useRef(null),O=m??M,[F,D]=u.useState(_.length>0),[B,$]=u.useState(!!_),{list:H,directories:q,loading:K,error:G}=(0,p.o)(r,F,!!g),{path:J}=(0,v.eu)(),{getUrl:Y}=(0,j.Z)(),{queryText:Z,queryLine:X}=function(e){let t=(e=e.replaceAll(" ","")).indexOf(":");return t>=0?{queryText:e.substring(0,t),queryLine:parseInt(e.substring(t+1),10)}:{queryText:e,queryLine:void 0}}(_),{matches:ee,clearMatches:et}=function(e,t,n,a){let[r,i]=u.useState(),s=u.useRef(""),o=u.useRef(),{sendStats:l}=(0,S.T)(),c=u.useRef(!1),d=u.useCallback(()=>{let e=new b.z(n,w.j);e.onmessage=({data:e})=>{c.current=!1,i(e.list),s.current=e.query,e.startTime&&l("repository.find-file",{"find-file-base-count":e.baseCount,"find-file-results-count":e.list.length,"find-file-duration-ms":performance.now()-e.startTime})},o.current=e},[l,n]);return u.useEffect(()=>{if(a)return d(),function(){o.current?.terminate()}},[d,a]),u.useEffect(()=>{if(e.length&&t){c.current&&(o.current?.terminate(),d());let n=s.current&&t.startsWith(s.current);c.current=!0,o.current?.postMessage({baseList:n&&r||e,query:t,startTime:performance.now()})}},[e,t,d]),{matches:r,clearMatches:()=>i(void 0)}}((0,u.useMemo)(()=>[...H,...t??[]].sort(),[t,H]),Z,s,F),{sendRepoClickEvent:en}=(0,S.T)(),ea=(0,A.Z)(),[er,ei]=u.useState(0),[es,eo]=u.useState(()=>U()),el=u.useRef(null),ec=u.useRef(null),ed="file-results-list",{sendRepoKeyDownEvent:eu}=(0,S.T)(),{screenSize:em}=(0,T.lm)(),ep=i.enableOverlay??em>=T.Gy.large,eh=u.useCallback(e=>{en("FILE_TREE.SEARCH_RESULT_CLICK"),d?.(e),$(!1)},[en,d]),eg=(e,t,n)=>o?o(e,t,n):Y({path:e,action:t?"tree":"blob",hash:n}),{containerRef:ef}=(0,k.G)({bindKeys:R.z0.ArrowVertical|R.z0.HomeAndEnd,focusInStrategy:"previous"},[K,G]);u.useEffect(()=>{_||$(!1)},[_]),u.useEffect(()=>{document.activeElement!==O.current&&ep&&$(!1)},[J,O,ep]);let ey=ee?.slice(0,20)||[],ex=ee&&ee.length>ey.length,ev=!i.disableNavigation,e_=ec.current?.getBoundingClientRect().width,eC=(0,a.jsx)(P.az,{sx:{maxHeight:ep?"180px":"100% !important",width:ep?e_:"100%"},className:V.Box,children:G?(0,a.jsx)(c.A,{variant:"danger",className:"m-3",children:"Failed to search"}):(0,a.jsxs)(P.lF,{ref:ef,sx:{p:ep?2:3,pr:3*!!ep,pt:ep?3:"2px !important",...e},role:"listbox",className:V.ActionList,children:[!K&&ey.map((e,t)=>{let n=q.includes(e),r=eg(e,n,X?`L${X}`:"");return(0,a.jsx)(Q,{active:!1,index:t,focused:es&&er===t,match:e,onRender:l,query:Z,onClick:eh,isDirectory:n,to:r,useOverlay:ep,listRef:ef,noAnchor:i.disableNavigation},e)}),0===ey.length&&(0,a.jsx)("div",{role:"status",className:"text-center fgColor-muted",children:"No matches found"})]})});return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(P.az,{className:n,ref:ec,sx:h,children:(0,a.jsx)(z,{ariaActiveDescendant:(!ep&&_||ep&&B)&&es&&er>-1?ex&&er===ey.length?"see-all-results-link":`file-result-${er}`:void 0,ariaExpanded:ep?B:void 0,ariaHasPopup:ep,ariaControls:ep?ed:void 0,ref:O,loading:K,query:_,onKeyDown:e=>{let{key:t,shiftKey:n,metaKey:a,altKey:r,ctrlKey:i}=e;if(!n&&!a&&!r){if("Escape"===t)_?(eu("FILE_TREE.CANCEL_SEARCH"),C(""),et()):document.activeElement&&document.activeElement.blur();else if(!_)return;else if("Enter"===t){if(!f&&ex&&er===ey.length)ev&&ea((0,I.Y8Y)({owner:E.ownerLogin,repo:E.name,searchTerm:`path:${Z}`})),d?.();else if(ey[er]){let e=ey[er];ev&&ea(eg(ey[er],!1,X?`L${X}`:"")),$(!1),d?.(e)}}else if("ArrowDown"===t||i&&"n"===t){if(!f&&ex&&er>=ey.length-1){if(ei(ey.length),el.current&&ef.current){let e=(0,N.U)(ef.current);(0,R.Rt)(el.current,e,{behavior:"instant"})}}else ei(Math.min(er+1,ey.length-1));e.preventDefault();return}else if("ArrowUp"===t||i&&"p"===t){ei(Math.max(er-1,0)),e.preventDefault();return}}},onPreload:()=>D(!0),onSearch:e=>{C(e),e?$(!0):(et(),$(!1)),ei(0)},onBlur:e=>{ef.current?.contains(e.relatedTarget)||($(!1),eo(!1))},onFocus:()=>{_&&$(!0),eo(!0)},searchPlaceholder:i.searchPlaceholder,className:V.FilesSearchBox})}),ep&&ey.length>0&&(0,a.jsx)(L.T,{anchorRef:ec,open:ep&&B,renderAnchor:null,onClose:()=>{$(!1)},focusZoneSettings:{disabled:!0},focusTrapSettings:{disabled:!0},align:"end",overlayProps:{id:ed,role:"dialog"},children:eC}),!ep&&_&&eC]})}let q=({active:e,focused:t,index:n,match:r,query:i,to:s,isDirectory:o,onClick:l,onRender:c,useOverlay:d,listRef:m,noAnchor:p})=>{let h=(0,O.Xq)(i,r);c?.();let g=u.useRef(null);u.useEffect(()=>{if(t&&g.current&&m?.current){let e=(0,N.U)(m.current);(0,R.Rt)(g.current,e,{behavior:"instant"})}},[t,m]);let f={};t&&(f={outline:"none",border:"2 solid",boxShadow:"0 0 0 2px #0969da"});let y={id:`file-result-${n}`,active:e,onSelect:(0,u.useCallback)(()=>{l?.(r)},[r,l]),sx:{fontWeight:"normal",":hover":{textDecoration:"none"},mx:"2px",width:"calc(100% - 4px)",...f},role:"option","data-focus-visible-added":t||void 0,tabIndex:d?-1:0},x=(0,a.jsx)("div",{className:"d-flex",children:(0,a.jsx)("div",{className:"d-flex flex-1 flex-column overflow-hidden",children:(0,a.jsx)(J,{text:r,positionsList:h,LeadingIcon:o?K:G,className:V.HighlightMatch})})});return p?(0,a.jsx)(P.lF.Item,{...y,children:x},r):(0,a.jsx)(P.lF.LinkItem,{...y,ref:g,as:E.N,to:s,children:x},r)},K=()=>(0,a.jsx)(M.A,{"aria-label":"Directory",icon:d.FileDirectoryFillIcon,size:"small",className:V.Octicon}),G=()=>(0,a.jsx)(M.A,{"aria-label":"File",icon:d.FileIcon,className:"fgColor-muted mr-2",size:"small"}),Q=u.memo(q);function J({className:e,text:t,positionsList:n,sx:r,LeadingIcon:i}){let s=[],o=0;for(let e of n){if(Number(e)!==e||e<o||e>t.length)continue;let n=t.slice(o,e);n&&s.push(Y(n)),o=e+1,s.push((0,a.jsx)("mark",{className:"text-bold bgColor-transparent fgColor-default",children:t[e]},e))}return s.push(Y(t.slice(o))),(0,a.jsx)(P.az,{className:e,sx:r,children:(0,a.jsxs)(a.Fragment,{children:[i&&(0,a.jsx)(i,{}),s]})})}function Y(e){return e.replaceAll("/","/\u200B")}try{H.displayName||(H.displayName="FileResultsList")}catch{}try{q.displayName||(q.displayName="FileResultRow")}catch{}try{K.displayName||(K.displayName="DirectoryIcon")}catch{}try{G.displayName||(G.displayName="FileResultIcon")}catch{}try{Q.displayName||(Q.displayName="MemoizedFileResultRow")}catch{}try{J.displayName||(J.displayName="HighlightMatch")}catch{}let Z={dialogHeader:"MultiFilePicker-module__dialogHeader--CApsB",Box:"MultiFilePicker-module__Box--gINxM",Dialog:"MultiFilePicker-module__Dialog--ls9MF"};var X=n(73017),ee=n(53419);function et(e,t,n){return{id:`${n.id}${"github_folder"===t?"-folder":""}-${e}`,repositoryId:n.id,nwo:`${n.ownerLogin}/${n.name}`,filePath:e,type:t}}function en(e,t,n,a,r,i){let s=Array.from(e).filter(e=>t.has(e)),o=Array.from(e).filter(e=>!t.has(e));if(!i)return o.map(e=>et(e,"github_file",n));let l=[],c=new Set;for(let e of s){if(s.some(t=>t!==e&&e.startsWith(`${t}/`)))continue;let t=o.filter(t=>t.startsWith(`${e}/`));if(i&&0===t.length){l.push(et(e,"github_folder",n));continue}if(i&&t.length>=r)for(let a of(l.push(et(e,"github_folder",n)),t))c.add(a);else for(let e of t)l.push(et(e,"github_file",n)),c.add(e)}let d=o.filter(e=>!c.has(e));if(a&&i){let e=new Map;for(let t of d){let n=t.lastIndexOf("/"),a=n>0?t.substring(0,n):"";e.has(a)||e.set(a,[]),e.get(a)?.push(t)}for(let[t,a]of e)if(""===t)for(let e of a)l.push(et(e,"github_file",n));else l.push(et(t,"github_folder",n))}else for(let e of d)l.push(et(e,"github_file",n));return l}function ea({currentRepo:e,setLocalFormData:t,fetchError:n,onFileCountChange:r,expandedPath:i,resourceCounts:s,allowFolderReferences:o,maxFileCount:l,onRejectionMessage:c,onDisplayCountChange:d}){let[m,f]=(0,u.useState)(()=>new Set),[y,x]=(0,u.useState)(()=>new Set),v=l??50,{list:_,directories:C,loading:S}=(0,p.o)(e.commitOID,!0),[j,b]=(0,u.useState)([]);(0,u.useEffect)(()=>{b((0,h.k)({paths:_,directories:C})),x(new Set(C))},[_,C,b,e.commitOID]),(0,u.useEffect)(()=>{let n=Array.from(m).filter(e=>!y.has(e)),a=Array.from(m).filter(e=>y.has(e));r?.(n.length);let i=!1;if(o&&n.length>0){let e=a.map(e=>`${e}/`),t=n.filter(t=>!e.some(e=>t.startsWith(e))),r=t.some(e=>e.includes("/"));i=t.length>v&&r}let s=en(m,y,e,i,v,o??!1);t(s),d&&d(s.length)},[m,y,e,t,r,d,o,v]);let w=(0,u.useCallback)(t=>`/${e.name}/${e.ownerLogin}/tree/${e.refInfo.name}/${t.path}`,[e]),N=(0,u.useCallback)(t=>{if(t.size<=m.size){f(t),c?.(null);return}if(!o){let e=Array.from(t).filter(e=>!y.has(e)),n=s?s.maxResourceCount-s.currentResourceCount:v;if(e.length>n){let n=s?`${s.currentResourceCount+e.length} / ${s.maxResourceCount} possible sources selected, add fewer files.`:`Up to ${v} files can be added at a time.`;c?.(n),f(t);return}c?.(null),f(t);return}let n=Array.from(t).filter(e=>!y.has(e)),a=Array.from(t).filter(e=>y.has(e)).map(e=>`${e}/`),r=n.filter(e=>!a.some(t=>e.startsWith(t))),i=r.some(e=>e.includes("/"));if(en(t,y,e,r.length>v&&i,v,o).length>v)return void f(t);f(t)},[m,v,y,o,c,e,s]);return(0,a.jsx)("div",{className:Z.Box,children:(0,a.jsx)(g.Rw,{rootItems:j,expandedPath:i,selectedItemRef:()=>{},setRootItems:b,navigateOnClick:!1,directoryNavigateOnClick:!1,selectedItems:m,onSelectionChange:N,loading:S||!1,fetchError:!!n,getItemUrl:w,allowFolderReferences:!!o,sortDirectoryItems:e=>e.sort((e,t)=>e.data.name.localeCompare(t.data.name))})})}function er({onClose:e}){return(0,a.jsx)(r.K,{icon:d.XIcon,"aria-label":"Close",onClick:e,variant:"invisible"})}function ei({formData:e,onCancel:t,onSaveFiles:n,onSaveRepository:p,findFileWorkerPath:h,attachmentButtonRef:g,owner:S,resourceCounts:j,initialRepo:b,onRepoSelect:w,hideBackButton:N=!1,allowFolderReferences:I=!1,maxFileCount:E=50}){let[T,A]=(0,u.useState)({}),[R,k]=(0,u.useState)(null),[L,P]=(0,u.useState)(b||null),[M,O]=(0,u.useState)(!0),[F,D]=(0,u.useState)(e),[B,$]=(0,u.useState)(!1),[z,U]=(0,u.useState)(null),[V,W]=(0,u.useState)(""),[q,K]=(0,u.useState)(null),[G,Q]=(0,u.useState)(0),[J,Y]=(0,u.useState)(0),et=(0,u.useRef)(!1),en=async e=>{let t;if(et.current=!0,T[e]){P(t=T[e]),w?.(t);return}try{t=await (0,m.V)(e),A(n=>({...n,[e]:t})),P(t),w?.(t),O(!1)}catch(e){k(e instanceof Error?e.message:"An unknown error occurred")}et.current=!1},ei=()=>{w?.(null),P(null),D([]),O(!0)},es=void 0!==j,eo=es?J:G,el=eo>(es?j.maxResourceCount-j.currentResourceCount:E),ec=async()=>{$(!0);try{if(0===eo&&L){(0,ee.BI)("copilot-spaces.click",{target:"SAVED_REPOSITORY_FROM_FILE_PICKER"}),await p({type:"repository",id:`${L.id}`,repositoryId:L.id,nwo:`${L.ownerLogin}/${L.name}`,ownerAvatarUrl:L.ownerAvatarUrl,ownerType:L.ownerType,markedForDestroy:!1});return}if(el)return;(0,ee.BI)("copilot-spaces.click",{target:"SAVED_FILES_FROM_FILE_PICKER"}),await n(F)}catch(t){let e="An unknown error occurred";t&&"object"==typeof t&&"base"in t&&"string"==typeof t.base&&(e=t.base.startsWith("unsupported_file_type")&&"files"in t?function(e){if(1===e.length)return`This file can't be submitted: ${e[0]}. Only supported file types are allowed.`;let t=e.slice(0,3).map(e=>(function(e,t=30){let n=e.length<=t?e:`...${e.slice(-t)}`;return`<b>${n}</b>`})(e)),n=e.length-3,a=`One or more files can't be submitted: ${t.join(", ")}`;return n>0&&(a+=`, and ${n} more`),`${a}. Only supported file types are allowed.`}(t.files):t.base.startsWith("The size of the space exceeds the current limit")?"The size of the space exceeds the current limit":t.base),U(e)}finally{$(!1)}};(0,u.useEffect)(()=>{U(null)},[F]);let ed=el?es?`${j.currentResourceCount+J} / ${j.maxResourceCount} possible sources selected, add fewer files.`:`Up to ${E} items can be added at a time.`:q,eu=el||!!q,em=0===eo?"repository":"";return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(f.X1,{selectionVariant:"instant",open:!L&&M,onOpenChange:e=>{et.current||(O(e),t())},selectedRepoIds:new Set,onSelectRepo:async e=>{e&&(D([]),(0,ee.BI)("copilot-spaces.click",{target:"SELECTED_REPO_FROM_REPO_PICKER"}),await en(e))},cancelReturnFocusRef:g,submitReturnFocusRef:g,error:R??void 0,ownerDisplayLogin:S,includeForks:!0}),L&&(0,a.jsx)(i.l,{onClose:t,title:`Add files from ${L.ownerLogin}/${L.name}`,width:"large",position:{narrow:"fullscreen"},renderHeader:({onClose:e,dialogLabelId:t})=>(0,a.jsxs)(i.l.Header,{children:[(0,a.jsx)("div",{className:Z.dialogHeader,children:(0,a.jsx)(i.l.Title,{id:t,children:(0,a.jsxs)(s.B,{align:"center",direction:"horizontal",gap:"none",children:[!N&&(0,a.jsx)(s.B.Item,{children:(0,a.jsx)(r.K,{icon:d.ArrowLeftIcon,"aria-label":"Back",onClick:ei,variant:"invisible"})}),(0,a.jsxs)(s.B.Item,{grow:!0,className:"mx-1",children:["Select folders and files in ",L.ownerLogin,"/",L.name]}),(0,a.jsx)(s.B.Item,{children:(0,a.jsx)(er,{onClose:()=>e("close-button")})})]})})}),(0,a.jsx)(i.l.Subtitle,{className:"mt-0",children:(0,a.jsx)(y.d,{repository:L,children:(0,a.jsx)(x.Ck,{children:(0,a.jsx)(v.qV,{refInfo:{name:L.refInfo.name,canEdit:!0,listCacheKey:"anything",currentOid:L.commitOID},path:"test",action:"tree",copilotAccessAllowed:!0,children:(0,a.jsx)(_.$,{allShortcutsEnabled:!1,children:(0,a.jsx)(H,{commitOid:L.commitOID,findFileWorkerPath:h,onItemSelected:e=>{e&&W(e)},config:{enableOverlay:!0,disableNavigation:!0,searchPlaceholder:"Search for files or folders",actionText:"Search for files or folders"}})})})})})})]}),renderFooter:()=>(0,a.jsx)(i.l.Footer,{children:(0,a.jsxs)("div",{className:"d-flex flex-justify-between flex-items-center width-full",children:[(0,a.jsx)("div",{className:"d-flex flex-items-center",children:ed&&(0,a.jsx)(o.A.Validation,{variant:"error",children:ed})}),(0,a.jsxs)("div",{className:"d-flex flex-row flex-justify-end gap-2",children:[(0,a.jsx)(l.Q,{onClick:t,children:"Cancel"}),(0,a.jsxs)(l.Q,{...(0,C.G)("save-resource-button"),variant:"primary",onClick:ec,count:B?void 0:(es?J:G)||void 0,loading:B,disabled:eu,children:["Add ",(0,a.jsx)("span",{children:em})]})]})]})}),renderBody:()=>(0,a.jsxs)("div",{className:"d-flex flex-column",children:[R&&(0,a.jsx)("span",{children:R}),z&&(0,a.jsx)("div",{className:"position-sticky top-0 bgColor-default flash-banner",children:(0,a.jsx)(c.A,{full:!0,variant:"danger",children:(0,a.jsx)(X.JR,{as:"span",html:z})})}),(0,a.jsx)(y.d,{repository:L,children:(0,a.jsx)(x.Ck,{children:(0,a.jsx)(v.qV,{refInfo:{name:L.refInfo.name,canEdit:!0,listCacheKey:"anything",currentOid:L.commitOID},path:"test",action:"tree",copilotAccessAllowed:!0,children:(0,a.jsx)(ea,{expandedPath:V,currentRepo:L,localFormData:F,setLocalFormData:D,onFileCountChange:Y,onDisplayCountChange:Q,fetchError:R,resourceCounts:j,allowFolderReferences:I,maxFileCount:E,onRejectionMessage:K})})})})]}),className:Z.Dialog})]})}try{ea.displayName||(ea.displayName="FilePickerForm")}catch{}try{er.displayName||(er.displayName="CloseButton")}catch{}try{ei.displayName||(ei.displayName="MultiFilePicker")}catch{}},79216:(e,t,n)=>{n.d(t,{Q:()=>s});let a=/^@(?<repo>[\w-.]+\/[\w-.]+)(?:\/(?<type>\w+)\/(?<id>.+))?$/,r=/^@(?<id>[a-zA-Z0-9_.-]+)$/,i={fromUrlType(e){switch(e){case"issues":return"issue";case"pull":return"pull-request";case"discussions":return"discussion";case"blob":case"tree":return"file";case void 0:return"repository"}},fromMentionType(e){switch(e){case"issues":return"issue";case"pull":return"pull-request";case"discussions":return"discussion";case"files":return"file";case void 0:return"repository"}}},s={fromUrl(e){let t;try{t=new URL(e)}catch{return}if(t.hostname!==window.location.hostname)return;let[,n,a,r,...s]=t.pathname.split("/"),o=s.join("/"),l=i.fromUrlType(r);if(n&&a&&l)return{repo:`${n}/${a}`,type:o?l:"repository",id:o}},stringify(e){switch(e.type){case"issue":return`@${e.repo}/issues/${e.id??""}`;case"pull-request":return`@${e.repo}/pull/${e.id??""}`;case"discussion":return`@${e.repo}/discussions/${e.id??""}`;case"repository":return`@${e.repo}`;case"file":return`@${e.repo}/files/${e.id??""}`;case"thread-scoped-file":return`@${e.id??""}`}},parse(e){let t=a.exec(e)?.groups;if(!t){let t=r.exec(e)?.groups;return t?{repo:"",type:"thread-scoped-file",id:t.id}:void 0}let n=i.fromMentionType(t.type);return n?{repo:t.repo,type:n,id:t.id}:void 0},isEqual:(e,t)=>s.stringify(e)===s.stringify(t),refersTo(e,t){let n=s.for(t);return null!==n&&s.isEqual(e,n)},for:e=>{switch(e.type){case"repository":return{type:"repository",repo:`${e.ownerLogin}/${e.name}`,reference:e};case"issue":return{type:"issue",repo:`${e.repository.owner}/${e.repository.name}`,id:e.number.toString(),reference:e};case"pull-request":return{type:"pull-request",repo:`${e.repository.ownerLogin}/${e.repository.name}`,id:e.number.toString(),reference:e};case"discussion":return{type:"discussion",repo:`${e.repository.owner}/${e.repository.name}`,id:e.number.toString(),reference:e};case"file":case"folder":return{type:"file",repo:`${e.repoOwner}/${e.repoName}`,id:e.path,reference:e};case"thread-scoped-file":return{type:"thread-scoped-file",repo:"",id:e.name,reference:e};default:return null}}}},81829:(e,t,n)=>{n.d(t,{A:()=>m});var a=n(74848),r=n(21728),i=n(71315),s=n(69726),o=n(96540);function l(e){e.preventDefault(),e.stopPropagation()}function c(e){return e instanceof DragEvent}let d=e=>{let t,n,i,s,o,l,c,d,u,m,p,h,g,f,y,x,v=(0,r.c)(17);return v[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,a.jsx)("path",{fill:"var(--bgColor-default)",fillRule:"evenodd",d:"M56.66 10.322v.002l16.824 7.846L92.44 70.254a8.75 8.75 0 0 1-5.23 11.217l-37.009 13.47a8.75 8.75 0 0 1-11.217-5.23L18.531 33.512a8.75 8.75 0 0 1 5.23-11.217z",clipRule:"evenodd"}),n=(0,a.jsx)("path",{fill:"var(--bgColor-open-muted)",fillRule:"evenodd",d:"M56.66 10.322v.002l16.824 7.846L92.44 70.254a8.75 8.75 0 0 1-5.23 11.217l-37.009 13.47a8.75 8.75 0 0 1-11.217-5.23L18.531 33.512a8.75 8.75 0 0 1 5.23-11.217z",clipRule:"evenodd"}),i=(0,a.jsx)("path",{fill:"var(--bgColor-open-emphasis)",fillRule:"evenodd",d:"m55.29 10.822.802-.293a1.46 1.46 0 0 1 1.116.049l15.73 7.335c.35.163.62.459.753.822l.294.804 18.458 50.715a8.75 8.75 0 0 1-5.23 11.217l-37.008 13.47a8.75 8.75 0 0 1-11.218-5.23L18.533 33.512a8.75 8.75 0 0 1 5.231-11.217zm.997 2.74L24.762 25.038a5.835 5.835 0 0 0-3.487 7.478l20.454 56.198a5.835 5.835 0 0 0 7.478 3.487l37.008-13.47a5.835 5.835 0 0 0 3.487-7.478L71.243 20.537l-5.482 1.996a5.82 5.82 0 0 1-4.461-.195 5.82 5.82 0 0 1-3.017-3.293z",clipRule:"evenodd",opacity:"0.12"}),v[0]=t,v[1]=n,v[2]=i):(t=v[0],n=v[1],i=v[2]),v[3]===Symbol.for("react.memo_cache_sentinel")?(s=(0,a.jsx)("g",{clipPath:"url(#clip0_12526_110155)",children:(0,a.jsx)("path",{fill:"var(--bgColor-open-emphasis)",fillRule:"evenodd",d:"M64.035 44.691c-.703 2.448-1.974 5.334-3.06 7.703-.93 2.029-1.94 3.575-2.932 4.66a5.46 5.46 0 0 1 .165 4.949c-.376.806-1.116 1.478-1.841 2.006-.754.549-1.631 1.04-2.446 1.445a31 31 0 0 1-3.066 1.318l-.053.02-.015.004-.004.002h-.002a1.095 1.095 0 0 1-1.388-.647v-.002l-.002-.004-.006-.015-.02-.053-.07-.196a30.973 30.973 0 0 1-.89-2.999c-.214-.885-.402-1.872-.466-2.803-.062-.895-.022-1.894.354-2.7a5.46 5.46 0 0 1 3.883-3.052c.178-1.474.697-3.268 1.635-5.314 1.092-2.383 2.494-5.198 3.94-7.294.718-1.039 1.498-1.978 2.313-2.587.804-.603 1.896-1.056 3.022-.53 1.134.53 1.46 1.673 1.497 2.667.037 1.011-.2 2.208-.548 3.422m-9.653 9.647a5.5 5.5 0 0 1 2.228 1.035c.515-.598 1.067-1.388 1.623-2.394l-3.1-1.445c-.397 1.08-.635 2.02-.751 2.804m7.55-10.25c-.61 2.121-1.702 4.662-2.733 6.928l-3.212-1.498c1.049-2.259 2.309-4.736 3.565-6.556.672-.973 1.292-1.682 1.823-2.08.541-.404.74-.318.783-.297h.003c.026.012.21.096.235.764.024.663-.136 1.594-.464 2.739m-8.986 19.408c-.682.34-1.342.627-1.862.84a29 29 0 0 1-.553-1.966c-.198-.823-.357-1.68-.41-2.441-.054-.796.02-1.336.155-1.625a3.282 3.282 0 1 1 5.949 2.774c-.135.29-.5.693-1.146 1.162-.617.45-1.375.878-2.133 1.256",clipRule:"evenodd"})}),o=(0,a.jsx)("path",{fill:"var(--bgColor-default)",fillRule:"evenodd",d:"M198.941 19.499 166.042 7.525a8.75 8.75 0 0 0-11.217 5.23L134.37 68.953a8.75 8.75 0 0 0 5.231 11.217l37.008 13.47a8.75 8.75 0 0 0 11.217-5.231l18.959-52.089z",clipRule:"evenodd"}),l=(0,a.jsx)("path",{fill:"var(--bgColor-sponsors-muted)",fillRule:"evenodd",d:"M198.941 19.499 166.042 7.525a8.75 8.75 0 0 0-11.217 5.23L134.37 68.953a8.75 8.75 0 0 0 5.231 11.217l37.008 13.47a8.75 8.75 0 0 0 11.217-5.231l18.959-52.089z",clipRule:"evenodd"}),c=(0,a.jsx)("path",{fill:"var(--bgColor-sponsors-emphasis)",fillRule:"evenodd",d:"m197.568 19.003.803.292c.363.132.659.404.823.754l7.335 15.73c.163.35.181.751.049 1.114l-.293.805-18.458 50.715a8.75 8.75 0 0 1-11.217 5.23l-37.008-13.47a8.75 8.75 0 0 1-5.231-11.217l20.454-56.197a8.75 8.75 0 0 1 11.217-5.23zm-.998 2.741L165.045 10.27a5.836 5.836 0 0 0-7.479 3.487l-20.454 56.197a5.834 5.834 0 0 0 3.487 7.478l37.008 13.47a5.836 5.836 0 0 0 7.479-3.487L203.544 36.7l-5.483-1.995a5.82 5.82 0 0 1-3.292-3.017 5.82 5.82 0 0 1-.195-4.461z",clipRule:"evenodd",opacity:"0.12"}),v[3]=s,v[4]=o,v[5]=l,v[6]=c):(s=v[3],o=v[4],l=v[5],c=v[6]),v[7]===Symbol.for("react.memo_cache_sentinel")?(u=(0,a.jsx)("g",{clipPath:"url(#clip1_12526_110155)",children:(0,a.jsx)("path",{fill:"var(--bgColor-sponsors-emphasis)",fillRule:"evenodd",d:"M179.168 44.01a2.553 2.553 0 0 1 3.393 1.235l.946 2.03a2.55 2.55 0 0 1-1.235 3.392l-16.096 7.506a2.55 2.55 0 0 1-1.259.232l-4.919-.348a1.094 1.094 0 0 1-.808-1.734l2.894-3.992c.255-.351.595-.632.988-.815zm1.41 2.16a.365.365 0 0 0-.485-.177l-2.36 1.1 1.254 2.692 2.361-1.101a.365.365 0 0 0 .176-.485zm-3.574 4.54-1.254-2.692-11.753 5.48a.36.36 0 0 0-.141.117l-1.739 2.399 2.955.209a.36.36 0 0 0 .18-.033z",clipRule:"evenodd"})}),m=(0,a.jsx)("path",{fill:"var(--bgColor-default)",fillRule:"evenodd",d:"M128.059 0H93.052A8.75 8.75 0 0 0 84.3 8.752v59.804a8.75 8.75 0 0 0 8.752 8.751h39.383a8.75 8.75 0 0 0 8.751-8.751v-55.43z",clipRule:"evenodd"}),p=(0,a.jsx)("path",{fill:"var(--bgColor-accent-muted)",fillRule:"evenodd",d:"M128.059 0H93.052A8.75 8.75 0 0 0 84.3 8.752v59.804a8.75 8.75 0 0 0 8.752 8.751h39.383a8.75 8.75 0 0 0 8.751-8.751v-55.43z",clipRule:"evenodd"}),d=(0,a.jsx)("path",{fill:"var(--bgColor-accent-emphasis)",fillRule:"evenodd",d:"M126.6 0h.855c.386 0 .757.154 1.031.427L140.758 12.7c.274.273.427.644.428 1.03v54.826a8.75 8.75 0 0 1-8.751 8.751H93.052a8.75 8.75 0 0 1-8.752-8.751V8.752A8.75 8.75 0 0 1 93.052 0zm0 2.917H93.052a5.835 5.835 0 0 0-5.835 5.835v59.804a5.835 5.835 0 0 0 5.835 5.834h39.383a5.834 5.834 0 0 0 5.834-5.834v-53.97h-5.834a5.82 5.82 0 0 1-4.126-1.709 5.82 5.82 0 0 1-1.709-4.125z",clipRule:"evenodd",opacity:"0.12"}),v[7]=d,v[8]=u,v[9]=m,v[10]=p):(d=v[7],u=v[8],m=v[9],p=v[10]),v[11]===Symbol.for("react.memo_cache_sentinel")?(h=(0,a.jsx)("g",{clipPath:"url(#clip2_12526_110155)",children:(0,a.jsx)("path",{fill:"var(--bgColor-accent-emphasis)",fillRule:"evenodd",d:"M104.354 31.356a.364.364 0 0 0-.364.365v15.315c0 .202.163.365.364.365h1.373l.042-.045 8.864-8.864c.962-.962 2.509-1 3.518-.088l4.801 4.344V31.72a.365.365 0 0 0-.365-.365zM122.587 47.4h-13.768l7.361-7.362a.365.365 0 0 1 .503-.013l6.269 5.672v1.338a.365.365 0 0 1-.365.365m2.553-.365V31.721a2.553 2.553 0 0 0-2.553-2.553h-18.233a2.553 2.553 0 0 0-2.552 2.553v15.315a2.553 2.553 0 0 0 2.552 2.553h18.233a2.553 2.553 0 0 0 2.553-2.553m-15.316-10.575a.729.729 0 1 1-1.458 0 .729.729 0 0 1 1.458 0m2.188 0a2.917 2.917 0 1 1-5.834 0 2.917 2.917 0 0 1 5.834 0",clipRule:"evenodd"})}),v[11]=h):h=v[11],v[12]===Symbol.for("react.memo_cache_sentinel")?(g=(0,a.jsx)("clipPath",{id:"clip0_12526_110155",children:(0,a.jsx)("path",{fill:"var(--bgColor-default)",d:"m41.466 45.344 21.93-7.982 7.982 21.93-21.93 7.982z"})}),v[12]=g):g=v[12],v[13]===Symbol.for("react.memo_cache_sentinel")?(f=(0,a.jsx)("clipPath",{id:"clip1_12526_110155",children:(0,a.jsx)("path",{fill:"var(--bgColor-default)",d:"m164.786 36.563 21.93 7.982-7.982 21.93-21.93-7.982z"})}),v[13]=f):f=v[13],v[14]===Symbol.for("react.memo_cache_sentinel")?(y=(0,a.jsxs)("defs",{children:[g,f,(0,a.jsx)("clipPath",{id:"clip2_12526_110155",children:(0,a.jsx)("path",{fill:"var(--bgColor-default)",d:"M101.802 27.71h23.338V51.05h-23.338z"})})]}),v[14]=y):y=v[14],v[15]!==e?(x=(0,a.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"226",height:"103",fill:"none",viewBox:"0 0 226 103",...e,children:[t,n,i,s,o,l,c,u,m,p,d,h,y]}),v[15]=e,v[16]=x):x=v[16],x};try{d.displayName||(d.displayName="DragAndDropSVG")}catch{}let u={overlay:"FullScreenDragOverlay-module__overlay--Q9gow",centeredContent:"FullScreenDragOverlay-module__centeredContent--iAFMy",text:"FullScreenDragOverlay-module__text--oftCM"};function m(e){let t,n,m,p=(0,r.c)(9),{onFilesDrop:h,isUploading:g}=e,f=void 0!==g&&g;p[0]!==f||p[1]!==h?(t=e=>{f||h(e)},p[0]=f,p[1]=h,p[2]=t):t=p[2];let y=t;p[3]!==y?(n={onFilesDrop:y,targetElement:i.XC},p[3]=y,p[4]=n):n=p[4];let{isDragging:x}=function(e){let t,n,a,i=(0,r.c)(6),{onFilesDrop:s,targetElement:d}=e,[u,m]=(0,o.useState)(!1),p=(0,o.useRef)(0);return i[0]!==s||i[1]!==d?(t=()=>{if(!d)return;let e=e=>{c(e)&&(e.preventDefault(),e.stopPropagation(),e.dataTransfer?.types.includes("Files")&&(p.current=p.current+1,1===p.current&&m(!0)))},t=e=>{e.preventDefault(),e.stopPropagation(),p.current=p.current-1,p.current<=0&&(p.current=0,m(!1))},n=e=>{if(!c(e))return;e.preventDefault(),e.stopPropagation(),p.current=0,m(!1);let t=e.dataTransfer?.files;t&&0!==t.length&&s(t)};return d.addEventListener("dragover",l),d.addEventListener("dragenter",e),d.addEventListener("dragleave",t),d.addEventListener("drop",n),()=>{d.removeEventListener("dragover",l),d.removeEventListener("dragenter",e),d.removeEventListener("dragleave",t),d.removeEventListener("drop",n)}},n=[s,d],i[0]=s,i[1]=d,i[2]=t,i[3]=n):(t=i[2],n=i[3]),(0,o.useEffect)(t,n),i[4]!==u?(a={isDragging:u},i[4]=u,i[5]=a):a=i[5],a}(n),v=null;if(f){let e;p[5]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(s.A,{size:"large"}),(0,a.jsx)("p",{className:u.text,children:"Uploading files..."})]}),p[5]=e):e=p[5],v=e}else if(x){let e;p[6]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(d,{}),(0,a.jsx)("p",{className:u.text,children:"Drop files to upload"})]}),p[6]=e):e=p[6],v=e}return v?(p[7]!==v?(m=(0,a.jsx)("div",{className:u.overlay,children:(0,a.jsx)("div",{className:u.centeredContent,children:v})}),p[7]=v,p[8]=m):m=p[8],m):null}try{m.displayName||(m.displayName="FullScreenDragOverlay")}catch{}},82591:(e,t,n)=>{n.d(t,{z:()=>a});let a=Object.freeze({INITIAL:"soft-nav:initial",START:"soft-nav:start",REPLACE_MECHANISM:"soft-nav:replace-mechanism",SUCCESS:"soft-nav:success",ERROR:"soft-nav:error",FRAME_UPDATE:"soft-nav:frame-update",END:"soft-nav:end",RENDER:"soft-nav:render",PROGRESS_BAR:{START:"soft-nav:progress-bar:start",END:"soft-nav:progress-bar:end"}})},82595:(e,t,n)=>{n.d(t,{I:()=>d});var a=n(74848),r=n(21728),i=n(34164),s=n(49851),o=n(38621);let l={container:"Icon-module__container--stxcA",customColor:"Icon-module__customColor--dELU9",hasBackground:"Icon-module__hasBackground--xipmb",auburn:"Icon-module__auburn--YGPGc",blue:"Icon-module__blue--YHcrq",brown:"Icon-module__brown--HcCTh",coral:"Icon-module__coral--oTikb",cyan:"Icon-module__cyan--h419p",gray:"Icon-module__gray--VfK1C",green:"Icon-module__green--DZFaM",indigo:"Icon-module__indigo--VVAUE",lemon:"Icon-module__lemon--pOsfR",lime:"Icon-module__lime--qwkv8",olive:"Icon-module__olive--UDJGA",orange:"Icon-module__orange--Zpvu1",pine:"Icon-module__pine--w0tcb",pink:"Icon-module__pink--ai8ga",plum:"Icon-module__plum--IYN4u",purple:"Icon-module__purple--rFSpj",red:"Icon-module__red--OLgIH",teal:"Icon-module__teal--eysuL",yellow:"Icon-module__yellow--UE4Kb"},c=new Set(Object.keys(l).filter(e=>!["container","hasBackground","customColor"].includes(e)));function d(e){let t,n,d,u,m,p,h=(0,r.c)(19),{icon:g,hasBackground:f,color:y,size:x,className:v}=e,_=void 0!==f&&f,C=void 0===y?"gray":y,S=void 0===x?16:x;if("string"==typeof g)if(g in s.OZ)t=s.OZ[g];else{let e;h[0]!==g?(e=function(e){let t=`${e.replaceAll(/(?:^|-)(\w)/g,(e,t)=>t.toUpperCase())}Icon`;return t in o?o[t]:void 0}(g),h[0]=g,h[1]=e):e=h[1],t=e}else t=g;if(!t)return null;h[2]!==C?(n=c.has(C),h[2]=C,h[3]=n):n=h[3];let j=n,b=`${_?2*S:S}px`;h[4]!==C||h[5]!==j||h[6]!==b?(d={"--custom-size":b},j||(d["--custom-color"]=C),h[4]=C,h[5]=j,h[6]=b,h[7]=d):d=h[7];let w=j?l[C]:l.customColor,N=_&&l.hasBackground;return h[8]!==v||h[9]!==w||h[10]!==N?(u=(0,i.$)(l.container,w,N,v),h[8]=v,h[9]=w,h[10]=N,h[11]=u):u=h[11],h[12]!==t||h[13]!==S?(m=(0,a.jsx)(t,{size:S,fill:"currentColor"}),h[12]=t,h[13]=S,h[14]=m):m=h[14],h[15]!==d||h[16]!==u||h[17]!==m?(p=(0,a.jsx)("div",{style:d,className:u,children:m}),h[15]=d,h[16]=u,h[17]=m,h[18]=p):p=h[18],p}try{d.displayName||(d.displayName="Icon")}catch{}},84331:(e,t,n)=>{function a(e,t,n=.1){let r=s(e,t,n);return r&&-1===t.indexOf("/")&&(r+=s(e.substring(e.lastIndexOf("/")+1),t,n)),r}function r(e,t,n){if(t){let a=e.innerHTML.trim().match(n||function(e){let t=e.toLowerCase().split(""),n="",a=!0;for(let e of t){let t=e.replace(/[\\^$*+?.()|[\]{}]/g,"\\$&");a?(n+=`(.*)(${t})`,a=!1):n+=`([^${t}]*?)(${t})`}return RegExp(`${n}(.*?)$`,"i")}(t));if(!a)return;let r=!1,i=[];for(let e=1;e<a.length;++e){let t=a[e];t&&(e%2==0?r||(i.push("<mark>"),r=!0):r&&(i.push("</mark>"),r=!1),i.push(t))}e.innerHTML=i.join("")}else{let t=e.innerHTML.trim(),n=t.replace(/<\/?mark>/g,"");t!==n&&(e.innerHTML=n)}}n.d(t,{He:()=>r,UD:()=>o,dt:()=>a});let i=new Set([" ","-","_"]);function s(e,t,n=.1){let a=e;if(a===t)return 1;let r=a.length,o=0,l=0,c=!0;for(let e of t){let t=a.indexOf(e.toLowerCase()),s=a.indexOf(e.toUpperCase()),d=Math.min(t,s),u=d>-1?d:Math.max(t,s);if(-1===u)return 0;o+=.1,a[u]===e&&(o+=.1),0===u&&(o+=.9-n,c&&(l=1)),i.has(a.charAt(u-1))&&(o+=.9-n),a=a.substring(u+1,r),c=!1}let d=t.length,u=o/d,m=(d/r*u+u)/2;return l&&m+n<1&&(m+=n),m}function o(e,t){return e.score>t.score?-1:e.score<t.score?1:e.text<t.text?-1:1*!!(e.text>t.text)}},84646:(e,t,n)=>{n.d(t,{$7:()=>p,$W:()=>_,AV:()=>v,Ao:()=>f,BV:()=>x,OW:()=>CopilotSpaceSSOError,Tx:()=>y,e9:()=>h,i9:()=>CopilotSpaceNotFoundError,jS:()=>g});var a=n(50467),r=n(97286),i=n(97665),s=n(94747),o=n(72011),l=n(33592),c=n(96540),d=n(2635),u=n(71315),m=n(23657);let CopilotSpaceNotFoundError=class CopilotSpaceNotFoundError extends Error{constructor(e="Copilot Space not found"){super(e),this.name="CopilotSpaceNotFoundError"}};let CopilotSpaceSSOError=class CopilotSpaceSSOError extends Error{constructor(e,t="Copilot Space SSO error"){super(t),(0,a._)(this,"protectedOrganizations",void 0),this.protectedOrganizations=e,this.name="CopilotSpaceSSOError"}};function p(){let e=(0,i.jE)(),t=(0,l.b)();return(0,s.n)({mutationFn:async e=>{let n=await (0,o.ee)(e);if(!n.ok)throw Error(n.error);return t.dispatch({type:"REMOVE_CUSTOM_COPILOT",customCopilotId:e}),{status:n.status,ok:!0,payload:n.payload}},onSuccess:async()=>{await e.invalidateQueries({queryKey:o.O6})}})}function h(e){let t=(0,l.b)(),{data:n}=g(e,{throwOnError:!1});(0,c.useEffect)(()=>{n&&t.dispatch({type:"SET_CUSTOM_COPILOTS",customCopilots:n})},[n,t])}function g(e,t={}){return(0,r.I)({queryKey:o.O6,queryFn:o.CT,enabled:e,staleTime:3e5,throwOnError:t.throwOnError})}function f(e){return(0,r.I)({queryKey:(0,o.dp)(e),queryFn:async()=>{let t=await (0,o.Lr)(e);if(!t.ok){if(404===t.status)throw new CopilotSpaceNotFoundError;throw Error(t.error)}if(void 0===t.payload.id)throw new CopilotSpaceSSOError(t.payload.protectedOrganizations);return t.payload},enabled:!!e})}function y(e,t){return(0,r.I)({queryKey:["visibility-settings",e,t],queryFn:async()=>(0,o.A2)({owner:e,id:t}),enabled:""!==e&&-1!==t,staleTime:3e5})}function x(){return(0,d.A3)("customCopilotsEnabled")}function v(){let e=function(){let e=(0,d.A3)("customCopilots");return e?.length??0}();return(0,c.useMemo)(()=>`New Space ${e+1}`,[e])}function _(e){return(0,c.useMemo)(()=>{if(!e)return;let{owner:t}=e,n=u.cg?.location.origin;if(!n)return;let a=(0,m.Cb)(e),r=`${n}${a}`,i=`content_url=${encodeURIComponent(r)}&report=${t}+(user)`;return`${n}/contact/report-content?${i}`},[e])}},87419:(e,t,n)=>{n.d(t,{Y:()=>d});var a=n(21728),r=n(96540),i=n(25641),s=n(79064),o=n(2635),l=n(33592),c=n(72303);function d(e){let t,n,d,u,m,p,h,g,f,y,x=(0,a.c)(26),v=(0,o.Pk)(),_=(0,l.b)(),{currentTopic:C,messages:S,selectedThreadID:j}=v;x[0]!==v?(t=(0,c.W)(v),x[0]=v,x[1]=t):t=x[1];let b=t,w=(0,r.useRef)(null),N=e||w;return x[2]!==_||x[3]!==S.length||x[4]!==b?(n=()=>{b&&S.length>0&&_.showTopicPicker(!1)},d=[b,S.length,_],x[2]=_,x[3]=S.length,x[4]=b,x[5]=n,x[6]=d):(n=x[5],d=x[6]),(0,r.useEffect)(n,d),x[7]!==C||x[8]!==j?(u=()=>{let e=C?(0,i.P)(C)?C.name:String(C.id):null;j&&e&&s.Jt.setSelectedTopic(j,e)},m=[j,C],x[7]=C,x[8]=j,x[9]=u,x[10]=m):(u=x[9],m=x[10]),(0,r.useEffect)(u,m),x[11]!==N?(p=()=>{let e=window.setTimeout(()=>{N.current?.focus()},1);return()=>{window.clearTimeout(e)}},h=[N],x[11]=N,x[12]=p,x[13]=h):(p=x[12],h=x[13]),(0,r.useEffect)(p,h),x[14]!==_||x[15]!==v.context?.[0]||x[16]!==v.currentRepository?(g=()=>{let e=v.context?.[0]??v.currentRepository;return e&&_.generateSuggestions(e),()=>{_.clearSuggestions()}},x[14]=_,x[15]=v.context?.[0],x[16]=v.currentRepository,x[17]=g):g=x[17],x[18]!==_||x[19]!==v.context||x[20]!==v.currentRepository||x[21]!==v.currentTopic||x[22]!==v.selectedThreadID?(f=[_,v.context,v.currentTopic,v.currentRepository,v.selectedThreadID],x[18]=_,x[19]=v.context,x[20]=v.currentRepository,x[21]=v.currentTopic,x[22]=v.selectedThreadID,x[23]=f):f=x[23],(0,r.useEffect)(g,f),x[24]!==N?(y={textAreaRef:N},x[24]=N,x[25]=y):y=x[25],y}},88431:(e,t,n)=>{n.d(t,{N:()=>i});var a=n(71315),r=n(96540);let i=void 0!==a.cg?.document?.createElement?r.useLayoutEffect:r.useEffect},97315:(e,t,n)=>{n.d(t,{P:()=>c});var a=n(74848),r=n(21728),i=n(97949),s=n(96540),o=n(33592);let l={ambientErrorBanner:"AmbientErrorBanner-module__ambientErrorBanner--lajPC",largeBorderRadius:"AmbientErrorBanner-module__largeBorderRadius--NGjjE",mediumBorderRadius:"AmbientErrorBanner-module__mediumBorderRadius--aAp6Z"};function c(e){let t,n,c,u,m,p,h=(0,r.c)(14),{ambientError:g,useLargerBorderRadius:f}=e,y=(0,o.b)(),[x,v]=(0,s.useState)(0),_=void 0!==f&&f?l.largeBorderRadius:l.mediumBorderRadius,C=(0,s.useRef)(null);h[0]!==g.message?(t=()=>{if(g.message){v(d);let e=setTimeout(()=>{C.current&&C.current.focus()},250);return()=>clearTimeout(e)}},h[0]=g.message,h[1]=t):t=h[1],h[2]!==g?(n=[g],h[2]=g,h[3]=n):n=h[3],(0,s.useEffect)(t,n);let S=`${l.ambientErrorBanner} ${_}`;return h[4]===Symbol.for("react.memo_cache_sentinel")?(c={outline:"none"},h[4]=c):c=h[4],h[5]!==g.message?(u=(0,a.jsx)("div",{ref:C,tabIndex:-1,style:c,children:g.message}),h[5]=g.message,h[6]=u):u=h[6],h[7]!==y?(m=()=>{y.dismissAmbientError()},h[7]=y,h[8]=m):m=h[8],h[9]!==x||h[10]!==S||h[11]!==u||h[12]!==m?(p=(0,a.jsx)(i.l,{"aria-atomic":"true",className:S,description:u,variant:"critical",title:"Error during copilot chat has occurred.",hideTitle:!0,onDismiss:m},x),h[9]=x,h[10]=S,h[11]=u,h[12]=m,h[13]=p):p=h[13],p}function d(e){return e+1}try{c.displayName||(c.displayName="AmbientErrorBanner")}catch{}},97564:(e,t,n)=>{n.d(t,{V:()=>r});var a=n(96379);async function r(e){let t=await (0,a.lS)(`/github-copilot/chat/repositories/${e}`,{method:"GET"});if(!t.ok)throw Error(`Failed to fetch repository details: ${t.status}`);return await t.json()}},97793:(e,t,n)=>{n.d(t,{O:()=>h});var a=n(74848),r=n(96379),i=n(38621),s=n(15220),o=n(86877),l=n(99511),c=n(43371),d=n.n(c),u=n(96540);let m={dialogForm:"McpServerDialog-module__dialogForm--pUtNF",underline:"McpServerDialog-module__underline--YKUMk",inputError:"McpServerDialog-module__inputError--Ojb_P",formField:"McpServerDialog-module__formField--rsUqW",hiddenSubmitButton:"McpServerDialog-module__hiddenSubmitButton--KcK0s"},p=(0,a.jsx)("a",{href:"https://modelcontextprotocol.io/specification/2025-06-18/basic/authorization",target:"_blank",rel:"noopener noreferrer",style:{textDecoration:"underline"},children:"MCP authorization specification"}),h=({isOpen:e,onClose:t,returnUrl:n,onServerAdded:c,returnFocusRef:h,showSettingsLink:g=!0})=>{let[f,y]=(0,u.useState)(""),[x,v]=(0,u.useState)(""),[_,C]=(0,u.useState)(null),[S,j]=(0,u.useState)(null),b=(0,u.useCallback)(()=>{y(""),v(""),C(null),j(null),t()},[t]),w=async e=>{if(e&&e.preventDefault(),""===f.trim()||""===x.trim()){x.trim()||C("MCP server URL is required"),f.trim()||j("Name is required");return}try{if(C(null),!function(e){try{let t=new URL(e.trim(),window.location.origin),n=d()();return"https:"===t.protocol&&!!t.hostname&&/^[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(t.hostname)&&!n.test(e)}catch{return!1}}(x))return void C("Invalid HTTPS URL format");let e=new FormData;e.append("mcp_server_url",x.trim()),e.append("name",f.trim()),n&&e.append("return_url",n);let t=await (0,r.DI)("/copilot/mcp/servers",{method:"POST",body:e});if(!t.ok){let e="Failed to add MCP server";try{let n=await t.text();try{let t=JSON.parse(n);if("unsupported_server_type"===t.error)e=(0,a.jsxs)(a.Fragment,{children:["This server does not conform to the ",p,"."]});else if(t.field_errors){for(let[e,n]of Object.entries(t.field_errors)){let t=n.join(", ");"mcp_server_url"===e?C(t):"display_name"===e&&j(t)}return}else t.message&&(e=t.message)}catch{e=n.includes("well-known/oauth-authorization-server")||"Client setup failed"===n.trim()?(0,a.jsxs)(a.Fragment,{children:["This server does not conform to the ",p,"."]}):n||e}}catch{e="Failed to add MCP server"}C(e);return}let i=(await t.json()).redirect_url;i&&"string"==typeof i?(b(),c?.(),window.location.assign(i)):(b(),c?.())}catch(e){e instanceof Error?C(e.message):C("An unknown error occurred")}};return e?(0,a.jsx)(s.l,{title:"Add MCP server",onClose:b,footerButtons:[{buttonType:"default",content:"Cancel",onClick:b},{buttonType:"primary",content:(0,a.jsxs)(a.Fragment,{children:["Connect to MCP server",(0,a.jsx)("span",{style:{marginLeft:8},children:(0,a.jsx)(i.LinkExternalIcon,{size:16})})]}),onClick:()=>{w()}}],returnFocusRef:h,children:(0,a.jsxs)("form",{className:m.dialogForm,onSubmit:w,autoComplete:"on",children:[(0,a.jsxs)(o.A,{required:!0,className:m.formField,children:[(0,a.jsx)(o.A.Label,{children:"MCP server name"}),(0,a.jsx)(l.A,{name:"mcp-server-name",type:"text",value:f,onChange:e=>{y(e.target.value),j(null)},placeholder:"Enter a name for this MCP server",className:S?m.inputError:void 0,autoComplete:"on",block:!0}),S&&(0,a.jsx)(o.A.Validation,{variant:"error",children:S})]}),(0,a.jsxs)(o.A,{required:!0,className:m.formField,children:[(0,a.jsx)(o.A.Label,{children:"MCP server URL"}),(0,a.jsx)(l.A,{name:"mcp-url",type:"url",value:x,onChange:e=>{v(e.target.value),C(null)},placeholder:"https://mcp.example.com",className:_?m.inputError:void 0,autoComplete:"on",block:!0}),_&&(0,a.jsx)(o.A.Validation,{variant:"error",children:_})]}),(0,a.jsx)("button",{type:"submit",className:m.hiddenSubmitButton,tabIndex:-1,children:"Submit"}),(0,a.jsxs)("p",{children:["MCP Server data will be processed by models coming from third-party providers. Always review the permissions required by the MCP server and only connect to MCP servers you know and trust.",g&&(0,a.jsxs)(a.Fragment,{children:[" ","You can revoke access for the MCP server at any time in"," ",(0,a.jsx)("a",{href:"/settings",className:m.underline,children:"your settings"}),"."]})]})]})}):null};try{p.displayName||(p.displayName="MCP_SPEC_LINK")}catch{}try{h.displayName||(h.displayName="McpServerDialog")}catch{}},99054:(e,t,n)=>{n.d(t,{JE:()=>h,Z3:()=>m,bn:()=>u,kw:()=>g,qj:()=>p});var a=n(21728),r=n(97286),i=n(8625),s=n(14521),o=n(25641),l=n(2635),c=n(33592),d=n(72206);let u="https://github.com/marketplace?type=apps&copilot_app=true",m="@",p=/^@(?<slug>\S+)$/;function h(e){let t,n,i,u,m,p,h=(0,a.c)(25),{agentsPath:g,model:f}=(0,l.bP)("agentsPath","model"),y=(0,d.tD)(),x=(0,c.b)(),v=!!(0,s.G)(),_=f?.hasLimitedCapabilities;h[0]!==y||h[1]!==v||h[2]!==_?(t=e=>{let{messages:t}=y();if(_||v)return{agents:[],showLimit:!1};let n=(0,o.Q7)(t)[0];return n?{agents:e.filter(e=>e.slug===n.name),showLimit:e.length>1}:{agents:e,showLimit:!1}},h[0]=y,h[1]=v,h[2]=_,h[3]=t):t=h[3];let C=t;h[4]!==g?(n=["copilot-chat","agents",g],h[4]=g,h[5]=n):n=h[5],h[6]!==g||h[7]!==x?(i=()=>g?x.fetchAgents(g):[],h[6]=g,h[7]=x,h[8]=i):i=h[8];let S=(void 0===e||e)&&!_&&!v;h[9]!==C||h[10]!==n||h[11]!==i||h[12]!==S?(u={queryKey:n,queryFn:i,select:C,enabled:S},h[9]=C,h[10]=n,h[11]=i,h[12]=S,h[13]=u):u=h[13];let{isLoading:j,data:b,refetch:w,isStale:N,isFetched:I}=(0,r.I)(u);h[14]!==b||h[15]!==I||h[16]!==N||h[17]!==w?(m=async()=>!I||N?(await w()).data:b,h[14]=b,h[15]=I,h[16]=N,h[17]=w,h[18]=m):m=h[18];let E=m,T=b?.agents,A=b?.showLimit??!1;return h[19]!==E||h[20]!==j||h[21]!==T||h[22]!==A||h[23]!==_?(p={loading:j,disabled:_,availableAgents:T,showLimit:A,imperativelyFetch:E},h[19]=E,h[20]=j,h[21]=T,h[22]=A,h[23]=_,h[24]=p):p=h[24],p}function g(e){let t,n,r=(0,a.c)(6),{inputOnChange:s,inputRef:o}=e;r[0]!==s||r[1]!==o?(t={inputRef:o,fallbackEventHandler:s},r[0]=s,r[1]=o,r[2]=t):t=r[2];let l=(0,i.H)(t);return r[3]!==l||r[4]!==o?(n=e=>{o.current?.value&&l(" ",[0,0]);let t=`${m}${void 0===e?"":e}`;l(t,[0,0],t.length)},r[3]=l,r[4]=o,r[5]=n):n=r[5],n}}}]);
//# sourceMappingURL=packages_noop_noop_ts-packages_promise-with-resolvers-polyfill_promise-with-resolvers-polyfil-1effa1-75d742fc9389.js.map